<!DOCTYPE html>

<html>
<head>
<meta content="text/html; charset=UTF-8" http-equiv="Content-Type">

<title>class MaRuKu::MDElement - maruku-0.7.0 Documentation</title>

<link type="text/css" media="screen" href="../rdoc.css" rel="stylesheet">

<script type="text/javascript">
  var rdoc_rel_prefix = "../";
</script>

<script type="text/javascript" charset="utf-8" src="../js/jquery.js"></script>
<script type="text/javascript" charset="utf-8" src="../js/navigation.js"></script>
<script type="text/javascript" charset="utf-8" src="../js/search_index.js"></script>
<script type="text/javascript" charset="utf-8" src="../js/search.js"></script>
<script type="text/javascript" charset="utf-8" src="../js/searcher.js"></script>
<script type="text/javascript" charset="utf-8" src="../js/darkfish.js"></script>


<body id="top" class="class">
<nav id="metadata">
  <nav id="home-section" class="section">
  <h3 class="section-header">
    <a href="../index.html">Home</a>
    <a href="../table_of_contents.html#classes">Classes</a>
    <a href="../table_of_contents.html#methods">Methods</a>
  </h3>
</nav>


  <nav id="search-section" class="section project-section" class="initially-hidden">
  <form action="#" method="get" accept-charset="utf-8">
    <h3 class="section-header">
      <input type="text" name="search" placeholder="Search" id="search-field"
             title="Type to search, Up and Down to navigate, Enter to load">
    </h3>
  </form>

  <ul id="search-results" class="initially-hidden"></ul>
</nav>


  

  <div id="file-metadata">
    <nav id="file-list-section" class="section">
  <h3 class="section-header">Defined In</h3>
  <ul>
    <li>lib/maruku.rb
    <li>lib/maruku/defaults.rb
    <li>lib/maruku/element.rb
    <li>lib/maruku/ext/div.rb
    <li>lib/maruku/ext/math/elements.rb
    <li>lib/maruku/inspect_element.rb
    <li>lib/maruku/output/to_s.rb
    <li>lib/maruku/toc.rb
  </ul>
</nav>

    
  </div>

  <div id="class-metadata">
    
    <nav id="parent-class-section" class="section">
  <h3 class="section-header">Parent</h3>
  
  <p class="link"><a href="../Object.html">Object</a>
  
</nav>

    <!-- Included Modules -->
<nav id="includes-section" class="section">
  <h3 class="section-header">Included Modules</h3>

  <ul class="link-list">
  
  
    <li><a class="include" href="../MaRuKu.html">MaRuKu</a>
  
  
  
    <li><a class="include" href="Out/Markdown.html">MaRuKu::Out::Markdown</a>
  
  
  
    <li><a class="include" href="Out/HTML.html">MaRuKu::Out::HTML</a>
  
  
  
    <li><a class="include" href="Out/Latex.html">MaRuKu::Out::Latex</a>
  
  
  
    <li><a class="include" href="Strings.html">MaRuKu::Strings</a>
  
  
  
    <li><a class="include" href="Helpers.html">MaRuKu::Helpers</a>
  
  
  
    <li><a class="include" href="Errors.html">MaRuKu::Errors</a>
  
  
  </ul>
</nav>

    
    <!-- Method Quickref -->
<nav id="method-list-section" class="section">
  <h3 class="section-header">Methods</h3>

  <ul class="link-list">
    
    <li ><a href="#method-c-new">::new</a>
    
    <li ><a href="#method-i-3D-3D">#==</a>
    
    <li ><a href="#method-i-children_inspect">#children_inspect</a>
    
    <li ><a href="#method-i-children_to_s">#children_to_s</a>
    
    <li ><a href="#method-i-each_element">#each_element</a>
    
    <li ><a href="#method-i-generate_id">#generate_id</a>
    
    <li ><a href="#method-i-get_setting">#get_setting</a>
    
    <li ><a href="#method-i-inspect">#inspect</a>
    
    <li ><a href="#method-i-md_div">#md_div</a>
    
    <li ><a href="#method-i-md_equation">#md_equation</a>
    
    <li ><a href="#method-i-md_inline_math">#md_inline_math</a>
    
    <li ><a href="#method-i-replace_each_string">#replace_each_string</a>
    
    <li ><a href="#method-i-to_s">#to_s</a>
    
  </ul>
</nav>

  </div>

  <div id="project-metadata">
    
    <nav id="classindex-section" class="section project-section">
  <h3 class="section-header">Class and Module Index</h3>

  <ul class="link-list">
  
    <li><a href="../MaRuKu.html">MaRuKu</a>
  
    <li><a href="../MaRuKu/AttributeList.html">MaRuKu::AttributeList</a>
  
    <li><a href="../MaRuKu/Errors.html">MaRuKu::Errors</a>
  
    <li><a href="../MaRuKu/Exception.html">MaRuKu::Exception</a>
  
    <li><a href="../MaRuKu/HTMLElement.html">MaRuKu::HTMLElement</a>
  
    <li><a href="../MaRuKu/HTMLFragment.html">MaRuKu::HTMLFragment</a>
  
    <li><a href="../MaRuKu/Helpers.html">MaRuKu::Helpers</a>
  
    <li><a href="../MaRuKu/In.html">MaRuKu::In</a>
  
    <li><a href="../MaRuKu/In.html">MaRuKu::In</a>
  
    <li><a href="../MaRuKu/In/Markdown.html">MaRuKu::In::Markdown</a>
  
    <li><a href="../MaRuKu/In/Markdown.html">MaRuKu::In::Markdown</a>
  
    <li><a href="../MaRuKu/In/Markdown/BlockLevelParser.html">MaRuKu::In::Markdown::BlockLevelParser</a>
  
    <li><a href="../MaRuKu/In/Markdown/BlockLevelParser/BlockContext.html">MaRuKu::In::Markdown::BlockLevelParser::BlockContext</a>
  
    <li><a href="../MaRuKu/In/Markdown/BlockLevelParser/LineSource.html">MaRuKu::In::Markdown::BlockLevelParser::LineSource</a>
  
    <li><a href="../MaRuKu/In/Markdown/SpanExtension.html">MaRuKu::In::Markdown::SpanExtension</a>
  
    <li><a href="../MaRuKu/In/Markdown/SpanLevelParser.html">MaRuKu::In::Markdown::SpanLevelParser</a>
  
    <li><a href="../MaRuKu/In/Markdown/SpanLevelParser/CaptureRule.html">MaRuKu::In::Markdown::SpanLevelParser::CaptureRule</a>
  
    <li><a href="../MaRuKu/In/Markdown/SpanLevelParser/CharSourceDebug.html">MaRuKu::In::Markdown::SpanLevelParser::CharSourceDebug</a>
  
    <li><a href="../MaRuKu/In/Markdown/SpanLevelParser/CharSourceManual.html">MaRuKu::In::Markdown::SpanLevelParser::CharSourceManual</a>
  
    <li><a href="../MaRuKu/In/Markdown/SpanLevelParser/CharSourceStrscan.html">MaRuKu::In::Markdown::SpanLevelParser::CharSourceStrscan</a>
  
    <li><a href="../MaRuKu/In/Markdown/SpanLevelParser/HTMLHelper.html">MaRuKu::In::Markdown::SpanLevelParser::HTMLHelper</a>
  
    <li><a href="../MaRuKu/In/Markdown/SpanLevelParser/ReplaceRule.html">MaRuKu::In::Markdown::SpanLevelParser::ReplaceRule</a>
  
    <li><a href="../MaRuKu/In/Markdown/SpanLevelParser/Rule.html">MaRuKu::In::Markdown::SpanLevelParser::Rule</a>
  
    <li><a href="../MaRuKu/In/Markdown/SpanLevelParser/SpanContext.html">MaRuKu::In::Markdown::SpanLevelParser::SpanContext</a>
  
    <li><a href="../MaRuKu/MDDocument.html">MaRuKu::MDDocument</a>
  
    <li><a href="../MaRuKu/MDElement.html">MaRuKu::MDElement</a>
  
    <li><a href="../MaRuKu/MDHTMLElement.html">MaRuKu::MDHTMLElement</a>
  
    <li><a href="../MaRuKu/MDLine.html">MaRuKu::MDLine</a>
  
    <li><a href="../MaRuKu/NokogiriHTMLFragment.html">MaRuKu::NokogiriHTMLFragment</a>
  
    <li><a href="../MaRuKu/Out.html">MaRuKu::Out</a>
  
    <li><a href="../MaRuKu/Out/EntityTable.html">MaRuKu::Out::EntityTable</a>
  
    <li><a href="../MaRuKu/Out/HTML.html">MaRuKu::Out::HTML</a>
  
    <li><a href="../MaRuKu/Out/HTML/HTMLElement.html">MaRuKu::Out::HTML::HTMLElement</a>
  
    <li><a href="../MaRuKu/Out/Latex.html">MaRuKu::Out::Latex</a>
  
    <li><a href="../MaRuKu/Out/Latex/MDDocumentExtensions.html">MaRuKu::Out::Latex::MDDocumentExtensions</a>
  
    <li><a href="../MaRuKu/Out/Markdown.html">MaRuKu::Out::Markdown</a>
  
    <li><a href="../MaRuKu/REXMLHTMLFragment.html">MaRuKu::REXMLHTMLFragment</a>
  
    <li><a href="../MaRuKu/Section.html">MaRuKu::Section</a>
  
    <li><a href="../MaRuKu/Strings.html">MaRuKu::Strings</a>
  
    <li><a href="../Maruku.html">Maruku</a>
  
    <li><a href="../Maruku.html">Maruku</a>
  
    <li><a href="../Maruku/In/Markdown/FencedCode.html">Maruku::In::Markdown::FencedCode</a>
  
    <li><a href="../Object.html">Object</a>
  
    <li><a href="../String.html">String</a>
  
    <li><a href="../Textile2Signature.html">Textile2Signature</a>
  
  </ul>
</nav>

  </div>
</nav>

<div id="documentation">
  <h1 class="class">class MaRuKu::MDElement</h1>

  <div id="description" class="description">
    
<p>Rather than having a separate class for every possible element, <a
href="../Maruku.html">Maruku</a> has a single {MDElement} class that
represents eveything in the document (paragraphs, headers, etc). The type
of each element is available via {#node_type}.</p>

  </div><!-- description -->

  
  
  
  <section id="5Buntitled-5D" class="documentation-section">
    

    

    
    <!-- Constants -->
    <section id="constants-list" class="section">
      <h3 class="section-header">Constants</h3>
      <dl>
      
        <dt id="INSPECT_FORMS">INSPECT_FORMS
        
        <dd class="description">
        
      
      </dl>
    </section>
    

    
    <!-- Attributes -->
    <section id="attribute-method-details" class="method-section section">
      <h3 class="section-header">Attributes</h3>

      
      <div id="attribute-i-al" class="method-detail">
        <div class="method-heading attribute-method-heading">
          <span class="method-name">al</span><span
            class="attribute-access-type">[RW]</span>
        </div>

        <div class="method-description">
        
        <p>An attribute list. May not be nil.</p>

<p>@return [AttributeList]</p>
        
        </div>
      </div>
      
      <div id="attribute-i-attributes" class="method-detail">
        <div class="method-heading attribute-method-heading">
          <span class="method-name">attributes</span><span
            class="attribute-access-type">[RW]</span>
        </div>

        <div class="method-description">
        
        <p>The processed attributes.</p>

<p>For the {Maruku document root}, this contains properties listed at the
beginning of the document. The properties will be downcased and any spaces
will be converted to underscores. For example, if you write in the source
document:</p>

<pre>!!!text
Title: test document
My property: value

content content</pre>

<p>Then {#attributes} will return:</p>

<pre class="ruby">{:<span class="ruby-identifier">title</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&quot;test document&quot;</span>, :<span class="ruby-identifier">my_property</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&quot;value&quot;</span>}
</pre>

<p>@return [{Symbol =&gt; String}]</p>
        
        </div>
      </div>
      
      <div id="attribute-i-children" class="method-detail">
        <div class="method-heading attribute-method-heading">
          <span class="method-name">children</span><span
            class="attribute-access-type">[RW]</span>
        </div>

        <div class="method-description">
        
        <p>The child nodes of this element.</p>

<p>@return [Array&lt;String or MDElement&gt;]</p>
        
        </div>
      </div>
      
      <div id="attribute-i-doc" class="method-detail">
        <div class="method-heading attribute-method-heading">
          <span class="method-name">doc</span><span
            class="attribute-access-type">[RW]</span>
        </div>

        <div class="method-description">
        
        <p>The root element of the document to which this element belongs.</p>

<p>@return [Maruku]</p>
        
        </div>
      </div>
      
      <div id="attribute-i-meta_priv" class="method-detail">
        <div class="method-heading attribute-method-heading">
          <span class="method-name">meta_priv</span><span
            class="attribute-access-type">[RW]</span>
        </div>

        <div class="method-description">
        
        <p>@private</p>
        
        </div>
      </div>
      
      <div id="attribute-i-node_type" class="method-detail">
        <div class="method-heading attribute-method-heading">
          <span class="method-name">node_type</span><span
            class="attribute-access-type">[RW]</span>
        </div>

        <div class="method-description">
        
        <p>The type of this node (e.g. `:quote`, `:image`, `:abbr`). See {Helpers} for
a list of possible values.</p>

<p>@return [Symbol]</p>
        
        </div>
      </div>
      
    </section><!-- attribute-method-details -->
    

    <!-- Methods -->
    
     <section id="public-class-5Buntitled-5D-method-details" class="method-section section">
      <h3 class="section-header">Public Class Methods</h3>

    
      <div id="method-c-new" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">new</span><span
            class="method-args">(node_type = :unset, children = [], meta = {}, al = nil)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="new-source">
            <pre><span class="ruby-comment"># File lib/maruku/element.rb, line 51</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">initialize</span>(<span class="ruby-identifier">node_type</span> = <span class="ruby-value">:unset</span>, <span class="ruby-identifier">children</span> = [], <span class="ruby-identifier">meta</span> = {}, <span class="ruby-identifier">al</span> = <span class="ruby-keyword">nil</span>)
  <span class="ruby-keyword">self</span>.<span class="ruby-identifier">children</span> = <span class="ruby-identifier">children</span>
  <span class="ruby-keyword">self</span>.<span class="ruby-identifier">node_type</span> = <span class="ruby-identifier">node_type</span>
  <span class="ruby-keyword">self</span>.<span class="ruby-identifier">attributes</span> = {}

  <span class="ruby-comment"># Define a new accessor on the singleton class for this instance</span>
  <span class="ruby-comment"># for each metadata key</span>
  <span class="ruby-identifier">meta</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">symbol</span>, <span class="ruby-identifier">value</span><span class="ruby-operator">|</span>
    <span class="ruby-keyword">class</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-keyword">self</span>
      <span class="ruby-keyword">self</span>
    <span class="ruby-keyword">end</span>.<span class="ruby-identifier">send</span>(<span class="ruby-value">:attr_accessor</span>, <span class="ruby-identifier">symbol</span>)

    <span class="ruby-keyword">self</span>.<span class="ruby-identifier">send</span>(<span class="ruby-node">&quot;#{symbol}=&quot;</span>, <span class="ruby-identifier">value</span>)
  <span class="ruby-keyword">end</span>

  <span class="ruby-keyword">self</span>.<span class="ruby-identifier">al</span> = <span class="ruby-identifier">al</span> <span class="ruby-operator">||</span> <span class="ruby-constant">AttributeList</span>.<span class="ruby-identifier">new</span>
  <span class="ruby-keyword">self</span>.<span class="ruby-identifier">meta_priv</span> = <span class="ruby-identifier">meta</span>
<span class="ruby-keyword">end</span></pre>
          </div><!-- new-source -->
          
        </div>

        

        
      </div><!-- new-method -->

    
    </section><!-- public-class-method-details -->
  
     <section id="public-instance-5Buntitled-5D-method-details" class="method-section section">
      <h3 class="section-header">Public Instance Methods</h3>

    
      <div id="method-i-3D-3D" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">==</span><span
            class="method-args">(o)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="3D-3D-source">
            <pre><span class="ruby-comment"># File lib/maruku/element.rb, line 73</span>
<span class="ruby-keyword">def</span> <span class="ruby-operator">==</span>(<span class="ruby-identifier">o</span>)
  <span class="ruby-identifier">o</span>.<span class="ruby-identifier">is_a?</span>(<span class="ruby-constant">MDElement</span>) <span class="ruby-operator">&amp;&amp;</span>
    <span class="ruby-keyword">self</span>.<span class="ruby-identifier">node_type</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">o</span>.<span class="ruby-identifier">node_type</span> <span class="ruby-operator">&amp;&amp;</span>
    <span class="ruby-keyword">self</span>.<span class="ruby-identifier">meta_priv</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">o</span>.<span class="ruby-identifier">meta_priv</span> <span class="ruby-operator">&amp;&amp;</span>
    <span class="ruby-keyword">self</span>.<span class="ruby-identifier">children</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">o</span>.<span class="ruby-identifier">children</span>
<span class="ruby-keyword">end</span></pre>
          </div><!-- 3D-3D-source -->
          
        </div>

        

        
      </div><!-- 3D-3D-method -->

    
      <div id="method-i-children_to_s" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">children_to_s</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="children_to_s-source">
            <pre><span class="ruby-comment"># File lib/maruku/output/to_s.rb, line 11</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">children_to_s</span>
  <span class="ruby-ivar">@children</span>.<span class="ruby-identifier">join</span>
<span class="ruby-keyword">end</span></pre>
          </div><!-- children_to_s-source -->
          
        </div>

        

        
      </div><!-- children_to_s-method -->

    
      <div id="method-i-each_element" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">each_element</span><span
            class="method-args">(e_node_type=nil) { |c| ... }</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Iterates through each {MDElement} child node of this element. This includes
deeply-nested child nodes. If `e_node_type` is specified, only yields nodes
of that type.</p>
          
          

          
          <div class="method-source-code" id="each_element-source">
            <pre><span class="ruby-comment"># File lib/maruku/element.rb, line 83</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">each_element</span>(<span class="ruby-identifier">e_node_type</span>=<span class="ruby-keyword">nil</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>)
  <span class="ruby-ivar">@children</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">c</span><span class="ruby-operator">|</span>
    <span class="ruby-keyword">next</span> <span class="ruby-keyword">unless</span> <span class="ruby-identifier">c</span>.<span class="ruby-identifier">is_a?</span> <span class="ruby-constant">MDElement</span>
    <span class="ruby-keyword">yield</span> <span class="ruby-identifier">c</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">e_node_type</span>.<span class="ruby-identifier">nil?</span> <span class="ruby-operator">||</span> <span class="ruby-identifier">c</span>.<span class="ruby-identifier">node_type</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">e_node_type</span>
    <span class="ruby-identifier">c</span>.<span class="ruby-identifier">each_element</span>(<span class="ruby-identifier">e_node_type</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>)
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
          </div><!-- each_element-source -->
          
        </div>

        

        
      </div><!-- each_element-method -->

    
      <div id="method-i-generate_id" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">generate_id</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Generate an id for headers. Assumes @children is set.</p>
          
          

          
          <div class="method-source-code" id="generate_id-source">
            <pre><span class="ruby-comment"># File lib/maruku/toc.rb, line 180</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">generate_id</span>
  <span class="ruby-identifier">raise</span> <span class="ruby-string">&quot;generate_id only makes sense for headers&quot;</span> <span class="ruby-keyword">unless</span> <span class="ruby-identifier">node_type</span> <span class="ruby-operator">==</span> <span class="ruby-value">:header</span>
  <span class="ruby-identifier">generated_id</span> = <span class="ruby-identifier">children_to_s</span>.<span class="ruby-identifier">tr</span>(<span class="ruby-string">&#39; &#39;</span>, <span class="ruby-string">&#39;_&#39;</span>).<span class="ruby-identifier">downcase</span>.<span class="ruby-identifier">gsub</span>(<span class="ruby-regexp">/\W/</span>, <span class="ruby-string">&#39;&#39;</span>).<span class="ruby-identifier">strip</span>
  <span class="ruby-identifier">num_occurs</span> = (<span class="ruby-ivar">@doc</span>.<span class="ruby-identifier">header_ids</span>[<span class="ruby-identifier">generated_id</span>] <span class="ruby-operator">+=</span> <span class="ruby-value">1</span>)
  <span class="ruby-identifier">generated_id</span> <span class="ruby-operator">+=</span> <span class="ruby-node">&quot;_#{num_occurs}&quot;</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">num_occurs</span> <span class="ruby-operator">&gt;</span> <span class="ruby-value">1</span>
  <span class="ruby-identifier">generated_id</span>
<span class="ruby-keyword">end</span></pre>
          </div><!-- generate_id-source -->
          
        </div>

        

        
      </div><!-- generate_id-method -->

    
      <div id="method-i-get_setting" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">get_setting</span><span
            class="method-args">(sym)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="get_setting-source">
            <pre><span class="ruby-comment"># File lib/maruku/defaults.rb, line 39</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">get_setting</span>(<span class="ruby-identifier">sym</span>)
  <span class="ruby-keyword">return</span> <span class="ruby-identifier">attributes</span>[<span class="ruby-identifier">sym</span>] <span class="ruby-keyword">if</span> <span class="ruby-identifier">attributes</span>.<span class="ruby-identifier">has_key?</span>(<span class="ruby-identifier">sym</span>)
  <span class="ruby-keyword">return</span> <span class="ruby-identifier">doc</span>.<span class="ruby-identifier">attributes</span>[<span class="ruby-identifier">sym</span>] <span class="ruby-keyword">if</span> <span class="ruby-identifier">doc</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">doc</span>.<span class="ruby-identifier">attributes</span>.<span class="ruby-identifier">has_key?</span>(<span class="ruby-identifier">sym</span>)
  <span class="ruby-keyword">return</span> <span class="ruby-constant">MaRuKu</span><span class="ruby-operator">::</span><span class="ruby-constant">Globals</span>[<span class="ruby-identifier">sym</span>] <span class="ruby-keyword">if</span> <span class="ruby-constant">MaRuKu</span><span class="ruby-operator">::</span><span class="ruby-constant">Globals</span>.<span class="ruby-identifier">has_key?</span>(<span class="ruby-identifier">sym</span>)

  <span class="ruby-identifier">$stderr</span>.<span class="ruby-identifier">puts</span> <span class="ruby-node">&quot;Bug: no default for #{sym.inspect}&quot;</span>
  <span class="ruby-keyword">nil</span>
<span class="ruby-keyword">end</span></pre>
          </div><!-- get_setting-source -->
          
        </div>

        

        
      </div><!-- get_setting-method -->

    
      <div id="method-i-inspect" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">inspect</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Outputs the document AST as calls to document helpers. (this should be
`eval`-able to get a copy of the original element).</p>
          
          

          
          <div class="method-source-code" id="inspect-source">
            <pre><span class="ruby-comment"># File lib/maruku/inspect_element.rb, line 24</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">inspect</span>
  <span class="ruby-keyword">if</span> <span class="ruby-constant">INSPECT_FORMS</span>.<span class="ruby-identifier">has_key?</span> <span class="ruby-ivar">@node_type</span>
    <span class="ruby-identifier">name</span>, <span class="ruby-operator">*</span><span class="ruby-identifier">params</span> = <span class="ruby-constant">INSPECT_FORMS</span>[<span class="ruby-ivar">@node_type</span>]

    <span class="ruby-identifier">params</span> = <span class="ruby-identifier">params</span>.<span class="ruby-identifier">map</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">p</span><span class="ruby-operator">|</span>
      <span class="ruby-keyword">if</span> <span class="ruby-identifier">p</span> <span class="ruby-operator">==</span> <span class="ruby-value">:children</span>
        <span class="ruby-identifier">children_inspect</span>
      <span class="ruby-keyword">else</span>
        <span class="ruby-identifier">send</span>(<span class="ruby-identifier">p</span>).<span class="ruby-identifier">inspect</span>
      <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">end</span>
    <span class="ruby-identifier">params</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-ivar">@al</span>.<span class="ruby-identifier">inspect</span> <span class="ruby-keyword">if</span> <span class="ruby-ivar">@al</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-operator">!</span><span class="ruby-ivar">@al</span>.<span class="ruby-identifier">empty?</span>
  <span class="ruby-keyword">else</span>
    <span class="ruby-identifier">name</span> = <span class="ruby-string">&#39;el&#39;</span>
    <span class="ruby-identifier">params</span> = [<span class="ruby-keyword">self</span>.<span class="ruby-identifier">node_type</span>.<span class="ruby-identifier">inspect</span>, <span class="ruby-identifier">children_inspect</span>]
    <span class="ruby-identifier">params</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-ivar">@meta_priv</span>.<span class="ruby-identifier">inspect</span> <span class="ruby-keyword">unless</span> <span class="ruby-ivar">@meta_priv</span>.<span class="ruby-identifier">empty?</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier">al</span>.<span class="ruby-identifier">empty?</span>
    <span class="ruby-identifier">params</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier">al</span>.<span class="ruby-identifier">inspect</span> <span class="ruby-keyword">unless</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier">al</span>.<span class="ruby-identifier">empty?</span>
  <span class="ruby-keyword">end</span>

  <span class="ruby-node">&quot;md_#{name}(#{params.join(&#39;, &#39;)})&quot;</span>
<span class="ruby-keyword">end</span></pre>
          </div><!-- inspect-source -->
          
        </div>

        

        
      </div><!-- inspect-method -->

    
      <div id="method-i-md_div" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">md_div</span><span
            class="method-args">(children, al = nil)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="md_div-source">
            <pre><span class="ruby-comment"># File lib/maruku/ext/div.rb, line 91</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">md_div</span>(<span class="ruby-identifier">children</span>, <span class="ruby-identifier">al</span> = <span class="ruby-keyword">nil</span>)
  <span class="ruby-identifier">type</span> = <span class="ruby-identifier">label</span> = <span class="ruby-identifier">num</span> = <span class="ruby-keyword">nil</span>
  <span class="ruby-identifier">doc</span>.<span class="ruby-identifier">refid2ref</span> <span class="ruby-operator">||=</span> {}
  <span class="ruby-keyword">if</span> <span class="ruby-identifier">al</span>
    <span class="ruby-identifier">al</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">k</span>, <span class="ruby-identifier">v</span><span class="ruby-operator">|</span>
      <span class="ruby-keyword">case</span> <span class="ruby-identifier">k</span>
      <span class="ruby-keyword">when</span> <span class="ruby-value">:class</span>; <span class="ruby-identifier">type</span> = <span class="ruby-node">$1</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">v</span> <span class="ruby-operator">=~</span> <span class="ruby-regexp">/^num_(\w*)/</span>
      <span class="ruby-keyword">when</span> <span class="ruby-value">:id</span>; <span class="ruby-identifier">label</span> = <span class="ruby-identifier">v</span>
      <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>

  <span class="ruby-keyword">if</span> <span class="ruby-identifier">type</span>
    <span class="ruby-identifier">doc</span>.<span class="ruby-identifier">refid2ref</span>[<span class="ruby-identifier">type</span>] <span class="ruby-operator">||=</span> {}
    <span class="ruby-identifier">num</span> = <span class="ruby-identifier">doc</span>.<span class="ruby-identifier">refid2ref</span>[<span class="ruby-identifier">type</span>].<span class="ruby-identifier">length</span> <span class="ruby-operator">+</span> <span class="ruby-value">1</span>
    <span class="ruby-keyword">if</span> <span class="ruby-operator">!</span><span class="ruby-identifier">label</span>
      <span class="ruby-identifier">doc</span>.<span class="ruby-identifier">id_counter</span> <span class="ruby-operator">+=</span> <span class="ruby-value">1</span>
            <span class="ruby-identifier">label</span> =  <span class="ruby-string">&quot;div_&quot;</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">doc</span>.<span class="ruby-identifier">id_counter</span>.<span class="ruby-identifier">to_s</span>
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>

  <span class="ruby-identifier">e</span> = <span class="ruby-keyword">self</span>.<span class="ruby-identifier">md_el</span>(<span class="ruby-value">:div</span>, <span class="ruby-identifier">children</span>, {<span class="ruby-value">:label</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">label</span>, <span class="ruby-value">:type</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">type</span>, <span class="ruby-value">:num</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">num</span>}, <span class="ruby-identifier">al</span>)
  <span class="ruby-identifier">doc</span>.<span class="ruby-identifier">refid2ref</span>[<span class="ruby-identifier">type</span>].<span class="ruby-identifier">update</span>(<span class="ruby-identifier">label</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">e</span>) <span class="ruby-keyword">if</span> <span class="ruby-identifier">type</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">label</span>
  <span class="ruby-identifier">e</span>
<span class="ruby-keyword">end</span></pre>
          </div><!-- md_div-source -->
          
        </div>

        

        
      </div><!-- md_div-method -->

    
      <div id="method-i-md_equation" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">md_equation</span><span
            class="method-args">(math, label, numerate)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="md_equation-source">
            <pre><span class="ruby-comment"># File lib/maruku/ext/math/elements.rb, line 7</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">md_equation</span>(<span class="ruby-identifier">math</span>, <span class="ruby-identifier">label</span>, <span class="ruby-identifier">numerate</span>)
  <span class="ruby-identifier">reglabel</span> = <span class="ruby-regexp">/\label\{(\w+)\}/</span>
  <span class="ruby-identifier">math</span> = <span class="ruby-identifier">math</span>.<span class="ruby-identifier">gsub</span>(<span class="ruby-identifier">reglabel</span>, <span class="ruby-string">&#39;&#39;</span>) <span class="ruby-keyword">if</span> <span class="ruby-identifier">label</span> = <span class="ruby-identifier">math</span>[<span class="ruby-identifier">reglabel</span>, <span class="ruby-value">1</span>]
  <span class="ruby-identifier">num</span> = <span class="ruby-keyword">nil</span>
  <span class="ruby-keyword">if</span> (<span class="ruby-identifier">label</span> <span class="ruby-operator">||</span> <span class="ruby-identifier">numerate</span>) <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-ivar">@doc</span> <span class="ruby-comment"># take number</span>
    <span class="ruby-ivar">@doc</span>.<span class="ruby-identifier">eqid2eq</span> <span class="ruby-operator">||=</span> {}
    <span class="ruby-identifier">num</span> = <span class="ruby-ivar">@doc</span>.<span class="ruby-identifier">eqid2eq</span>.<span class="ruby-identifier">size</span> <span class="ruby-operator">+</span> <span class="ruby-value">1</span>
    <span class="ruby-identifier">label</span> = <span class="ruby-node">&quot;eq#{num}&quot;</span> <span class="ruby-keyword">unless</span> <span class="ruby-identifier">label</span> <span class="ruby-comment"># TODO do id for document</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-identifier">e</span> = <span class="ruby-keyword">self</span>.<span class="ruby-identifier">md_el</span>(<span class="ruby-value">:equation</span>, [], <span class="ruby-value">:math</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">math</span>, <span class="ruby-value">:label</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">label</span>, <span class="ruby-value">:num</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">num</span>)
  <span class="ruby-ivar">@doc</span>.<span class="ruby-identifier">eqid2eq</span>[<span class="ruby-identifier">label</span>] = <span class="ruby-identifier">e</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">label</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-ivar">@doc</span> <span class="ruby-comment"># take number</span>
  <span class="ruby-identifier">e</span>
<span class="ruby-keyword">end</span></pre>
          </div><!-- md_equation-source -->
          
        </div>

        

        
      </div><!-- md_equation-method -->

    
      <div id="method-i-md_inline_math" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">md_inline_math</span><span
            class="method-args">(math)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="md_inline_math-source">
            <pre><span class="ruby-comment"># File lib/maruku/ext/math/elements.rb, line 3</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">md_inline_math</span>(<span class="ruby-identifier">math</span>)
  <span class="ruby-keyword">self</span>.<span class="ruby-identifier">md_el</span>(<span class="ruby-value">:inline_math</span>, [], <span class="ruby-value">:math</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">math</span>)
<span class="ruby-keyword">end</span></pre>
          </div><!-- md_inline_math-source -->
          
        </div>

        

        
      </div><!-- md_inline_math-method -->

    
      <div id="method-i-replace_each_string" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">replace_each_string</span><span
            class="method-args">() { |c| ... }</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Iterates through each <a href="../String.html">String</a> child node of
this element, replacing it with the result of the block. This includes
deeply-nested child nodes.</p>

<p>This destructively modifies this node and its children.</p>

<p>@todo Make this non-destructive</p>
          
          

          
          <div class="method-source-code" id="replace_each_string-source">
            <pre><span class="ruby-comment"># File lib/maruku/element.rb, line 98</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">replace_each_string</span>(<span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>)
  <span class="ruby-ivar">@children</span>.<span class="ruby-identifier">map!</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">c</span><span class="ruby-operator">|</span>
    <span class="ruby-keyword">next</span> <span class="ruby-keyword">yield</span> <span class="ruby-identifier">c</span> <span class="ruby-keyword">unless</span> <span class="ruby-identifier">c</span>.<span class="ruby-identifier">is_a?</span>(<span class="ruby-constant">MDElement</span>)
    <span class="ruby-identifier">c</span>.<span class="ruby-identifier">replace_each_string</span>(<span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>)
    <span class="ruby-identifier">c</span>
  <span class="ruby-keyword">end</span>.<span class="ruby-identifier">flatten!</span>
<span class="ruby-keyword">end</span></pre>
          </div><!-- replace_each_string-source -->
          
        </div>

        

        
      </div><!-- replace_each_string-method -->

    
      <div id="method-i-to_s" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">to_s</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Strips all formatting from the string</p>
          
          

          
          <div class="method-source-code" id="to_s-source">
            <pre><span class="ruby-comment"># File lib/maruku/output/to_s.rb, line 6</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">to_s</span>
  <span class="ruby-identifier">warn</span> <span class="ruby-node">&quot;Maruku#to_s is deprecated and will be removed or changed in a near-future version of Maruku.&quot;</span>
  <span class="ruby-identifier">children_to_s</span>
<span class="ruby-keyword">end</span></pre>
          </div><!-- to_s-source -->
          
        </div>

        

        
      </div><!-- to_s-method -->

    
    </section><!-- public-instance-method-details -->
  
     <section id="private-instance-5Buntitled-5D-method-details" class="method-section section">
      <h3 class="section-header">Private Instance Methods</h3>

    
      <div id="method-i-children_inspect" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">children_inspect</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="children_inspect-source">
            <pre><span class="ruby-comment"># File lib/maruku/inspect_element.rb, line 48</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">children_inspect</span>
  <span class="ruby-identifier">kids</span> = <span class="ruby-ivar">@children</span>.<span class="ruby-identifier">map</span>(<span class="ruby-operator">&amp;</span><span class="ruby-value">:inspect</span>)
  <span class="ruby-keyword">return</span> <span class="ruby-identifier">kids</span>.<span class="ruby-identifier">first</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">kids</span>.<span class="ruby-identifier">size</span> <span class="ruby-operator">==</span> <span class="ruby-value">1</span>

  <span class="ruby-identifier">comma</span> = <span class="ruby-identifier">kids</span>.<span class="ruby-identifier">join</span>(<span class="ruby-string">&quot;, &quot;</span>)
  <span class="ruby-keyword">if</span> <span class="ruby-identifier">comma</span>.<span class="ruby-identifier">size</span> <span class="ruby-operator">&lt;</span> <span class="ruby-value">70</span>
    <span class="ruby-node">&quot;[#{comma}]&quot;</span>
  <span class="ruby-keyword">else</span>
    <span class="ruby-node">&quot;[\n\t#{kids.join(&quot;,\n\t&quot;)}\n]&quot;</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
          </div><!-- children_inspect-source -->
          
        </div>

        

        
      </div><!-- children_inspect-method -->

    
    </section><!-- private-instance-method-details -->
  
  </section><!-- 5Buntitled-5D -->

</div><!-- documentation -->


<footer id="validator-badges">
  <p><a href="http://validator.w3.org/check/referer">[Validate]</a>
  <p>Generated by <a href="https://github.com/rdoc/rdoc">RDoc</a> 4.0.0.
  <p>Generated with the <a href="http://deveiate.org/projects/Darkfish-Rdoc/">Darkfish Rdoc Generator</a> 3.
</footer>

