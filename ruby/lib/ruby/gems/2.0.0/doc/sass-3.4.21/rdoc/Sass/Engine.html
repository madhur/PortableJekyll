<!DOCTYPE html>

<html>
<head>
<meta content="text/html; charset=UTF-8" http-equiv="Content-Type">

<title>class Sass::Engine - sass-3.4.21 Documentation</title>

<link type="text/css" media="screen" href="../rdoc.css" rel="stylesheet">

<script type="text/javascript">
  var rdoc_rel_prefix = "../";
</script>

<script type="text/javascript" charset="utf-8" src="../js/jquery.js"></script>
<script type="text/javascript" charset="utf-8" src="../js/navigation.js"></script>
<script type="text/javascript" charset="utf-8" src="../js/search_index.js"></script>
<script type="text/javascript" charset="utf-8" src="../js/search.js"></script>
<script type="text/javascript" charset="utf-8" src="../js/searcher.js"></script>
<script type="text/javascript" charset="utf-8" src="../js/darkfish.js"></script>


<body id="top" class="class">
<nav id="metadata">
  <nav id="home-section" class="section">
  <h3 class="section-header">
    <a href="../index.html">Home</a>
    <a href="../table_of_contents.html#classes">Classes</a>
    <a href="../table_of_contents.html#methods">Methods</a>
  </h3>
</nav>


  <nav id="search-section" class="section project-section" class="initially-hidden">
  <form action="#" method="get" accept-charset="utf-8">
    <h3 class="section-header">
      <input type="text" name="search" placeholder="Search" id="search-field"
             title="Type to search, Up and Down to navigate, Enter to load">
    </h3>
  </form>

  <ul id="search-results" class="initially-hidden"></ul>
</nav>


  

  <div id="file-metadata">
    <nav id="file-list-section" class="section">
  <h3 class="section-header">Defined In</h3>
  <ul>
    <li>lib/sass/engine.rb
  </ul>
</nav>

    
  </div>

  <div id="class-metadata">
    
    <nav id="parent-class-section" class="section">
  <h3 class="section-header">Parent</h3>
  
  <p class="link">Object
  
</nav>

    
    
    <!-- Method Quickref -->
<nav id="method-list-section" class="section">
  <h3 class="section-header">Methods</h3>

  <ul class="link-list">
    
    <li ><a href="#method-c-for_file">::for_file</a>
    
    <li ><a href="#method-c-new">::new</a>
    
    <li ><a href="#method-c-normalize_options">::normalize_options</a>
    
    <li ><a href="#method-c-parse_interp">::parse_interp</a>
    
    <li ><a href="#method-i-_dependencies">#_dependencies</a>
    
    <li ><a href="#method-i-_render_with_sourcemap">#_render_with_sourcemap</a>
    
    <li ><a href="#method-i-_to_tree">#_to_tree</a>
    
    <li ><a href="#method-i-append_children">#append_children</a>
    
    <li ><a href="#method-i-build_tree">#build_tree</a>
    
    <li ><a href="#method-i-check_encoding-21">#check_encoding!</a>
    
    <li ><a href="#method-i-check_for_no_children">#check_for_no_children</a>
    
    <li ><a href="#method-i-dependencies">#dependencies</a>
    
    <li ><a href="#method-i-format_comment_text">#format_comment_text</a>
    
    <li ><a href="#method-i-full_line_range">#full_line_range</a>
    
    <li ><a href="#method-i-parse_at_root_directive">#parse_at_root_directive</a>
    
    <li ><a href="#method-i-parse_charset_directive">#parse_charset_directive</a>
    
    <li ><a href="#method-i-parse_comment">#parse_comment</a>
    
    <li ><a href="#method-i-parse_content_directive">#parse_content_directive</a>
    
    <li ><a href="#method-i-parse_debug_directive">#parse_debug_directive</a>
    
    <li ><a href="#method-i-parse_directive">#parse_directive</a>
    
    <li ><a href="#method-i-parse_each_directive">#parse_each_directive</a>
    
    <li ><a href="#method-i-parse_else_directive">#parse_else_directive</a>
    
    <li ><a href="#method-i-parse_error_directive">#parse_error_directive</a>
    
    <li ><a href="#method-i-parse_extend_directive">#parse_extend_directive</a>
    
    <li ><a href="#method-i-parse_for_directive">#parse_for_directive</a>
    
    <li ><a href="#method-i-parse_function_directive">#parse_function_directive</a>
    
    <li ><a href="#method-i-parse_if_directive">#parse_if_directive</a>
    
    <li ><a href="#method-i-parse_import_arg">#parse_import_arg</a>
    
    <li ><a href="#method-i-parse_import_directive">#parse_import_directive</a>
    
    <li ><a href="#method-i-parse_include_directive">#parse_include_directive</a>
    
    <li ><a href="#method-i-parse_interp">#parse_interp</a>
    
    <li ><a href="#method-i-parse_line">#parse_line</a>
    
    <li ><a href="#method-i-parse_media_directive">#parse_media_directive</a>
    
    <li ><a href="#method-i-parse_mixin_definition">#parse_mixin_definition</a>
    
    <li ><a href="#method-i-parse_mixin_directive">#parse_mixin_directive</a>
    
    <li ><a href="#method-i-parse_mixin_include">#parse_mixin_include</a>
    
    <li ><a href="#method-i-parse_property">#parse_property</a>
    
    <li ><a href="#method-i-parse_property_or_rule">#parse_property_or_rule</a>
    
    <li ><a href="#method-i-parse_return_directive">#parse_return_directive</a>
    
    <li ><a href="#method-i-parse_script">#parse_script</a>
    
    <li ><a href="#method-i-parse_variable">#parse_variable</a>
    
    <li ><a href="#method-i-parse_warn_directive">#parse_warn_directive</a>
    
    <li ><a href="#method-i-parse_while_directive">#parse_while_directive</a>
    
    <li ><a href="#method-i-render">#render</a>
    
    <li ><a href="#method-i-render_with_sourcemap">#render_with_sourcemap</a>
    
    <li ><a href="#method-i-sassc_key">#sassc_key</a>
    
    <li ><a href="#method-i-source_encoding">#source_encoding</a>
    
    <li ><a href="#method-i-tabulate">#tabulate</a>
    
    <li ><a href="#method-i-to_css">#to_css</a>
    
    <li ><a href="#method-i-to_parser_offset">#to_parser_offset</a>
    
    <li ><a href="#method-i-to_tree">#to_tree</a>
    
    <li ><a href="#method-i-tree">#tree</a>
    
    <li ><a href="#method-i-try_comment">#try_comment</a>
    
    <li ><a href="#method-i-validate_and_append_child">#validate_and_append_child</a>
    
  </ul>
</nav>

  </div>

  <div id="project-metadata">
    
    <nav id="classindex-section" class="section project-section">
  <h3 class="section-header">Class and Module Index</h3>

  <ul class="link-list">
  
    <li><a href="../ActionController.html">ActionController</a>
  
    <li><a href="../ActionController/Base.html">ActionController::Base</a>
  
    <li><a href="../Merb.html">Merb</a>
  
    <li><a href="../Merb/BootLoader.html">Merb::BootLoader</a>
  
    <li><a href="../OrderedHash.html">OrderedHash</a>
  
    <li><a href="../Sass.html">Sass</a>
  
    <li><a href="../Sass/BaseEnvironment.html">Sass::BaseEnvironment</a>
  
    <li><a href="../Sass/CSS.html">Sass::CSS</a>
  
    <li><a href="../Sass/CacheStores.html">Sass::CacheStores</a>
  
    <li><a href="../Sass/CacheStores/Base.html">Sass::CacheStores::Base</a>
  
    <li><a href="../Sass/CacheStores/Chain.html">Sass::CacheStores::Chain</a>
  
    <li><a href="../Sass/CacheStores/Filesystem.html">Sass::CacheStores::Filesystem</a>
  
    <li><a href="../Sass/CacheStores/Memory.html">Sass::CacheStores::Memory</a>
  
    <li><a href="../Sass/CacheStores/Null.html">Sass::CacheStores::Null</a>
  
    <li><a href="../Sass/Callbacks.html">Sass::Callbacks</a>
  
    <li><a href="../Sass/Callbacks/InstanceMethods.html">Sass::Callbacks::InstanceMethods</a>
  
    <li><a href="../Sass/Engine.html">Sass::Engine</a>
  
    <li><a href="../Sass/Engine/Line.html">Sass::Engine::Line</a>
  
    <li><a href="../Sass/Environment.html">Sass::Environment</a>
  
    <li><a href="../Sass/Exec.html">Sass::Exec</a>
  
    <li><a href="../Sass/Exec/Base.html">Sass::Exec::Base</a>
  
    <li><a href="../Sass/Exec/SassConvert.html">Sass::Exec::SassConvert</a>
  
    <li><a href="../Sass/Exec/SassScss.html">Sass::Exec::SassScss</a>
  
    <li><a href="../Sass/Exec/SassScss/Sass/Plugin.compiler.html">Sass::Exec::SassScss::Sass::Plugin.compiler</a>
  
    <li><a href="../Sass/Features.html">Sass::Features</a>
  
    <li><a href="../Sass/Importers.html">Sass::Importers</a>
  
    <li><a href="../Sass/Importers/Base.html">Sass::Importers::Base</a>
  
    <li><a href="../Sass/Importers/DeprecatedPath.html">Sass::Importers::DeprecatedPath</a>
  
    <li><a href="../Sass/Importers/Filesystem.html">Sass::Importers::Filesystem</a>
  
    <li><a href="../Sass/Logger.html">Sass::Logger</a>
  
    <li><a href="../Sass/Logger/Base.html">Sass::Logger::Base</a>
  
    <li><a href="../Sass/Logger/LogLevel.html">Sass::Logger::LogLevel</a>
  
    <li><a href="../Sass/Logger/LogLevel/ClassMethods.html">Sass::Logger::LogLevel::ClassMethods</a>
  
    <li><a href="../Sass/Media.html">Sass::Media</a>
  
    <li><a href="../Sass/Media/Query.html">Sass::Media::Query</a>
  
    <li><a href="../Sass/Media/QueryList.html">Sass::Media::QueryList</a>
  
    <li><a href="../Sass/Plugin.html">Sass::Plugin</a>
  
    <li><a href="../Sass/Plugin/Compiler.html">Sass::Plugin::Compiler</a>
  
    <li><a href="../Sass/Plugin/Configuration.html">Sass::Plugin::Configuration</a>
  
    <li><a href="../Sass/Plugin/MerbBootLoader.html">Sass::Plugin::MerbBootLoader</a>
  
    <li><a href="../Sass/Plugin/Rack.html">Sass::Plugin::Rack</a>
  
    <li><a href="../Sass/Plugin/StalenessChecker.html">Sass::Plugin::StalenessChecker</a>
  
    <li><a href="../Sass/ReadOnlyEnvironment.html">Sass::ReadOnlyEnvironment</a>
  
    <li><a href="../Sass/Repl.html">Sass::Repl</a>
  
    <li><a href="../Sass/SCSS.html">Sass::SCSS</a>
  
    <li><a href="../Sass/SCSS/CssParser.html">Sass::SCSS::CssParser</a>
  
    <li><a href="../Sass/SCSS/Parser.html">Sass::SCSS::Parser</a>
  
    <li><a href="../Sass/SCSS/RX.html">Sass::SCSS::RX</a>
  
    <li><a href="../Sass/SCSS/ScriptLexer.html">Sass::SCSS::ScriptLexer</a>
  
    <li><a href="../Sass/SCSS/ScriptParser.html">Sass::SCSS::ScriptParser</a>
  
    <li><a href="../Sass/SCSS/StaticParser.html">Sass::SCSS::StaticParser</a>
  
    <li><a href="../Sass/Script.html">Sass::Script</a>
  
    <li><a href="../Sass/Script/CssLexer.html">Sass::Script::CssLexer</a>
  
    <li><a href="../Sass/Script/CssParser.html">Sass::Script::CssParser</a>
  
    <li><a href="../Sass/Script/Functions.html">Sass::Script::Functions</a>
  
    <li><a href="../Sass/Script/Functions/EvaluationContext.html">Sass::Script::Functions::EvaluationContext</a>
  
    <li><a href="../Sass/Script/Lexer.html">Sass::Script::Lexer</a>
  
    <li><a href="../Sass/Script/Parser.html">Sass::Script::Parser</a>
  
    <li><a href="../Sass/Script/Tree.html">Sass::Script::Tree</a>
  
    <li><a href="../Sass/Script/Tree/Funcall.html">Sass::Script::Tree::Funcall</a>
  
    <li><a href="../Sass/Script/Tree/Interpolation.html">Sass::Script::Tree::Interpolation</a>
  
    <li><a href="../Sass/Script/Tree/ListLiteral.html">Sass::Script::Tree::ListLiteral</a>
  
    <li><a href="../Sass/Script/Tree/Literal.html">Sass::Script::Tree::Literal</a>
  
    <li><a href="../Sass/Script/Tree/MapLiteral.html">Sass::Script::Tree::MapLiteral</a>
  
    <li><a href="../Sass/Script/Tree/Node.html">Sass::Script::Tree::Node</a>
  
    <li><a href="../Sass/Script/Tree/Operation.html">Sass::Script::Tree::Operation</a>
  
    <li><a href="../Sass/Script/Tree/Selector.html">Sass::Script::Tree::Selector</a>
  
    <li><a href="../Sass/Script/Tree/StringInterpolation.html">Sass::Script::Tree::StringInterpolation</a>
  
    <li><a href="../Sass/Script/Tree/UnaryOperation.html">Sass::Script::Tree::UnaryOperation</a>
  
    <li><a href="../Sass/Script/Tree/Variable.html">Sass::Script::Tree::Variable</a>
  
    <li><a href="../Sass/Script/Value.html">Sass::Script::Value</a>
  
    <li><a href="../Sass/Script/Value/ArgList.html">Sass::Script::Value::ArgList</a>
  
    <li><a href="../Sass/Script/Value/Base.html">Sass::Script::Value::Base</a>
  
    <li><a href="../Sass/Script/Value/Bool.html">Sass::Script::Value::Bool</a>
  
    <li><a href="../Sass/Script/Value/Color.html">Sass::Script::Value::Color</a>
  
    <li><a href="../Sass/Script/Value/Helpers.html">Sass::Script::Value::Helpers</a>
  
    <li><a href="../Sass/Script/Value/List.html">Sass::Script::Value::List</a>
  
    <li><a href="../Sass/Script/Value/Map.html">Sass::Script::Value::Map</a>
  
    <li><a href="../Sass/Script/Value/Null.html">Sass::Script::Value::Null</a>
  
    <li><a href="../Sass/Script/Value/Number.html">Sass::Script::Value::Number</a>
  
    <li><a href="../Sass/Script/Value/Number/Math.html">Sass::Script::Value::Number::Math</a>
  
    <li><a href="../Sass/Script/Value/String.html">Sass::Script::Value::String</a>
  
    <li><a href="../Sass/Selector.html">Sass::Selector</a>
  
    <li><a href="../Sass/Selector/AbstractSequence.html">Sass::Selector::AbstractSequence</a>
  
    <li><a href="../Sass/Selector/Attribute.html">Sass::Selector::Attribute</a>
  
    <li><a href="../Sass/Selector/Class.html">Sass::Selector::Class</a>
  
    <li><a href="../Sass/Selector/CommaSequence.html">Sass::Selector::CommaSequence</a>
  
    <li><a href="../Sass/Selector/Element.html">Sass::Selector::Element</a>
  
    <li><a href="../Sass/Selector/Id.html">Sass::Selector::Id</a>
  
    <li><a href="../Sass/Selector/Parent.html">Sass::Selector::Parent</a>
  
    <li><a href="../Sass/Selector/Placeholder.html">Sass::Selector::Placeholder</a>
  
    <li><a href="../Sass/Selector/Pseudo.html">Sass::Selector::Pseudo</a>
  
    <li><a href="../Sass/Selector/Sequence.html">Sass::Selector::Sequence</a>
  
    <li><a href="../Sass/Selector/Simple.html">Sass::Selector::Simple</a>
  
    <li><a href="../Sass/Selector/SimpleSequence.html">Sass::Selector::SimpleSequence</a>
  
    <li><a href="../Sass/Selector/Universal.html">Sass::Selector::Universal</a>
  
    <li><a href="../Sass/SemiGlobalEnvironment.html">Sass::SemiGlobalEnvironment</a>
  
    <li><a href="../Sass/Shared.html">Sass::Shared</a>
  
    <li><a href="../Sass/Source.html">Sass::Source</a>
  
    <li><a href="../Sass/Source/Map.html">Sass::Source::Map</a>
  
    <li><a href="../Sass/Source/Map/Mapping.html">Sass::Source::Map::Mapping</a>
  
    <li><a href="../Sass/Source/Position.html">Sass::Source::Position</a>
  
    <li><a href="../Sass/Source/Range.html">Sass::Source::Range</a>
  
    <li><a href="../Sass/Stack.html">Sass::Stack</a>
  
    <li><a href="../Sass/Stack/Frame.html">Sass::Stack::Frame</a>
  
    <li><a href="../Sass/Supports.html">Sass::Supports</a>
  
    <li><a href="../Sass/Supports/Condition.html">Sass::Supports::Condition</a>
  
    <li><a href="../Sass/Supports/Declaration.html">Sass::Supports::Declaration</a>
  
    <li><a href="../Sass/Supports/Interpolation.html">Sass::Supports::Interpolation</a>
  
    <li><a href="../Sass/Supports/Negation.html">Sass::Supports::Negation</a>
  
    <li><a href="../Sass/Supports/Operator.html">Sass::Supports::Operator</a>
  
    <li><a href="../Sass/SyntaxError.html">Sass::SyntaxError</a>
  
    <li><a href="../Sass/Tree.html">Sass::Tree</a>
  
    <li><a href="../Sass/Tree/AtRootNode.html">Sass::Tree::AtRootNode</a>
  
    <li><a href="../Sass/Tree/CharsetNode.html">Sass::Tree::CharsetNode</a>
  
    <li><a href="../Sass/Tree/CommentNode.html">Sass::Tree::CommentNode</a>
  
    <li><a href="../Sass/Tree/ContentNode.html">Sass::Tree::ContentNode</a>
  
    <li><a href="../Sass/Tree/CssImportNode.html">Sass::Tree::CssImportNode</a>
  
    <li><a href="../Sass/Tree/DebugNode.html">Sass::Tree::DebugNode</a>
  
    <li><a href="../Sass/Tree/DirectiveNode.html">Sass::Tree::DirectiveNode</a>
  
    <li><a href="../Sass/Tree/EachNode.html">Sass::Tree::EachNode</a>
  
    <li><a href="../Sass/Tree/ErrorNode.html">Sass::Tree::ErrorNode</a>
  
    <li><a href="../Sass/Tree/ExtendNode.html">Sass::Tree::ExtendNode</a>
  
    <li><a href="../Sass/Tree/ForNode.html">Sass::Tree::ForNode</a>
  
    <li><a href="../Sass/Tree/FunctionNode.html">Sass::Tree::FunctionNode</a>
  
    <li><a href="../Sass/Tree/IfNode.html">Sass::Tree::IfNode</a>
  
    <li><a href="../Sass/Tree/ImportNode.html">Sass::Tree::ImportNode</a>
  
    <li><a href="../Sass/Tree/KeyframeRuleNode.html">Sass::Tree::KeyframeRuleNode</a>
  
    <li><a href="../Sass/Tree/MediaNode.html">Sass::Tree::MediaNode</a>
  
    <li><a href="../Sass/Tree/MixinDefNode.html">Sass::Tree::MixinDefNode</a>
  
    <li><a href="../Sass/Tree/MixinNode.html">Sass::Tree::MixinNode</a>
  
    <li><a href="../Sass/Tree/Node.html">Sass::Tree::Node</a>
  
    <li><a href="../Sass/Tree/PropNode.html">Sass::Tree::PropNode</a>
  
    <li><a href="../Sass/Tree/ReturnNode.html">Sass::Tree::ReturnNode</a>
  
    <li><a href="../Sass/Tree/RootNode.html">Sass::Tree::RootNode</a>
  
    <li><a href="../Sass/Tree/RuleNode.html">Sass::Tree::RuleNode</a>
  
    <li><a href="../Sass/Tree/SupportsNode.html">Sass::Tree::SupportsNode</a>
  
    <li><a href="../Sass/Tree/TraceNode.html">Sass::Tree::TraceNode</a>
  
    <li><a href="../Sass/Tree/VariableNode.html">Sass::Tree::VariableNode</a>
  
    <li><a href="../Sass/Tree/Visitors.html">Sass::Tree::Visitors</a>
  
    <li><a href="../Sass/Tree/Visitors/Base.html">Sass::Tree::Visitors::Base</a>
  
    <li><a href="../Sass/Tree/Visitors/CheckNesting.html">Sass::Tree::Visitors::CheckNesting</a>
  
    <li><a href="../Sass/Tree/Visitors/Convert.html">Sass::Tree::Visitors::Convert</a>
  
    <li><a href="../Sass/Tree/Visitors/Cssize.html">Sass::Tree::Visitors::Cssize</a>
  
    <li><a href="../Sass/Tree/Visitors/Cssize/Bubble.html">Sass::Tree::Visitors::Cssize::Bubble</a>
  
    <li><a href="../Sass/Tree/Visitors/DeepCopy.html">Sass::Tree::Visitors::DeepCopy</a>
  
    <li><a href="../Sass/Tree/Visitors/Extend.html">Sass::Tree::Visitors::Extend</a>
  
    <li><a href="../Sass/Tree/Visitors/Perform.html">Sass::Tree::Visitors::Perform</a>
  
    <li><a href="../Sass/Tree/Visitors/SetOptions.html">Sass::Tree::Visitors::SetOptions</a>
  
    <li><a href="../Sass/Tree/Visitors/ToCss.html">Sass::Tree::Visitors::ToCss</a>
  
    <li><a href="../Sass/Tree/WarnNode.html">Sass::Tree::WarnNode</a>
  
    <li><a href="../Sass/Tree/WhileNode.html">Sass::Tree::WhileNode</a>
  
    <li><a href="../Sass/UnitConversionError.html">Sass::UnitConversionError</a>
  
    <li><a href="../Sass/Util.html">Sass::Util</a>
  
    <li><a href="../Sass/Util/CrossPlatformRandom.html">Sass::Util::CrossPlatformRandom</a>
  
    <li><a href="../Sass/Util/MultibyteStringScanner.html">Sass::Util::MultibyteStringScanner</a>
  
    <li><a href="../Sass/Util/NormalizedMap.html">Sass::Util::NormalizedMap</a>
  
    <li><a href="../Sass/Util/StaticConditionalContext.html">Sass::Util::StaticConditionalContext</a>
  
    <li><a href="../Sass/Util/SubsetMap.html">Sass::Util::SubsetMap</a>
  
    <li><a href="../Sass/Util/Test.html">Sass::Util::Test</a>
  
    <li><a href="../Sass/Version.html">Sass::Version</a>
  
  </ul>
</nav>

  </div>
</nav>

<div id="documentation">
  <h1 class="class">class Sass::Engine</h1>

  <div id="description" class="description">
    
<p>This class handles the parsing and compilation of the <a
href="../Sass.html">Sass</a> template. Example usage:</p>

<pre>template = File.read(&#39;stylesheets/sassy.sass&#39;)
sass_engine = Sass::Engine.new(template)
output = sass_engine.render
puts output</pre>

  </div><!-- description -->

  
  
  
  <section id="5Buntitled-5D" class="documentation-section">
    

    

    
    <!-- Constants -->
    <section id="constants-list" class="section">
      <h3 class="section-header">Constants</h3>
      <dl>
      
        <dt id="COMMENT_CHAR">COMMENT_CHAR
        
        <dd class="description"><p>The character that designates the beginning of a comment, either <a
href="../Sass.html">Sass</a> or <a href="CSS.html">CSS</a>.</p>
        
      
        <dt id="CONTENT_RE">CONTENT_RE
        
        <dd class="description">
        
      
        <dt id="CSS_COMMENT_CHAR">CSS_COMMENT_CHAR
        
        <dd class="description"><p>The character that follows the general <a
href="Engine.html#COMMENT_CHAR">COMMENT_CHAR</a> and designates a <a
href="CSS.html">CSS</a> comment, which is embedded in the <a
href="CSS.html">CSS</a> document.</p>
        
      
        <dt id="DEFAULT_OPTIONS">DEFAULT_OPTIONS
        
        <dd class="description"><p>The default options for <a href="Engine.html">Sass::Engine</a>. @api public</p>
        
      
        <dt id="DIRECTIVES">DIRECTIVES
        
        <dd class="description">
        
      
        <dt id="DIRECTIVE_CHAR">DIRECTIVE_CHAR
        
        <dd class="description"><p>The character used to denote a compiler directive.</p>
        
      
        <dt id="ESCAPE_CHAR">ESCAPE_CHAR
        
        <dd class="description"><p>Designates a non-parsed rule.</p>
        
      
        <dt id="FUNCTION_RE">FUNCTION_RE
        
        <dd class="description">
        
      
        <dt id="MIXIN_DEFINITION_CHAR">MIXIN_DEFINITION_CHAR
        
        <dd class="description"><p>Designates block as mixin definition rather than <a href="CSS.html">CSS</a>
rules to output</p>
        
      
        <dt id="MIXIN_DEF_RE">MIXIN_DEF_RE
        
        <dd class="description">
        
      
        <dt id="MIXIN_INCLUDE_CHAR">MIXIN_INCLUDE_CHAR
        
        <dd class="description"><p>Includes named mixin declared using <a
href="Engine.html#MIXIN_DEFINITION_CHAR">MIXIN_DEFINITION_CHAR</a></p>
        
      
        <dt id="MIXIN_INCLUDE_RE">MIXIN_INCLUDE_RE
        
        <dd class="description">
        
      
        <dt id="PROPERTY_CHAR">PROPERTY_CHAR
        
        <dd class="description"><p>The character that begins a <a href="CSS.html">CSS</a> property.</p>
        
      
        <dt id="PROPERTY_OLD">PROPERTY_OLD
        
        <dd class="description"><p>The regex that matches and extracts data from properties of the form `:name
prop`.</p>
        
      
        <dt id="SASS_COMMENT_CHAR">SASS_COMMENT_CHAR
        
        <dd class="description"><p>The character that follows the general <a
href="Engine.html#COMMENT_CHAR">COMMENT_CHAR</a> and designates a <a
href="../Sass.html">Sass</a> comment, which is not output as a <a
href="CSS.html">CSS</a> comment.</p>
        
      
        <dt id="SASS_LOUD_COMMENT_CHAR">SASS_LOUD_COMMENT_CHAR
        
        <dd class="description"><p>The character that indicates that a comment allows interpolation and should
be preserved even in `:compressed` mode.</p>
        
      
      </dl>
    </section>
    

    
    <!-- Attributes -->
    <section id="attribute-method-details" class="method-section section">
      <h3 class="section-header">Attributes</h3>

      
      <div id="attribute-i-options" class="method-detail">
        <div class="method-heading attribute-method-heading">
          <span class="method-name">options</span><span
            class="attribute-access-type">[R]</span>
        </div>

        <div class="method-description">
        
        <p>The options for the <a href="../Sass.html">Sass</a> engine. See
{file:SASS_REFERENCE.md#sass_options the <a href="../Sass.html">Sass</a>
options documentation}.</p>

<p>@return [{Symbol =&gt; Object}]</p>
        
        </div>
      </div>
      
    </section><!-- attribute-method-details -->
    

    <!-- Methods -->
    
     <section id="public-class-5Buntitled-5D-method-details" class="method-section section">
      <h3 class="section-header">Public Class Methods</h3>

    
      <div id="method-c-for_file" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">for_file</span><span
            class="method-args">(filename, options)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Returns the {Sass::Engine} for the given file. This is preferable to <a
href="Engine.html#method-c-new">::new</a> when reading from a file because
it properly sets up the Engine&#39;s metadata, enables parse-tree caching,
and infers the syntax from the filename.</p>

<p>@param filename [String] The path to the <a href="../Sass.html">Sass</a> or
<a href="SCSS.html">SCSS</a> file @param options [{Symbol =&gt; Object}]
The options hash;</p>

<pre>See {file:SASS_REFERENCE.md#sass_options the Sass options documentation}.</pre>

<p>@return [Sass::Engine] The <a href="Engine.html">Engine</a> for the given
<a href="../Sass.html">Sass</a> or <a href="SCSS.html">SCSS</a> file.
@raise [Sass::SyntaxError] if there&#39;s an error in the document.</p>
          
          

          
          <div class="method-source-code" id="for_file-source">
            <pre><span class="ruby-comment"># File lib/sass/engine.rb, line 228</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier">for_file</span>(<span class="ruby-identifier">filename</span>, <span class="ruby-identifier">options</span>)
  <span class="ruby-identifier">had_syntax</span> = <span class="ruby-identifier">options</span>[<span class="ruby-value">:syntax</span>]

  <span class="ruby-keyword">if</span> <span class="ruby-identifier">had_syntax</span>
    <span class="ruby-comment"># Use what was explicitly specified</span>
  <span class="ruby-keyword">elsif</span> <span class="ruby-identifier">filename</span> <span class="ruby-operator">=~</span> <span class="ruby-regexp">/\.scss$/</span>
    <span class="ruby-identifier">options</span>.<span class="ruby-identifier">merge!</span>(<span class="ruby-value">:syntax</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value">:scss</span>)
  <span class="ruby-keyword">elsif</span> <span class="ruby-identifier">filename</span> <span class="ruby-operator">=~</span> <span class="ruby-regexp">/\.sass$/</span>
    <span class="ruby-identifier">options</span>.<span class="ruby-identifier">merge!</span>(<span class="ruby-value">:syntax</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value">:sass</span>)
  <span class="ruby-keyword">end</span>

  <span class="ruby-constant">Sass</span><span class="ruby-operator">::</span><span class="ruby-constant">Engine</span>.<span class="ruby-identifier">new</span>(<span class="ruby-constant">File</span>.<span class="ruby-identifier">read</span>(<span class="ruby-identifier">filename</span>), <span class="ruby-identifier">options</span>.<span class="ruby-identifier">merge</span>(<span class="ruby-value">:filename</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">filename</span>))
<span class="ruby-keyword">end</span></pre>
          </div><!-- for_file-source -->
          
        </div>

        

        
      </div><!-- for_file-method -->

    
      <div id="method-c-new" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">new</span><span
            class="method-args">(template, options = {})</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Creates a new <a href="Engine.html">Engine</a>. Note that <a
href="Engine.html">Engine</a> should only be used directly when compiling
in-memory <a href="../Sass.html">Sass</a> code. If you&#39;re compiling a
single <a href="../Sass.html">Sass</a> file from the filesystem, use
{Sass::Engine.for_file}. If you&#39;re compiling multiple files from the
filesystem, use {Sass::Plugin}.</p>

<p>@param template [String] The <a href="../Sass.html">Sass</a> template.</p>

<pre>This template can be encoded using any encoding
that can be converted to Unicode.
If the template contains an `@charset` declaration,
that overrides the Ruby encoding
(see {file:SASS_REFERENCE.md#encodings the encoding documentation})</pre>

<p>@param options [{Symbol =&gt; Object}] An options hash.</p>

<pre>See {file:SASS_REFERENCE.md#sass_options the Sass options documentation}.</pre>

<p>@see {Sass::Engine.for_file} @see {Sass::Plugin}</p>
          
          

          
          <div class="method-source-code" id="new-source">
            <pre><span class="ruby-comment"># File lib/sass/engine.rb, line 265</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">initialize</span>(<span class="ruby-identifier">template</span>, <span class="ruby-identifier">options</span> = {})
  <span class="ruby-ivar">@options</span> = <span class="ruby-keyword">self</span>.<span class="ruby-identifier">class</span>.<span class="ruby-identifier">normalize_options</span>(<span class="ruby-identifier">options</span>)
  <span class="ruby-ivar">@template</span> = <span class="ruby-identifier">template</span>
<span class="ruby-keyword">end</span></pre>
          </div><!-- new-source -->
          
        </div>

        

        
      </div><!-- new-method -->

    
      <div id="method-c-normalize_options" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">normalize_options</span><span
            class="method-args">(options)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Converts a <a href="../Sass.html">Sass</a> options hash into a standard
form, filling in default values and resolving aliases.</p>

<p>@param options [{Symbol =&gt; Object}] The options hash;</p>

<pre>see {file:SASS_REFERENCE.md#sass_options the Sass options documentation}</pre>

<p>@return [{Symbol =&gt; Object}] The normalized options hash. @private</p>
          
          

          
          <div class="method-source-code" id="normalize_options-source">
            <pre><span class="ruby-comment"># File lib/sass/engine.rb, line 174</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier">normalize_options</span>(<span class="ruby-identifier">options</span>)
  <span class="ruby-identifier">options</span> = <span class="ruby-constant">DEFAULT_OPTIONS</span>.<span class="ruby-identifier">merge</span>(<span class="ruby-identifier">options</span>.<span class="ruby-identifier">reject</span> {<span class="ruby-operator">|</span><span class="ruby-identifier">_k</span>, <span class="ruby-identifier">v</span><span class="ruby-operator">|</span> <span class="ruby-identifier">v</span>.<span class="ruby-identifier">nil?</span>})

  <span class="ruby-comment"># If the `:filename` option is passed in without an importer,</span>
  <span class="ruby-comment"># assume it&#39;s using the default filesystem importer.</span>
  <span class="ruby-identifier">options</span>[<span class="ruby-value">:importer</span>] <span class="ruby-operator">||=</span> <span class="ruby-identifier">options</span>[<span class="ruby-value">:filesystem_importer</span>].<span class="ruby-identifier">new</span>(<span class="ruby-string">&quot;.&quot;</span>) <span class="ruby-keyword">if</span> <span class="ruby-identifier">options</span>[<span class="ruby-value">:filename</span>]

  <span class="ruby-comment"># Tracks the original filename of the top-level Sass file</span>
  <span class="ruby-identifier">options</span>[<span class="ruby-value">:original_filename</span>] <span class="ruby-operator">||=</span> <span class="ruby-identifier">options</span>[<span class="ruby-value">:filename</span>]

  <span class="ruby-identifier">options</span>[<span class="ruby-value">:cache_store</span>] <span class="ruby-operator">||=</span> <span class="ruby-constant">Sass</span><span class="ruby-operator">::</span><span class="ruby-constant">CacheStores</span><span class="ruby-operator">::</span><span class="ruby-constant">Chain</span>.<span class="ruby-identifier">new</span>(
    <span class="ruby-constant">Sass</span><span class="ruby-operator">::</span><span class="ruby-constant">CacheStores</span><span class="ruby-operator">::</span><span class="ruby-constant">Memory</span>.<span class="ruby-identifier">new</span>, <span class="ruby-constant">Sass</span><span class="ruby-operator">::</span><span class="ruby-constant">CacheStores</span><span class="ruby-operator">::</span><span class="ruby-constant">Filesystem</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">options</span>[<span class="ruby-value">:cache_location</span>]))
  <span class="ruby-comment"># Support both, because the docs said one and the other actually worked</span>
  <span class="ruby-comment"># for quite a long time.</span>
  <span class="ruby-identifier">options</span>[<span class="ruby-value">:line_comments</span>] <span class="ruby-operator">||=</span> <span class="ruby-identifier">options</span>[<span class="ruby-value">:line_numbers</span>]

  <span class="ruby-identifier">options</span>[<span class="ruby-value">:load_paths</span>] = (<span class="ruby-identifier">options</span>[<span class="ruby-value">:load_paths</span>] <span class="ruby-operator">+</span> <span class="ruby-constant">Sass</span>.<span class="ruby-identifier">load_paths</span>).<span class="ruby-identifier">map</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">p</span><span class="ruby-operator">|</span>
    <span class="ruby-keyword">next</span> <span class="ruby-identifier">p</span> <span class="ruby-keyword">unless</span> <span class="ruby-identifier">p</span>.<span class="ruby-identifier">is_a?</span>(<span class="ruby-constant">String</span>) <span class="ruby-operator">||</span> (<span class="ruby-keyword">defined?</span>(<span class="ruby-constant">Pathname</span>) <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">p</span>.<span class="ruby-identifier">is_a?</span>(<span class="ruby-constant">Pathname</span>))
    <span class="ruby-identifier">options</span>[<span class="ruby-value">:filesystem_importer</span>].<span class="ruby-identifier">new</span>(<span class="ruby-identifier">p</span>.<span class="ruby-identifier">to_s</span>)
  <span class="ruby-keyword">end</span>

  <span class="ruby-comment"># Remove any deprecated importers if the location is imported explicitly</span>
  <span class="ruby-identifier">options</span>[<span class="ruby-value">:load_paths</span>].<span class="ruby-identifier">reject!</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">importer</span><span class="ruby-operator">|</span>
    <span class="ruby-identifier">importer</span>.<span class="ruby-identifier">is_a?</span>(<span class="ruby-constant">Sass</span><span class="ruby-operator">::</span><span class="ruby-constant">Importers</span><span class="ruby-operator">::</span><span class="ruby-constant">DeprecatedPath</span>) <span class="ruby-operator">&amp;&amp;</span>
      <span class="ruby-identifier">options</span>[<span class="ruby-value">:load_paths</span>].<span class="ruby-identifier">find</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">other_importer</span><span class="ruby-operator">|</span>
        <span class="ruby-identifier">other_importer</span>.<span class="ruby-identifier">is_a?</span>(<span class="ruby-constant">Sass</span><span class="ruby-operator">::</span><span class="ruby-constant">Importers</span><span class="ruby-operator">::</span><span class="ruby-constant">Filesystem</span>) <span class="ruby-operator">&amp;&amp;</span>
          <span class="ruby-identifier">other_importer</span> <span class="ruby-operator">!=</span> <span class="ruby-identifier">importer</span> <span class="ruby-operator">&amp;&amp;</span>
          <span class="ruby-identifier">other_importer</span>.<span class="ruby-identifier">root</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">importer</span>.<span class="ruby-identifier">root</span>
      <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>

  <span class="ruby-comment"># Backwards compatibility</span>
  <span class="ruby-identifier">options</span>[<span class="ruby-value">:property_syntax</span>] <span class="ruby-operator">||=</span> <span class="ruby-identifier">options</span>[<span class="ruby-value">:attribute_syntax</span>]
  <span class="ruby-keyword">case</span> <span class="ruby-identifier">options</span>[<span class="ruby-value">:property_syntax</span>]
  <span class="ruby-keyword">when</span> <span class="ruby-value">:alternate</span>; <span class="ruby-identifier">options</span>[<span class="ruby-value">:property_syntax</span>] = <span class="ruby-value">:new</span>
  <span class="ruby-keyword">when</span> <span class="ruby-value">:normal</span>; <span class="ruby-identifier">options</span>[<span class="ruby-value">:property_syntax</span>] = <span class="ruby-value">:old</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-identifier">options</span>[<span class="ruby-value">:sourcemap</span>] = <span class="ruby-value">:auto</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">options</span>[<span class="ruby-value">:sourcemap</span>] <span class="ruby-operator">==</span> <span class="ruby-keyword">true</span>
  <span class="ruby-identifier">options</span>[<span class="ruby-value">:sourcemap</span>] = <span class="ruby-value">:none</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">options</span>[<span class="ruby-value">:sourcemap</span>] <span class="ruby-operator">==</span> <span class="ruby-keyword">false</span>

  <span class="ruby-identifier">options</span>
<span class="ruby-keyword">end</span></pre>
          </div><!-- normalize_options-source -->
          
        </div>

        

        
      </div><!-- normalize_options-method -->

    
    </section><!-- public-class-method-details -->
  
     <section id="private-class-5Buntitled-5D-method-details" class="method-section section">
      <h3 class="section-header">Private Class Methods</h3>

    
      <div id="method-c-parse_interp" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">parse_interp</span><span
            class="method-args">(text, line, offset, options)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>It&#39;s important that this have strings (at least) at the beginning, the
end, and between each <a
href="Script/Tree/Node.html">Script::Tree::Node</a>.</p>

<p>@private</p>
          
          

          
          <div class="method-source-code" id="parse_interp-source">
            <pre><span class="ruby-comment"># File lib/sass/engine.rb, line 1189</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier">parse_interp</span>(<span class="ruby-identifier">text</span>, <span class="ruby-identifier">line</span>, <span class="ruby-identifier">offset</span>, <span class="ruby-identifier">options</span>)
  <span class="ruby-identifier">res</span> = []
  <span class="ruby-identifier">rest</span> = <span class="ruby-constant">Sass</span><span class="ruby-operator">::</span><span class="ruby-constant">Shared</span>.<span class="ruby-identifier">handle_interpolation</span> <span class="ruby-identifier">text</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">scan</span><span class="ruby-operator">|</span>
    <span class="ruby-identifier">escapes</span> = <span class="ruby-identifier">scan</span>[<span class="ruby-value">2</span>].<span class="ruby-identifier">size</span>
    <span class="ruby-identifier">res</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">scan</span>.<span class="ruby-identifier">matched</span>[<span class="ruby-value">0</span><span class="ruby-operator">...</span><span class="ruby-value">-2</span> <span class="ruby-operator">-</span> <span class="ruby-identifier">escapes</span>]
    <span class="ruby-keyword">if</span> <span class="ruby-identifier">escapes</span>.<span class="ruby-identifier">odd?</span>
      <span class="ruby-identifier">res</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-string">&quot;\\&quot;</span> <span class="ruby-operator">*</span> (<span class="ruby-identifier">escapes</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>) <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-string">&#39;#{&#39;</span>
    <span class="ruby-keyword">else</span>
      <span class="ruby-identifier">res</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-string">&quot;\\&quot;</span> <span class="ruby-operator">*</span> [<span class="ruby-value">0</span>, <span class="ruby-identifier">escapes</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>].<span class="ruby-identifier">max</span>
      <span class="ruby-keyword">if</span> <span class="ruby-identifier">scan</span>[<span class="ruby-value">1</span>].<span class="ruby-identifier">include?</span>(<span class="ruby-string">&quot;\n&quot;</span>)
        <span class="ruby-identifier">line</span> = <span class="ruby-identifier">line</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">scan</span>[<span class="ruby-value">1</span>].<span class="ruby-identifier">count</span>(<span class="ruby-string">&quot;\n&quot;</span>)
        <span class="ruby-identifier">offset</span> = <span class="ruby-identifier">scan</span>.<span class="ruby-identifier">matched_size</span> <span class="ruby-operator">-</span> <span class="ruby-identifier">scan</span>[<span class="ruby-value">1</span>].<span class="ruby-identifier">rindex</span>(<span class="ruby-string">&quot;\n&quot;</span>)
      <span class="ruby-keyword">else</span>
        <span class="ruby-identifier">offset</span> <span class="ruby-operator">+=</span> <span class="ruby-identifier">scan</span>.<span class="ruby-identifier">matched_size</span>
      <span class="ruby-keyword">end</span>
      <span class="ruby-identifier">node</span> = <span class="ruby-constant">Script</span><span class="ruby-operator">::</span><span class="ruby-constant">Parser</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">scan</span>, <span class="ruby-identifier">line</span>, <span class="ruby-identifier">offset</span>, <span class="ruby-identifier">options</span>).<span class="ruby-identifier">parse_interpolated</span>
      <span class="ruby-identifier">offset</span> = <span class="ruby-identifier">node</span>.<span class="ruby-identifier">source_range</span>.<span class="ruby-identifier">end_pos</span>.<span class="ruby-identifier">offset</span>
      <span class="ruby-identifier">res</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">node</span>
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-identifier">res</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">rest</span>
<span class="ruby-keyword">end</span></pre>
          </div><!-- parse_interp-source -->
          
        </div>

        

        
      </div><!-- parse_interp-method -->

    
    </section><!-- private-class-method-details -->
  
     <section id="public-instance-5Buntitled-5D-method-details" class="method-section section">
      <h3 class="section-header">Public Instance Methods</h3>

    
      <div id="method-i-_dependencies" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">_dependencies</span><span
            class="method-args">(seen, engines)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Helper for {#dependencies}.</p>

<p>@private</p>
          
          

          
          <div class="method-source-code" id="_dependencies-source">
            <pre><span class="ruby-comment"># File lib/sass/engine.rb, line 338</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">_dependencies</span>(<span class="ruby-identifier">seen</span>, <span class="ruby-identifier">engines</span>)
  <span class="ruby-identifier">key</span> = [<span class="ruby-ivar">@options</span>[<span class="ruby-value">:filename</span>], <span class="ruby-ivar">@options</span>[<span class="ruby-value">:importer</span>]]
  <span class="ruby-keyword">return</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">seen</span>.<span class="ruby-identifier">include?</span>(<span class="ruby-identifier">key</span>)
  <span class="ruby-identifier">seen</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">key</span>
  <span class="ruby-identifier">engines</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-keyword">self</span>
  <span class="ruby-identifier">to_tree</span>.<span class="ruby-identifier">grep</span>(<span class="ruby-constant">Tree</span><span class="ruby-operator">::</span><span class="ruby-constant">ImportNode</span>) <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">n</span><span class="ruby-operator">|</span>
    <span class="ruby-keyword">next</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">n</span>.<span class="ruby-identifier">css_import?</span>
    <span class="ruby-identifier">n</span>.<span class="ruby-identifier">imported_file</span>.<span class="ruby-identifier">_dependencies</span>(<span class="ruby-identifier">seen</span>, <span class="ruby-identifier">engines</span>)
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
          </div><!-- _dependencies-source -->
          
        </div>

        

        
      </div><!-- _dependencies-method -->

    
      <div id="method-i-dependencies" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">dependencies</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Gets a set of all the documents that are (transitive) dependencies of this
document, not including the document itself.</p>

<p>@return [[Sass::Engine]] The dependency documents.</p>
          
          

          
          <div class="method-source-code" id="dependencies-source">
            <pre><span class="ruby-comment"># File lib/sass/engine.rb, line 330</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">dependencies</span>
  <span class="ruby-identifier">_dependencies</span>(<span class="ruby-constant">Set</span>.<span class="ruby-identifier">new</span>, <span class="ruby-identifier">engines</span> = <span class="ruby-constant">Set</span>.<span class="ruby-identifier">new</span>)
  <span class="ruby-constant">Sass</span><span class="ruby-operator">::</span><span class="ruby-constant">Util</span>.<span class="ruby-identifier">array_minus</span>(<span class="ruby-identifier">engines</span>, [<span class="ruby-keyword">self</span>])
<span class="ruby-keyword">end</span></pre>
          </div><!-- dependencies-source -->
          
        </div>

        

        
      </div><!-- dependencies-method -->

    
      <div id="method-i-render" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">render</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Render the template to <a href="CSS.html">CSS</a>.</p>

<p>@return [String] The <a href="CSS.html">CSS</a> @raise [Sass::SyntaxError]
if there&#39;s an error in the document @raise
[Encoding::UndefinedConversionError] if the source encoding</p>

<pre>cannot be converted to UTF-8</pre>

<p>@raise [ArgumentError] if the document uses an unknown encoding with
`@charset`</p>
          
          

          
          <div class="method-source-code" id="render-source">
            <pre><span class="ruby-comment"># File lib/sass/engine.rb, line 277</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">render</span>
  <span class="ruby-keyword">return</span> <span class="ruby-identifier">_to_tree</span>.<span class="ruby-identifier">render</span> <span class="ruby-keyword">unless</span> <span class="ruby-ivar">@options</span>[<span class="ruby-value">:quiet</span>]
  <span class="ruby-constant">Sass</span><span class="ruby-operator">::</span><span class="ruby-constant">Util</span>.<span class="ruby-identifier">silence_sass_warnings</span> {<span class="ruby-identifier">_to_tree</span>.<span class="ruby-identifier">render</span>}
<span class="ruby-keyword">end</span></pre>
          </div><!-- render-source -->
          
        </div>

        
        <div class="aliases">
          Also aliased as: <a href="Engine.html#method-i-to_css">to_css</a>
        </div>
        

        
      </div><!-- render-method -->

    
      <div id="method-i-render_with_sourcemap" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">render_with_sourcemap</span><span
            class="method-args">(sourcemap_uri)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Render the template to <a href="CSS.html">CSS</a> and return the source
map.</p>

<p>@param sourcemap_uri [String] The sourcemap URI to use in the</p>

<pre>`@sourceMappingURL` comment. If this is relative, it should be relative
to the location of the CSS file.</pre>

<p>@return [(String, <a href="Source/Map.html">Sass::Source::Map</a>)] The
rendered <a href="CSS.html">CSS</a> and the associated</p>

<pre>source map</pre>

<p>@raise [Sass::SyntaxError] if there&#39;s an error in the document, or if
the</p>

<pre>public URL for this document couldn&#39;t be determined.</pre>

<p>@raise [Encoding::UndefinedConversionError] if the source encoding</p>

<pre>cannot be converted to UTF-8</pre>

<p>@raise [ArgumentError] if the document uses an unknown encoding with
`@charset`</p>
          
          

          
          <div class="method-source-code" id="render_with_sourcemap-source">
            <pre><span class="ruby-comment"># File lib/sass/engine.rb, line 294</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">render_with_sourcemap</span>(<span class="ruby-identifier">sourcemap_uri</span>)
  <span class="ruby-keyword">return</span> <span class="ruby-identifier">_render_with_sourcemap</span>(<span class="ruby-identifier">sourcemap_uri</span>) <span class="ruby-keyword">unless</span> <span class="ruby-ivar">@options</span>[<span class="ruby-value">:quiet</span>]
  <span class="ruby-constant">Sass</span><span class="ruby-operator">::</span><span class="ruby-constant">Util</span>.<span class="ruby-identifier">silence_sass_warnings</span> {<span class="ruby-identifier">_render_with_sourcemap</span>(<span class="ruby-identifier">sourcemap_uri</span>)}
<span class="ruby-keyword">end</span></pre>
          </div><!-- render_with_sourcemap-source -->
          
        </div>

        

        
      </div><!-- render_with_sourcemap-method -->

    
      <div id="method-i-source_encoding" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">source_encoding</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Returns the original encoding of the document, or `nil` under Ruby 1.8.</p>

<p>@return [Encoding, nil] @raise [Encoding::UndefinedConversionError] if the
source encoding</p>

<pre>cannot be converted to UTF-8</pre>

<p>@raise [ArgumentError] if the document uses an unknown encoding with
`@charset`</p>
          
          

          
          <div class="method-source-code" id="source_encoding-source">
            <pre><span class="ruby-comment"># File lib/sass/engine.rb, line 320</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">source_encoding</span>
  <span class="ruby-identifier">check_encoding!</span>
  <span class="ruby-ivar">@source_encoding</span>
<span class="ruby-keyword">end</span></pre>
          </div><!-- source_encoding-source -->
          
        </div>

        

        
      </div><!-- source_encoding-method -->

    
      <div id="method-i-to_css" class="method-detail method-alias">
        
        <div class="method-heading">
          <span class="method-name">to_css</span><span
            class="method-args">()</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
        </div>

        

        
        <div class="aliases">
          Alias for: <a href="Engine.html#method-i-render">render</a>
        </div>
        
      </div><!-- to_css-method -->

    
      <div id="method-i-to_tree" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">to_tree</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Parses the document into its parse tree. Memoized.</p>

<p>@return [Sass::Tree::Node] The root of the parse tree. @raise
[Sass::SyntaxError] if there&#39;s an error in the document</p>
          
          

          
          <div class="method-source-code" id="to_tree-source">
            <pre><span class="ruby-comment"># File lib/sass/engine.rb, line 305</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">to_tree</span>
  <span class="ruby-ivar">@tree</span> <span class="ruby-operator">||=</span> <span class="ruby-keyword">if</span> <span class="ruby-ivar">@options</span>[<span class="ruby-value">:quiet</span>]
              <span class="ruby-constant">Sass</span><span class="ruby-operator">::</span><span class="ruby-constant">Util</span>.<span class="ruby-identifier">silence_sass_warnings</span> {<span class="ruby-identifier">_to_tree</span>}
            <span class="ruby-keyword">else</span>
              <span class="ruby-identifier">_to_tree</span>
            <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
          </div><!-- to_tree-source -->
          
        </div>

        

        
      </div><!-- to_tree-method -->

    
    </section><!-- public-instance-method-details -->
  
     <section id="private-instance-5Buntitled-5D-method-details" class="method-section section">
      <h3 class="section-header">Private Instance Methods</h3>

    
      <div id="method-i-_render_with_sourcemap" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">_render_with_sourcemap</span><span
            class="method-args">(sourcemap_uri)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="_render_with_sourcemap-source">
            <pre><span class="ruby-comment"># File lib/sass/engine.rb, line 351</span>
    <span class="ruby-keyword">def</span> <span class="ruby-identifier">_render_with_sourcemap</span>(<span class="ruby-identifier">sourcemap_uri</span>)
      <span class="ruby-identifier">filename</span> = <span class="ruby-ivar">@options</span>[<span class="ruby-value">:filename</span>]
      <span class="ruby-identifier">importer</span> = <span class="ruby-ivar">@options</span>[<span class="ruby-value">:importer</span>]
      <span class="ruby-identifier">sourcemap_dir</span> = <span class="ruby-ivar">@options</span>[<span class="ruby-value">:sourcemap_filename</span>] <span class="ruby-operator">&amp;&amp;</span>
        <span class="ruby-constant">File</span>.<span class="ruby-identifier">dirname</span>(<span class="ruby-constant">File</span>.<span class="ruby-identifier">expand_path</span>(<span class="ruby-ivar">@options</span>[<span class="ruby-value">:sourcemap_filename</span>]))
      <span class="ruby-keyword">if</span> <span class="ruby-identifier">filename</span>.<span class="ruby-identifier">nil?</span>
        <span class="ruby-identifier">raise</span> <span class="ruby-constant">Sass</span><span class="ruby-operator">::</span><span class="ruby-constant">SyntaxError</span>.<span class="ruby-identifier">new</span>(<span class="ruby-string">&quot;Error generating source map: couldn&#39;t determine public URL for the source stylesheet.
  No filename is available so there&#39;s nothing for the source map to link to.
&quot;</span>)
      <span class="ruby-keyword">elsif</span> <span class="ruby-identifier">importer</span>.<span class="ruby-identifier">nil?</span>
        <span class="ruby-identifier">raise</span> <span class="ruby-constant">Sass</span><span class="ruby-operator">::</span><span class="ruby-constant">SyntaxError</span>.<span class="ruby-identifier">new</span>(<span class="ruby-string">&quot;Error generating source map: couldn&#39;t determine public URL for &quot;#{filename}&quot;.
  Without a public URL, there&#39;s nothing for the source map to link to.
  An importer was not set for this file.
&quot;</span>)
      <span class="ruby-keyword">elsif</span> <span class="ruby-constant">Sass</span><span class="ruby-operator">::</span><span class="ruby-constant">Util</span>.<span class="ruby-identifier">silence_warnings</span> <span class="ruby-keyword">do</span>
              <span class="ruby-identifier">sourcemap_dir</span> = <span class="ruby-keyword">nil</span> <span class="ruby-keyword">if</span> <span class="ruby-ivar">@options</span>[<span class="ruby-value">:sourcemap</span>] <span class="ruby-operator">==</span> <span class="ruby-value">:file</span>
              <span class="ruby-identifier">importer</span>.<span class="ruby-identifier">public_url</span>(<span class="ruby-identifier">filename</span>, <span class="ruby-identifier">sourcemap_dir</span>).<span class="ruby-identifier">nil?</span>
            <span class="ruby-keyword">end</span>
        <span class="ruby-identifier">raise</span> <span class="ruby-constant">Sass</span><span class="ruby-operator">::</span><span class="ruby-constant">SyntaxError</span>.<span class="ruby-identifier">new</span>(<span class="ruby-string">&quot;Error generating source map: couldn&#39;t determine public URL for &quot;#{filename}&quot;.
  Without a public URL, there&#39;s nothing for the source map to link to.
  Custom importers should define the #public_url method.
&quot;</span>)
      <span class="ruby-keyword">end</span>

      <span class="ruby-identifier">rendered</span>, <span class="ruby-identifier">sourcemap</span> = <span class="ruby-identifier">_to_tree</span>.<span class="ruby-identifier">render_with_sourcemap</span>
      <span class="ruby-identifier">compressed</span> = <span class="ruby-ivar">@options</span>[<span class="ruby-value">:style</span>] <span class="ruby-operator">==</span> <span class="ruby-value">:compressed</span>
      <span class="ruby-identifier">rendered</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-string">&quot;\n&quot;</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">rendered</span>[<span class="ruby-value">-1</span>] <span class="ruby-operator">!=</span> <span class="ruby-string">\</span><span class="ruby-identifier">n</span>
      <span class="ruby-identifier">rendered</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-string">&quot;\n&quot;</span> <span class="ruby-keyword">unless</span> <span class="ruby-identifier">compressed</span>
      <span class="ruby-identifier">rendered</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-node">&quot;/*# sourceMappingURL=&quot;</span>
      <span class="ruby-identifier">rendered</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-constant">Sass</span><span class="ruby-operator">::</span><span class="ruby-constant">Util</span>.<span class="ruby-identifier">escape_uri</span>(<span class="ruby-identifier">sourcemap_uri</span>)
      <span class="ruby-identifier">rendered</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-string">&quot; */\n&quot;</span>
      <span class="ruby-keyword">return</span> <span class="ruby-identifier">rendered</span>, <span class="ruby-identifier">sourcemap</span>
    <span class="ruby-keyword">end</span></pre>
          </div><!-- _render_with_sourcemap-source -->
          
        </div>

        

        
      </div><!-- _render_with_sourcemap-method -->

    
      <div id="method-i-_to_tree" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">_to_tree</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="_to_tree-source">
            <pre><span class="ruby-comment"># File lib/sass/engine.rb, line 388</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">_to_tree</span>
  <span class="ruby-identifier">check_encoding!</span>

  <span class="ruby-keyword">if</span> (<span class="ruby-ivar">@options</span>[<span class="ruby-value">:cache</span>] <span class="ruby-operator">||</span> <span class="ruby-ivar">@options</span>[<span class="ruby-value">:read_cache</span>]) <span class="ruby-operator">&amp;&amp;</span>
      <span class="ruby-ivar">@options</span>[<span class="ruby-value">:filename</span>] <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-ivar">@options</span>[<span class="ruby-value">:importer</span>]
    <span class="ruby-identifier">key</span> = <span class="ruby-identifier">sassc_key</span>
    <span class="ruby-identifier">sha</span> = <span class="ruby-constant">Digest</span><span class="ruby-operator">::</span><span class="ruby-constant">SHA1</span>.<span class="ruby-identifier">hexdigest</span>(<span class="ruby-ivar">@template</span>)

    <span class="ruby-keyword">if</span> (<span class="ruby-identifier">root</span> = <span class="ruby-ivar">@options</span>[<span class="ruby-value">:cache_store</span>].<span class="ruby-identifier">retrieve</span>(<span class="ruby-identifier">key</span>, <span class="ruby-identifier">sha</span>))
      <span class="ruby-identifier">root</span>.<span class="ruby-identifier">options</span> = <span class="ruby-ivar">@options</span>
      <span class="ruby-keyword">return</span> <span class="ruby-identifier">root</span>
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>

  <span class="ruby-keyword">if</span> <span class="ruby-ivar">@options</span>[<span class="ruby-value">:syntax</span>] <span class="ruby-operator">==</span> <span class="ruby-value">:scss</span>
    <span class="ruby-identifier">root</span> = <span class="ruby-constant">Sass</span><span class="ruby-operator">::</span><span class="ruby-constant">SCSS</span><span class="ruby-operator">::</span><span class="ruby-constant">Parser</span>.<span class="ruby-identifier">new</span>(<span class="ruby-ivar">@template</span>, <span class="ruby-ivar">@options</span>[<span class="ruby-value">:filename</span>], <span class="ruby-ivar">@options</span>[<span class="ruby-value">:importer</span>]).<span class="ruby-identifier">parse</span>
  <span class="ruby-keyword">else</span>
    <span class="ruby-identifier">root</span> = <span class="ruby-constant">Tree</span><span class="ruby-operator">::</span><span class="ruby-constant">RootNode</span>.<span class="ruby-identifier">new</span>(<span class="ruby-ivar">@template</span>)
    <span class="ruby-identifier">append_children</span>(<span class="ruby-identifier">root</span>, <span class="ruby-identifier">tree</span>(<span class="ruby-identifier">tabulate</span>(<span class="ruby-ivar">@template</span>)).<span class="ruby-identifier">first</span>, <span class="ruby-keyword">true</span>)
  <span class="ruby-keyword">end</span>

  <span class="ruby-identifier">root</span>.<span class="ruby-identifier">options</span> = <span class="ruby-ivar">@options</span>
  <span class="ruby-keyword">if</span> <span class="ruby-ivar">@options</span>[<span class="ruby-value">:cache</span>] <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">key</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">sha</span>
    <span class="ruby-keyword">begin</span>
      <span class="ruby-identifier">old_options</span> = <span class="ruby-identifier">root</span>.<span class="ruby-identifier">options</span>
      <span class="ruby-identifier">root</span>.<span class="ruby-identifier">options</span> = {}
      <span class="ruby-ivar">@options</span>[<span class="ruby-value">:cache_store</span>].<span class="ruby-identifier">store</span>(<span class="ruby-identifier">key</span>, <span class="ruby-identifier">sha</span>, <span class="ruby-identifier">root</span>)
    <span class="ruby-keyword">ensure</span>
      <span class="ruby-identifier">root</span>.<span class="ruby-identifier">options</span> = <span class="ruby-identifier">old_options</span>
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-identifier">root</span>
<span class="ruby-keyword">rescue</span> <span class="ruby-constant">SyntaxError</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">e</span>
  <span class="ruby-identifier">e</span>.<span class="ruby-identifier">modify_backtrace</span>(<span class="ruby-value">:filename</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-ivar">@options</span>[<span class="ruby-value">:filename</span>], <span class="ruby-value">:line</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-ivar">@line</span>)
  <span class="ruby-identifier">e</span>.<span class="ruby-identifier">sass_template</span> = <span class="ruby-ivar">@template</span>
  <span class="ruby-identifier">raise</span> <span class="ruby-identifier">e</span>
<span class="ruby-keyword">end</span></pre>
          </div><!-- _to_tree-source -->
          
        </div>

        

        
      </div><!-- _to_tree-method -->

    
      <div id="method-i-append_children" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">append_children</span><span
            class="method-args">(parent, children, root)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="append_children-source">
            <pre><span class="ruby-comment"># File lib/sass/engine.rb, line 548</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">append_children</span>(<span class="ruby-identifier">parent</span>, <span class="ruby-identifier">children</span>, <span class="ruby-identifier">root</span>)
  <span class="ruby-identifier">continued_rule</span> = <span class="ruby-keyword">nil</span>
  <span class="ruby-identifier">continued_comment</span> = <span class="ruby-keyword">nil</span>
  <span class="ruby-identifier">children</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">line</span><span class="ruby-operator">|</span>
    <span class="ruby-identifier">child</span> = <span class="ruby-identifier">build_tree</span>(<span class="ruby-identifier">parent</span>, <span class="ruby-identifier">line</span>, <span class="ruby-identifier">root</span>)

    <span class="ruby-keyword">if</span> <span class="ruby-identifier">child</span>.<span class="ruby-identifier">is_a?</span>(<span class="ruby-constant">Tree</span><span class="ruby-operator">::</span><span class="ruby-constant">RuleNode</span>)
      <span class="ruby-keyword">if</span> <span class="ruby-identifier">child</span>.<span class="ruby-identifier">continued?</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">child</span>.<span class="ruby-identifier">children</span>.<span class="ruby-identifier">empty?</span>
        <span class="ruby-keyword">if</span> <span class="ruby-identifier">continued_rule</span>
          <span class="ruby-identifier">continued_rule</span>.<span class="ruby-identifier">add_rules</span> <span class="ruby-identifier">child</span>
        <span class="ruby-keyword">else</span>
          <span class="ruby-identifier">continued_rule</span> = <span class="ruby-identifier">child</span>
        <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">next</span>
      <span class="ruby-keyword">elsif</span> <span class="ruby-identifier">continued_rule</span>
        <span class="ruby-identifier">continued_rule</span>.<span class="ruby-identifier">add_rules</span> <span class="ruby-identifier">child</span>
        <span class="ruby-identifier">continued_rule</span>.<span class="ruby-identifier">children</span> = <span class="ruby-identifier">child</span>.<span class="ruby-identifier">children</span>
        <span class="ruby-identifier">continued_rule</span>, <span class="ruby-identifier">child</span> = <span class="ruby-keyword">nil</span>, <span class="ruby-identifier">continued_rule</span>
      <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">elsif</span> <span class="ruby-identifier">continued_rule</span>
      <span class="ruby-identifier">continued_rule</span> = <span class="ruby-keyword">nil</span>
    <span class="ruby-keyword">end</span>

    <span class="ruby-keyword">if</span> <span class="ruby-identifier">child</span>.<span class="ruby-identifier">is_a?</span>(<span class="ruby-constant">Tree</span><span class="ruby-operator">::</span><span class="ruby-constant">CommentNode</span>) <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">child</span>.<span class="ruby-identifier">type</span> <span class="ruby-operator">==</span> <span class="ruby-value">:silent</span>
      <span class="ruby-keyword">if</span> <span class="ruby-identifier">continued_comment</span> <span class="ruby-operator">&amp;&amp;</span>
          <span class="ruby-identifier">child</span>.<span class="ruby-identifier">line</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">continued_comment</span>.<span class="ruby-identifier">line</span> <span class="ruby-operator">+</span>
          <span class="ruby-identifier">continued_comment</span>.<span class="ruby-identifier">lines</span> <span class="ruby-operator">+</span> <span class="ruby-value">1</span>
        <span class="ruby-identifier">continued_comment</span>.<span class="ruby-identifier">value</span>.<span class="ruby-identifier">last</span>.<span class="ruby-identifier">sub!</span>(<span class="ruby-regexp">/ \*\/\Z/</span>, <span class="ruby-string">&#39;&#39;</span>)
        <span class="ruby-identifier">child</span>.<span class="ruby-identifier">value</span>.<span class="ruby-identifier">first</span>.<span class="ruby-identifier">gsub!</span>(<span class="ruby-regexp">/\A\/\*/</span>, <span class="ruby-string">&#39; *&#39;</span>)
        <span class="ruby-identifier">continued_comment</span>.<span class="ruby-identifier">value</span> <span class="ruby-operator">+=</span> [<span class="ruby-string">&quot;\n&quot;</span>] <span class="ruby-operator">+</span> <span class="ruby-identifier">child</span>.<span class="ruby-identifier">value</span>
        <span class="ruby-keyword">next</span>
      <span class="ruby-keyword">end</span>

      <span class="ruby-identifier">continued_comment</span> = <span class="ruby-identifier">child</span>
    <span class="ruby-keyword">end</span>

    <span class="ruby-identifier">check_for_no_children</span>(<span class="ruby-identifier">child</span>)
    <span class="ruby-identifier">validate_and_append_child</span>(<span class="ruby-identifier">parent</span>, <span class="ruby-identifier">child</span>, <span class="ruby-identifier">line</span>, <span class="ruby-identifier">root</span>)
  <span class="ruby-keyword">end</span>

  <span class="ruby-identifier">parent</span>
<span class="ruby-keyword">end</span></pre>
          </div><!-- append_children-source -->
          
        </div>

        

        
      </div><!-- append_children-method -->

    
      <div id="method-i-build_tree" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">build_tree</span><span
            class="method-args">(parent, line, root = false)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="build_tree-source">
            <pre><span class="ruby-comment"># File lib/sass/engine.rb, line 530</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">build_tree</span>(<span class="ruby-identifier">parent</span>, <span class="ruby-identifier">line</span>, <span class="ruby-identifier">root</span> = <span class="ruby-keyword">false</span>)
  <span class="ruby-ivar">@line</span> = <span class="ruby-identifier">line</span>.<span class="ruby-identifier">index</span>
  <span class="ruby-ivar">@offset</span> = <span class="ruby-identifier">line</span>.<span class="ruby-identifier">offset</span>
  <span class="ruby-identifier">node_or_nodes</span> = <span class="ruby-identifier">parse_line</span>(<span class="ruby-identifier">parent</span>, <span class="ruby-identifier">line</span>, <span class="ruby-identifier">root</span>)

  <span class="ruby-constant">Array</span>(<span class="ruby-identifier">node_or_nodes</span>).<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">node</span><span class="ruby-operator">|</span>
    <span class="ruby-comment"># Node is a symbol if it&#39;s non-outputting, like a variable assignment</span>
    <span class="ruby-keyword">next</span> <span class="ruby-keyword">unless</span> <span class="ruby-identifier">node</span>.<span class="ruby-identifier">is_a?</span> <span class="ruby-constant">Tree</span><span class="ruby-operator">::</span><span class="ruby-constant">Node</span>

    <span class="ruby-identifier">node</span>.<span class="ruby-identifier">line</span> = <span class="ruby-identifier">line</span>.<span class="ruby-identifier">index</span>
    <span class="ruby-identifier">node</span>.<span class="ruby-identifier">filename</span> = <span class="ruby-identifier">line</span>.<span class="ruby-identifier">filename</span>

    <span class="ruby-identifier">append_children</span>(<span class="ruby-identifier">node</span>, <span class="ruby-identifier">line</span>.<span class="ruby-identifier">children</span>, <span class="ruby-keyword">false</span>)
  <span class="ruby-keyword">end</span>

  <span class="ruby-identifier">node_or_nodes</span>
<span class="ruby-keyword">end</span></pre>
          </div><!-- build_tree-source -->
          
        </div>

        

        
      </div><!-- build_tree-method -->

    
      <div id="method-i-check_encoding-21" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">check_encoding!</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="check_encoding-21-source">
            <pre><span class="ruby-comment"># File lib/sass/engine.rb, line 430</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">check_encoding!</span>
  <span class="ruby-keyword">return</span> <span class="ruby-keyword">if</span> <span class="ruby-ivar">@checked_encoding</span>
  <span class="ruby-ivar">@checked_encoding</span> = <span class="ruby-keyword">true</span>
  <span class="ruby-ivar">@template</span>, <span class="ruby-ivar">@source_encoding</span> = <span class="ruby-constant">Sass</span><span class="ruby-operator">::</span><span class="ruby-constant">Util</span>.<span class="ruby-identifier">check_sass_encoding</span>(<span class="ruby-ivar">@template</span>)
<span class="ruby-keyword">end</span></pre>
          </div><!-- check_encoding-21-source -->
          
        </div>

        

        
      </div><!-- check_encoding-21-method -->

    
      <div id="method-i-check_for_no_children" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">check_for_no_children</span><span
            class="method-args">(node)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="check_for_no_children-source">
            <pre><span class="ruby-comment"># File lib/sass/engine.rb, line 600</span>
    <span class="ruby-keyword">def</span> <span class="ruby-identifier">check_for_no_children</span>(<span class="ruby-identifier">node</span>)
      <span class="ruby-keyword">return</span> <span class="ruby-keyword">unless</span> <span class="ruby-identifier">node</span>.<span class="ruby-identifier">is_a?</span>(<span class="ruby-constant">Tree</span><span class="ruby-operator">::</span><span class="ruby-constant">RuleNode</span>) <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">node</span>.<span class="ruby-identifier">children</span>.<span class="ruby-identifier">empty?</span>
      <span class="ruby-constant">Sass</span><span class="ruby-operator">::</span><span class="ruby-constant">Util</span>.<span class="ruby-identifier">sass_warn</span>(<span class="ruby-string">&quot;WARNING on line #{node.line}#{&quot; of #{node.filename}&quot; if node.filename}:
This selector doesn&#39;t have any properties and will not be rendered.
&quot;</span>.<span class="ruby-identifier">strip</span>)
    <span class="ruby-keyword">end</span></pre>
          </div><!-- check_for_no_children-source -->
          
        </div>

        

        
      </div><!-- check_for_no_children-method -->

    
      <div id="method-i-format_comment_text" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">format_comment_text</span><span
            class="method-args">(text, silent)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="format_comment_text-source">
            <pre><span class="ruby-comment"># File lib/sass/engine.rb, line 1148</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">format_comment_text</span>(<span class="ruby-identifier">text</span>, <span class="ruby-identifier">silent</span>)
  <span class="ruby-identifier">content</span> = <span class="ruby-identifier">text</span>.<span class="ruby-identifier">split</span>(<span class="ruby-string">&quot;\n&quot;</span>)

  <span class="ruby-keyword">if</span> <span class="ruby-identifier">content</span>.<span class="ruby-identifier">first</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">content</span>.<span class="ruby-identifier">first</span>.<span class="ruby-identifier">strip</span>.<span class="ruby-identifier">empty?</span>
    <span class="ruby-identifier">removed_first</span> = <span class="ruby-keyword">true</span>
    <span class="ruby-identifier">content</span>.<span class="ruby-identifier">shift</span>
  <span class="ruby-keyword">end</span>

  <span class="ruby-keyword">return</span> <span class="ruby-string">&quot;/* */&quot;</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">content</span>.<span class="ruby-identifier">empty?</span>
  <span class="ruby-identifier">content</span>.<span class="ruby-identifier">last</span>.<span class="ruby-identifier">gsub!</span>(<span class="ruby-regexp">/ ?\*\/ *$/</span>, <span class="ruby-string">&#39;&#39;</span>)
  <span class="ruby-identifier">first</span> = <span class="ruby-identifier">content</span>.<span class="ruby-identifier">shift</span> <span class="ruby-keyword">unless</span> <span class="ruby-identifier">removed_first</span>
  <span class="ruby-identifier">content</span>.<span class="ruby-identifier">map!</span> {<span class="ruby-operator">|</span><span class="ruby-identifier">l</span><span class="ruby-operator">|</span> <span class="ruby-identifier">l</span>.<span class="ruby-identifier">gsub!</span>(<span class="ruby-regexp">/^\*( ?)/</span>, <span class="ruby-string">&#39;\1&#39;</span>) <span class="ruby-operator">||</span> (<span class="ruby-identifier">l</span>.<span class="ruby-identifier">empty?</span> <span class="ruby-operator">?</span> <span class="ruby-string">&quot;&quot;</span> <span class="ruby-operator">:</span> <span class="ruby-string">&quot; &quot;</span>) <span class="ruby-operator">+</span> <span class="ruby-identifier">l</span>}
  <span class="ruby-identifier">content</span>.<span class="ruby-identifier">unshift</span> <span class="ruby-identifier">first</span> <span class="ruby-keyword">unless</span> <span class="ruby-identifier">removed_first</span>
  <span class="ruby-keyword">if</span> <span class="ruby-identifier">silent</span>
    <span class="ruby-string">&quot;/*&quot;</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">content</span>.<span class="ruby-identifier">join</span>(<span class="ruby-string">&quot;\n *&quot;</span>) <span class="ruby-operator">+</span> <span class="ruby-string">&quot; */&quot;</span>
  <span class="ruby-keyword">else</span>
    <span class="ruby-comment"># The #gsub fixes the case of a trailing */</span>
    <span class="ruby-string">&quot;/*&quot;</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">content</span>.<span class="ruby-identifier">join</span>(<span class="ruby-string">&quot;\n *&quot;</span>).<span class="ruby-identifier">gsub</span>(<span class="ruby-regexp">/ \*\Z/</span>, <span class="ruby-string">&#39;&#39;</span>) <span class="ruby-operator">+</span> <span class="ruby-string">&quot; */&quot;</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
          </div><!-- format_comment_text-source -->
          
        </div>

        

        
      </div><!-- format_comment_text-method -->

    
      <div id="method-i-full_line_range" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">full_line_range</span><span
            class="method-args">(line)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="full_line_range-source">
            <pre><span class="ruby-comment"># File lib/sass/engine.rb, line 1178</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">full_line_range</span>(<span class="ruby-identifier">line</span>)
  <span class="ruby-constant">Sass</span><span class="ruby-operator">::</span><span class="ruby-constant">Source</span><span class="ruby-operator">::</span><span class="ruby-constant">Range</span>.<span class="ruby-identifier">new</span>(
    <span class="ruby-constant">Sass</span><span class="ruby-operator">::</span><span class="ruby-constant">Source</span><span class="ruby-operator">::</span><span class="ruby-constant">Position</span>.<span class="ruby-identifier">new</span>(<span class="ruby-ivar">@line</span>, <span class="ruby-identifier">to_parser_offset</span>(<span class="ruby-identifier">line</span>.<span class="ruby-identifier">offset</span>)),
    <span class="ruby-constant">Sass</span><span class="ruby-operator">::</span><span class="ruby-constant">Source</span><span class="ruby-operator">::</span><span class="ruby-constant">Position</span>.<span class="ruby-identifier">new</span>(<span class="ruby-ivar">@line</span>, <span class="ruby-identifier">to_parser_offset</span>(<span class="ruby-identifier">line</span>.<span class="ruby-identifier">offset</span>) <span class="ruby-operator">+</span> <span class="ruby-identifier">line</span>.<span class="ruby-identifier">text</span>.<span class="ruby-identifier">length</span>),
    <span class="ruby-ivar">@options</span>[<span class="ruby-value">:filename</span>], <span class="ruby-ivar">@options</span>[<span class="ruby-value">:importer</span>])
<span class="ruby-keyword">end</span></pre>
          </div><!-- full_line_range-source -->
          
        </div>

        

        
      </div><!-- full_line_range-method -->

    
      <div id="method-i-parse_at_root_directive" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">parse_at_root_directive</span><span
            class="method-args">(parent, line, root, value, offset)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="parse_at_root_directive-source">
            <pre><span class="ruby-comment"># File lib/sass/engine.rb, line 898</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">parse_at_root_directive</span>(<span class="ruby-identifier">parent</span>, <span class="ruby-identifier">line</span>, <span class="ruby-identifier">root</span>, <span class="ruby-identifier">value</span>, <span class="ruby-identifier">offset</span>)
  <span class="ruby-keyword">return</span> <span class="ruby-constant">Sass</span><span class="ruby-operator">::</span><span class="ruby-constant">Tree</span><span class="ruby-operator">::</span><span class="ruby-constant">AtRootNode</span>.<span class="ruby-identifier">new</span> <span class="ruby-keyword">unless</span> <span class="ruby-identifier">value</span>

  <span class="ruby-keyword">if</span> <span class="ruby-identifier">value</span>.<span class="ruby-identifier">start_with?</span>(<span class="ruby-string">&#39;(&#39;</span>)
    <span class="ruby-identifier">parser</span> = <span class="ruby-constant">Sass</span><span class="ruby-operator">::</span><span class="ruby-constant">SCSS</span><span class="ruby-operator">::</span><span class="ruby-constant">Parser</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">value</span>,
      <span class="ruby-ivar">@options</span>[<span class="ruby-value">:filename</span>], <span class="ruby-ivar">@options</span>[<span class="ruby-value">:importer</span>],
      <span class="ruby-ivar">@line</span>, <span class="ruby-identifier">to_parser_offset</span>(<span class="ruby-ivar">@offset</span>))
    <span class="ruby-identifier">offset</span> = <span class="ruby-identifier">line</span>.<span class="ruby-identifier">offset</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">line</span>.<span class="ruby-identifier">text</span>.<span class="ruby-identifier">index</span>(<span class="ruby-string">&#39;at-root&#39;</span>).<span class="ruby-identifier">to_i</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>
    <span class="ruby-keyword">return</span> <span class="ruby-constant">Tree</span><span class="ruby-operator">::</span><span class="ruby-constant">AtRootNode</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">parser</span>.<span class="ruby-identifier">parse_at_root_query</span>)
  <span class="ruby-keyword">end</span>

  <span class="ruby-identifier">at_root_node</span> = <span class="ruby-constant">Tree</span><span class="ruby-operator">::</span><span class="ruby-constant">AtRootNode</span>.<span class="ruby-identifier">new</span>
  <span class="ruby-identifier">parsed</span> = <span class="ruby-identifier">parse_interp</span>(<span class="ruby-identifier">value</span>, <span class="ruby-identifier">offset</span>)
  <span class="ruby-identifier">rule_node</span> = <span class="ruby-constant">Tree</span><span class="ruby-operator">::</span><span class="ruby-constant">RuleNode</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">parsed</span>, <span class="ruby-identifier">full_line_range</span>(<span class="ruby-identifier">line</span>))

  <span class="ruby-comment"># The caller expects to automatically add children to the returned node</span>
  <span class="ruby-comment"># and we want it to add children to the rule node instead, so we</span>
  <span class="ruby-comment"># manually handle the wiring here and return nil so the caller doesn&#39;t</span>
  <span class="ruby-comment"># duplicate our efforts.</span>
  <span class="ruby-identifier">append_children</span>(<span class="ruby-identifier">rule_node</span>, <span class="ruby-identifier">line</span>.<span class="ruby-identifier">children</span>, <span class="ruby-keyword">false</span>)
  <span class="ruby-identifier">at_root_node</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">rule_node</span>
  <span class="ruby-identifier">parent</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">at_root_node</span>
  <span class="ruby-keyword">nil</span>
<span class="ruby-keyword">end</span></pre>
          </div><!-- parse_at_root_directive-source -->
          
        </div>

        

        
      </div><!-- parse_at_root_directive-method -->

    
      <div id="method-i-parse_charset_directive" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">parse_charset_directive</span><span
            class="method-args">(parent, line, root, value, offset)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="parse_charset_directive-source">
            <pre><span class="ruby-comment"># File lib/sass/engine.rb, line 876</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">parse_charset_directive</span>(<span class="ruby-identifier">parent</span>, <span class="ruby-identifier">line</span>, <span class="ruby-identifier">root</span>, <span class="ruby-identifier">value</span>, <span class="ruby-identifier">offset</span>)
  <span class="ruby-identifier">name</span> = <span class="ruby-identifier">value</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">value</span>[<span class="ruby-regexp">/\A([&quot;&#39;])(.*)\1\Z/</span>, <span class="ruby-value">2</span>] <span class="ruby-comment"># &quot;</span>
  <span class="ruby-identifier">raise</span> <span class="ruby-constant">SyntaxError</span>.<span class="ruby-identifier">new</span>(<span class="ruby-string">&quot;Invalid charset directive &#39;@charset&#39;: expected string.&quot;</span>) <span class="ruby-keyword">unless</span> <span class="ruby-identifier">name</span>
  <span class="ruby-identifier">raise</span> <span class="ruby-constant">SyntaxError</span>.<span class="ruby-identifier">new</span>(<span class="ruby-string">&quot;Illegal nesting: Nothing may be nested beneath charset directives.&quot;</span>,
    <span class="ruby-value">:line</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-ivar">@line</span> <span class="ruby-operator">+</span> <span class="ruby-value">1</span>) <span class="ruby-keyword">unless</span> <span class="ruby-identifier">line</span>.<span class="ruby-identifier">children</span>.<span class="ruby-identifier">empty?</span>
  <span class="ruby-constant">Tree</span><span class="ruby-operator">::</span><span class="ruby-constant">CharsetNode</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">name</span>)
<span class="ruby-keyword">end</span></pre>
          </div><!-- parse_charset_directive-source -->
          
        </div>

        

        
      </div><!-- parse_charset_directive-method -->

    
      <div id="method-i-parse_comment" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">parse_comment</span><span
            class="method-args">(line)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="parse_comment-source">
            <pre><span class="ruby-comment"># File lib/sass/engine.rb, line 756</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">parse_comment</span>(<span class="ruby-identifier">line</span>)
  <span class="ruby-keyword">if</span> <span class="ruby-identifier">line</span>.<span class="ruby-identifier">text</span>[<span class="ruby-value">1</span>] <span class="ruby-operator">==</span> <span class="ruby-constant">CSS_COMMENT_CHAR</span> <span class="ruby-operator">||</span> <span class="ruby-identifier">line</span>.<span class="ruby-identifier">text</span>[<span class="ruby-value">1</span>] <span class="ruby-operator">==</span> <span class="ruby-constant">SASS_COMMENT_CHAR</span>
    <span class="ruby-identifier">silent</span> = <span class="ruby-identifier">line</span>.<span class="ruby-identifier">text</span>[<span class="ruby-value">1</span>] <span class="ruby-operator">==</span> <span class="ruby-constant">SASS_COMMENT_CHAR</span>
    <span class="ruby-identifier">loud</span> = <span class="ruby-operator">!</span><span class="ruby-identifier">silent</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">line</span>.<span class="ruby-identifier">text</span>[<span class="ruby-value">2</span>] <span class="ruby-operator">==</span> <span class="ruby-constant">SASS_LOUD_COMMENT_CHAR</span>
    <span class="ruby-keyword">if</span> <span class="ruby-identifier">silent</span>
      <span class="ruby-identifier">value</span> = [<span class="ruby-identifier">line</span>.<span class="ruby-identifier">text</span>]
    <span class="ruby-keyword">else</span>
      <span class="ruby-identifier">value</span> = <span class="ruby-keyword">self</span>.<span class="ruby-identifier">class</span>.<span class="ruby-identifier">parse_interp</span>(
        <span class="ruby-identifier">line</span>.<span class="ruby-identifier">text</span>, <span class="ruby-identifier">line</span>.<span class="ruby-identifier">index</span>, <span class="ruby-identifier">to_parser_offset</span>(<span class="ruby-identifier">line</span>.<span class="ruby-identifier">offset</span>), <span class="ruby-value">:filename</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-ivar">@filename</span>)
    <span class="ruby-keyword">end</span>
    <span class="ruby-identifier">value</span> = <span class="ruby-constant">Sass</span><span class="ruby-operator">::</span><span class="ruby-constant">Util</span>.<span class="ruby-identifier">with_extracted_values</span>(<span class="ruby-identifier">value</span>) <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">str</span><span class="ruby-operator">|</span>
      <span class="ruby-identifier">str</span> = <span class="ruby-identifier">str</span>.<span class="ruby-identifier">gsub</span>(<span class="ruby-node">/^#{line.comment_tab_str}/</span>, <span class="ruby-string">&#39;&#39;</span>)[<span class="ruby-value">2</span><span class="ruby-operator">..</span><span class="ruby-value">-1</span>] <span class="ruby-comment"># get rid of // or /*</span>
      <span class="ruby-identifier">format_comment_text</span>(<span class="ruby-identifier">str</span>, <span class="ruby-identifier">silent</span>)
    <span class="ruby-keyword">end</span>
    <span class="ruby-identifier">type</span> = <span class="ruby-keyword">if</span> <span class="ruby-identifier">silent</span>
             <span class="ruby-value">:silent</span>
           <span class="ruby-keyword">elsif</span> <span class="ruby-identifier">loud</span>
             <span class="ruby-value">:loud</span>
           <span class="ruby-keyword">else</span>
             <span class="ruby-value">:normal</span>
           <span class="ruby-keyword">end</span>
    <span class="ruby-identifier">comment</span> = <span class="ruby-constant">Tree</span><span class="ruby-operator">::</span><span class="ruby-constant">CommentNode</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">value</span>, <span class="ruby-identifier">type</span>)
    <span class="ruby-identifier">comment</span>.<span class="ruby-identifier">line</span> = <span class="ruby-identifier">line</span>.<span class="ruby-identifier">index</span>
    <span class="ruby-identifier">text</span> = <span class="ruby-identifier">line</span>.<span class="ruby-identifier">text</span>.<span class="ruby-identifier">rstrip</span>
    <span class="ruby-keyword">if</span> <span class="ruby-identifier">text</span>.<span class="ruby-identifier">include?</span>(<span class="ruby-string">&quot;\n&quot;</span>)
      <span class="ruby-identifier">end_offset</span> = <span class="ruby-identifier">text</span>.<span class="ruby-identifier">length</span> <span class="ruby-operator">-</span> <span class="ruby-identifier">text</span>.<span class="ruby-identifier">rindex</span>(<span class="ruby-string">&quot;\n&quot;</span>)
    <span class="ruby-keyword">else</span>
      <span class="ruby-identifier">end_offset</span> = <span class="ruby-identifier">to_parser_offset</span>(<span class="ruby-identifier">line</span>.<span class="ruby-identifier">offset</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">text</span>.<span class="ruby-identifier">length</span>)
    <span class="ruby-keyword">end</span>
    <span class="ruby-identifier">comment</span>.<span class="ruby-identifier">source_range</span> = <span class="ruby-constant">Sass</span><span class="ruby-operator">::</span><span class="ruby-constant">Source</span><span class="ruby-operator">::</span><span class="ruby-constant">Range</span>.<span class="ruby-identifier">new</span>(
      <span class="ruby-constant">Sass</span><span class="ruby-operator">::</span><span class="ruby-constant">Source</span><span class="ruby-operator">::</span><span class="ruby-constant">Position</span>.<span class="ruby-identifier">new</span>(<span class="ruby-ivar">@line</span>, <span class="ruby-identifier">to_parser_offset</span>(<span class="ruby-identifier">line</span>.<span class="ruby-identifier">offset</span>)),
      <span class="ruby-constant">Sass</span><span class="ruby-operator">::</span><span class="ruby-constant">Source</span><span class="ruby-operator">::</span><span class="ruby-constant">Position</span>.<span class="ruby-identifier">new</span>(<span class="ruby-ivar">@line</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">text</span>.<span class="ruby-identifier">count</span>(<span class="ruby-string">&quot;\n&quot;</span>), <span class="ruby-identifier">end_offset</span>),
      <span class="ruby-ivar">@options</span>[<span class="ruby-value">:filename</span>])
    <span class="ruby-identifier">comment</span>
  <span class="ruby-keyword">else</span>
    <span class="ruby-constant">Tree</span><span class="ruby-operator">::</span><span class="ruby-constant">RuleNode</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">parse_interp</span>(<span class="ruby-identifier">line</span>.<span class="ruby-identifier">text</span>), <span class="ruby-identifier">full_line_range</span>(<span class="ruby-identifier">line</span>))
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
          </div><!-- parse_comment-source -->
          
        </div>

        

        
      </div><!-- parse_comment-method -->

    
      <div id="method-i-parse_content_directive" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">parse_content_directive</span><span
            class="method-args">(parent, line, root, value, offset)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="parse_content_directive-source">
            <pre><span class="ruby-comment"># File lib/sass/engine.rb, line 1104</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">parse_content_directive</span>(<span class="ruby-identifier">parent</span>, <span class="ruby-identifier">line</span>, <span class="ruby-identifier">root</span>, <span class="ruby-identifier">value</span>, <span class="ruby-identifier">offset</span>)
  <span class="ruby-identifier">trailing</span> = <span class="ruby-identifier">line</span>.<span class="ruby-identifier">text</span>.<span class="ruby-identifier">scan</span>(<span class="ruby-constant">CONTENT_RE</span>).<span class="ruby-identifier">first</span>.<span class="ruby-identifier">first</span>
  <span class="ruby-keyword">unless</span> <span class="ruby-identifier">trailing</span>.<span class="ruby-identifier">nil?</span>
    <span class="ruby-identifier">raise</span> <span class="ruby-constant">SyntaxError</span>.<span class="ruby-identifier">new</span>(
      <span class="ruby-node">&quot;Invalid content directive. Trailing characters found: \&quot;#{trailing}\&quot;.&quot;</span>)
  <span class="ruby-keyword">end</span>
  <span class="ruby-identifier">raise</span> <span class="ruby-constant">SyntaxError</span>.<span class="ruby-identifier">new</span>(<span class="ruby-string">&quot;Illegal nesting: Nothing may be nested beneath @content directives.&quot;</span>,
    <span class="ruby-value">:line</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">line</span>.<span class="ruby-identifier">index</span> <span class="ruby-operator">+</span> <span class="ruby-value">1</span>) <span class="ruby-keyword">unless</span> <span class="ruby-identifier">line</span>.<span class="ruby-identifier">children</span>.<span class="ruby-identifier">empty?</span>
  <span class="ruby-constant">Tree</span><span class="ruby-operator">::</span><span class="ruby-constant">ContentNode</span>.<span class="ruby-identifier">new</span>
<span class="ruby-keyword">end</span></pre>
          </div><!-- parse_content_directive-source -->
          
        </div>

        

        
      </div><!-- parse_content_directive-method -->

    
      <div id="method-i-parse_debug_directive" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">parse_debug_directive</span><span
            class="method-args">(parent, line, root, value, offset)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="parse_debug_directive-source">
            <pre><span class="ruby-comment"># File lib/sass/engine.rb, line 829</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">parse_debug_directive</span>(<span class="ruby-identifier">parent</span>, <span class="ruby-identifier">line</span>, <span class="ruby-identifier">root</span>, <span class="ruby-identifier">value</span>, <span class="ruby-identifier">offset</span>)
  <span class="ruby-identifier">raise</span> <span class="ruby-constant">SyntaxError</span>.<span class="ruby-identifier">new</span>(<span class="ruby-string">&quot;Invalid debug directive &#39;@debug&#39;: expected expression.&quot;</span>) <span class="ruby-keyword">unless</span> <span class="ruby-identifier">value</span>
  <span class="ruby-identifier">raise</span> <span class="ruby-constant">SyntaxError</span>.<span class="ruby-identifier">new</span>(<span class="ruby-string">&quot;Illegal nesting: Nothing may be nested beneath debug directives.&quot;</span>,
    <span class="ruby-value">:line</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-ivar">@line</span> <span class="ruby-operator">+</span> <span class="ruby-value">1</span>) <span class="ruby-keyword">unless</span> <span class="ruby-identifier">line</span>.<span class="ruby-identifier">children</span>.<span class="ruby-identifier">empty?</span>
  <span class="ruby-identifier">offset</span> = <span class="ruby-identifier">line</span>.<span class="ruby-identifier">offset</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">line</span>.<span class="ruby-identifier">text</span>.<span class="ruby-identifier">index</span>(<span class="ruby-identifier">value</span>).<span class="ruby-identifier">to_i</span>
  <span class="ruby-constant">Tree</span><span class="ruby-operator">::</span><span class="ruby-constant">DebugNode</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">parse_script</span>(<span class="ruby-identifier">value</span>, <span class="ruby-value">:offset</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">offset</span>))
<span class="ruby-keyword">end</span></pre>
          </div><!-- parse_debug_directive-source -->
          
        </div>

        

        
      </div><!-- parse_debug_directive-method -->

    
      <div id="method-i-parse_directive" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">parse_directive</span><span
            class="method-args">(parent, line, root)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="parse_directive-source">
            <pre><span class="ruby-comment"># File lib/sass/engine.rb, line 799</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">parse_directive</span>(<span class="ruby-identifier">parent</span>, <span class="ruby-identifier">line</span>, <span class="ruby-identifier">root</span>)
  <span class="ruby-identifier">directive</span>, <span class="ruby-identifier">whitespace</span>, <span class="ruby-identifier">value</span> = <span class="ruby-identifier">line</span>.<span class="ruby-identifier">text</span>[<span class="ruby-value">1</span><span class="ruby-operator">..</span><span class="ruby-value">-1</span>].<span class="ruby-identifier">split</span>(<span class="ruby-regexp">/(\s+)/</span>, <span class="ruby-value">2</span>)
  <span class="ruby-identifier">raise</span> <span class="ruby-constant">SyntaxError</span>.<span class="ruby-identifier">new</span>(<span class="ruby-string">&quot;Invalid directive: &#39;@&#39;.&quot;</span>) <span class="ruby-keyword">unless</span> <span class="ruby-identifier">directive</span>
  <span class="ruby-identifier">offset</span> = <span class="ruby-identifier">directive</span>.<span class="ruby-identifier">size</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">whitespace</span>.<span class="ruby-identifier">size</span> <span class="ruby-operator">+</span> <span class="ruby-value">1</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">whitespace</span>

  <span class="ruby-identifier">directive_name</span> = <span class="ruby-identifier">directive</span>.<span class="ruby-identifier">tr</span>(<span class="ruby-string">&#39;-&#39;</span>, <span class="ruby-string">&#39;_&#39;</span>).<span class="ruby-identifier">to_sym</span>
  <span class="ruby-keyword">if</span> <span class="ruby-constant">DIRECTIVES</span>.<span class="ruby-identifier">include?</span>(<span class="ruby-identifier">directive_name</span>)
    <span class="ruby-keyword">return</span> <span class="ruby-identifier">send</span>(<span class="ruby-node">&quot;parse_#{directive_name}_directive&quot;</span>, <span class="ruby-identifier">parent</span>, <span class="ruby-identifier">line</span>, <span class="ruby-identifier">root</span>, <span class="ruby-identifier">value</span>, <span class="ruby-identifier">offset</span>)
  <span class="ruby-keyword">end</span>

  <span class="ruby-identifier">unprefixed_directive</span> = <span class="ruby-identifier">directive</span>.<span class="ruby-identifier">gsub</span>(<span class="ruby-regexp">/^-[a-z0-9]+-/</span>, <span class="ruby-string">&#39;&#39;</span>)
  <span class="ruby-keyword">if</span> <span class="ruby-identifier">unprefixed_directive</span> <span class="ruby-operator">==</span> <span class="ruby-string">&#39;supports&#39;</span>
    <span class="ruby-identifier">parser</span> = <span class="ruby-constant">Sass</span><span class="ruby-operator">::</span><span class="ruby-constant">SCSS</span><span class="ruby-operator">::</span><span class="ruby-constant">Parser</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">value</span>, <span class="ruby-ivar">@options</span>[<span class="ruby-value">:filename</span>], <span class="ruby-ivar">@line</span>)
    <span class="ruby-keyword">return</span> <span class="ruby-constant">Tree</span><span class="ruby-operator">::</span><span class="ruby-constant">SupportsNode</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">directive</span>, <span class="ruby-identifier">parser</span>.<span class="ruby-identifier">parse_supports_condition</span>)
  <span class="ruby-keyword">end</span>

  <span class="ruby-constant">Tree</span><span class="ruby-operator">::</span><span class="ruby-constant">DirectiveNode</span>.<span class="ruby-identifier">new</span>(
    <span class="ruby-identifier">value</span>.<span class="ruby-identifier">nil?</span> <span class="ruby-operator">?</span> [<span class="ruby-node">&quot;@#{directive}&quot;</span>] <span class="ruby-operator">:</span> [<span class="ruby-node">&quot;@#{directive} &quot;</span>] <span class="ruby-operator">+</span> <span class="ruby-identifier">parse_interp</span>(<span class="ruby-identifier">value</span>, <span class="ruby-identifier">offset</span>))
<span class="ruby-keyword">end</span></pre>
          </div><!-- parse_directive-source -->
          
        </div>

        

        
      </div><!-- parse_directive-method -->

    
      <div id="method-i-parse_each_directive" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">parse_each_directive</span><span
            class="method-args">(parent, line, root, value, offset)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="parse_each_directive-source">
            <pre><span class="ruby-comment"># File lib/sass/engine.rb, line 945</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">parse_each_directive</span>(<span class="ruby-identifier">parent</span>, <span class="ruby-identifier">line</span>, <span class="ruby-identifier">root</span>, <span class="ruby-identifier">value</span>, <span class="ruby-identifier">offset</span>)
  <span class="ruby-identifier">vars</span>, <span class="ruby-identifier">list_expr</span> = <span class="ruby-identifier">value</span>.<span class="ruby-identifier">scan</span>(<span class="ruby-regexp">/^([^\s]+(?:\s*,\s*[^\s]+)*)\s+in\s+(.+)$/</span>).<span class="ruby-identifier">first</span>

  <span class="ruby-keyword">if</span> <span class="ruby-identifier">vars</span>.<span class="ruby-identifier">nil?</span> <span class="ruby-comment"># scan failed, try to figure out why for error message</span>
    <span class="ruby-keyword">if</span> <span class="ruby-identifier">value</span> <span class="ruby-operator">!~</span> <span class="ruby-regexp">/^[^\s]+/</span>
      <span class="ruby-identifier">expected</span> = <span class="ruby-string">&quot;variable name&quot;</span>
    <span class="ruby-keyword">elsif</span> <span class="ruby-identifier">value</span> <span class="ruby-operator">!~</span> <span class="ruby-regexp">/^[^\s]+(?:\s*,\s*[^\s]+)*[^\s]+\s+from\s+.+/</span>
      <span class="ruby-identifier">expected</span> = <span class="ruby-string">&quot;&#39;in &lt;expr&gt;&#39;&quot;</span>
    <span class="ruby-keyword">end</span>
    <span class="ruby-identifier">raise</span> <span class="ruby-constant">SyntaxError</span>.<span class="ruby-identifier">new</span>(<span class="ruby-node">&quot;Invalid each directive &#39;@each #{value}&#39;: expected #{expected}.&quot;</span>)
  <span class="ruby-keyword">end</span>

  <span class="ruby-identifier">vars</span> = <span class="ruby-identifier">vars</span>.<span class="ruby-identifier">split</span>(<span class="ruby-string">&#39;,&#39;</span>).<span class="ruby-identifier">map</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">var</span><span class="ruby-operator">|</span>
    <span class="ruby-identifier">var</span>.<span class="ruby-identifier">strip!</span>
    <span class="ruby-identifier">raise</span> <span class="ruby-constant">SyntaxError</span>.<span class="ruby-identifier">new</span>(<span class="ruby-node">&quot;Invalid variable \&quot;#{var}\&quot;.&quot;</span>) <span class="ruby-keyword">unless</span> <span class="ruby-identifier">var</span> <span class="ruby-operator">=~</span> <span class="ruby-constant">Script</span><span class="ruby-operator">::</span><span class="ruby-constant">VALIDATE</span>
    <span class="ruby-identifier">var</span>[<span class="ruby-value">1</span><span class="ruby-operator">..</span><span class="ruby-value">-1</span>]
  <span class="ruby-keyword">end</span>

  <span class="ruby-identifier">parsed_list</span> = <span class="ruby-identifier">parse_script</span>(<span class="ruby-identifier">list_expr</span>, <span class="ruby-value">:offset</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">line</span>.<span class="ruby-identifier">offset</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">line</span>.<span class="ruby-identifier">text</span>.<span class="ruby-identifier">index</span>(<span class="ruby-identifier">list_expr</span>))
  <span class="ruby-constant">Tree</span><span class="ruby-operator">::</span><span class="ruby-constant">EachNode</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">vars</span>, <span class="ruby-identifier">parsed_list</span>)
<span class="ruby-keyword">end</span></pre>
          </div><!-- parse_each_directive-source -->
          
        </div>

        

        
      </div><!-- parse_each_directive-method -->

    
      <div id="method-i-parse_else_directive" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">parse_else_directive</span><span
            class="method-args">(parent, line, root, value, offset)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="parse_else_directive-source">
            <pre><span class="ruby-comment"># File lib/sass/engine.rb, line 967</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">parse_else_directive</span>(<span class="ruby-identifier">parent</span>, <span class="ruby-identifier">line</span>, <span class="ruby-identifier">root</span>, <span class="ruby-identifier">value</span>, <span class="ruby-identifier">offset</span>)
  <span class="ruby-identifier">previous</span> = <span class="ruby-identifier">parent</span>.<span class="ruby-identifier">children</span>.<span class="ruby-identifier">last</span>
  <span class="ruby-identifier">raise</span> <span class="ruby-constant">SyntaxError</span>.<span class="ruby-identifier">new</span>(<span class="ruby-string">&quot;@else must come after @if.&quot;</span>) <span class="ruby-keyword">unless</span> <span class="ruby-identifier">previous</span>.<span class="ruby-identifier">is_a?</span>(<span class="ruby-constant">Tree</span><span class="ruby-operator">::</span><span class="ruby-constant">IfNode</span>)

  <span class="ruby-keyword">if</span> <span class="ruby-identifier">value</span>
    <span class="ruby-keyword">if</span> <span class="ruby-identifier">value</span> <span class="ruby-operator">!~</span> <span class="ruby-regexp">/^if\s+(.+)/</span>
      <span class="ruby-identifier">raise</span> <span class="ruby-constant">SyntaxError</span>.<span class="ruby-identifier">new</span>(<span class="ruby-node">&quot;Invalid else directive &#39;@else #{value}&#39;: expected &#39;if &lt;expr&gt;&#39;.&quot;</span>)
    <span class="ruby-keyword">end</span>
    <span class="ruby-identifier">expr</span> = <span class="ruby-identifier">parse_script</span>(<span class="ruby-node">$1</span>, <span class="ruby-value">:offset</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">line</span>.<span class="ruby-identifier">offset</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">line</span>.<span class="ruby-identifier">text</span>.<span class="ruby-identifier">index</span>(<span class="ruby-node">$1</span>))
  <span class="ruby-keyword">end</span>

  <span class="ruby-identifier">node</span> = <span class="ruby-constant">Tree</span><span class="ruby-operator">::</span><span class="ruby-constant">IfNode</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">expr</span>)
  <span class="ruby-identifier">append_children</span>(<span class="ruby-identifier">node</span>, <span class="ruby-identifier">line</span>.<span class="ruby-identifier">children</span>, <span class="ruby-keyword">false</span>)
  <span class="ruby-identifier">previous</span>.<span class="ruby-identifier">add_else</span> <span class="ruby-identifier">node</span>
  <span class="ruby-keyword">nil</span>
<span class="ruby-keyword">end</span></pre>
          </div><!-- parse_else_directive-source -->
          
        </div>

        

        
      </div><!-- parse_else_directive-method -->

    
      <div id="method-i-parse_error_directive" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">parse_error_directive</span><span
            class="method-args">(parent, line, root, value, offset)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="parse_error_directive-source">
            <pre><span class="ruby-comment"># File lib/sass/engine.rb, line 837</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">parse_error_directive</span>(<span class="ruby-identifier">parent</span>, <span class="ruby-identifier">line</span>, <span class="ruby-identifier">root</span>, <span class="ruby-identifier">value</span>, <span class="ruby-identifier">offset</span>)
  <span class="ruby-identifier">raise</span> <span class="ruby-constant">SyntaxError</span>.<span class="ruby-identifier">new</span>(<span class="ruby-string">&quot;Invalid error directive &#39;@error&#39;: expected expression.&quot;</span>) <span class="ruby-keyword">unless</span> <span class="ruby-identifier">value</span>
  <span class="ruby-identifier">raise</span> <span class="ruby-constant">SyntaxError</span>.<span class="ruby-identifier">new</span>(<span class="ruby-string">&quot;Illegal nesting: Nothing may be nested beneath error directives.&quot;</span>,
    <span class="ruby-value">:line</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-ivar">@line</span> <span class="ruby-operator">+</span> <span class="ruby-value">1</span>) <span class="ruby-keyword">unless</span> <span class="ruby-identifier">line</span>.<span class="ruby-identifier">children</span>.<span class="ruby-identifier">empty?</span>
  <span class="ruby-identifier">offset</span> = <span class="ruby-identifier">line</span>.<span class="ruby-identifier">offset</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">line</span>.<span class="ruby-identifier">text</span>.<span class="ruby-identifier">index</span>(<span class="ruby-identifier">value</span>).<span class="ruby-identifier">to_i</span>
  <span class="ruby-constant">Tree</span><span class="ruby-operator">::</span><span class="ruby-constant">ErrorNode</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">parse_script</span>(<span class="ruby-identifier">value</span>, <span class="ruby-value">:offset</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">offset</span>))
<span class="ruby-keyword">end</span></pre>
          </div><!-- parse_error_directive-source -->
          
        </div>

        

        
      </div><!-- parse_error_directive-method -->

    
      <div id="method-i-parse_extend_directive" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">parse_extend_directive</span><span
            class="method-args">(parent, line, root, value, offset)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="parse_extend_directive-source">
            <pre><span class="ruby-comment"># File lib/sass/engine.rb, line 845</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">parse_extend_directive</span>(<span class="ruby-identifier">parent</span>, <span class="ruby-identifier">line</span>, <span class="ruby-identifier">root</span>, <span class="ruby-identifier">value</span>, <span class="ruby-identifier">offset</span>)
  <span class="ruby-identifier">raise</span> <span class="ruby-constant">SyntaxError</span>.<span class="ruby-identifier">new</span>(<span class="ruby-string">&quot;Invalid extend directive &#39;@extend&#39;: expected expression.&quot;</span>) <span class="ruby-keyword">unless</span> <span class="ruby-identifier">value</span>
  <span class="ruby-identifier">raise</span> <span class="ruby-constant">SyntaxError</span>.<span class="ruby-identifier">new</span>(<span class="ruby-string">&quot;Illegal nesting: Nothing may be nested beneath extend directives.&quot;</span>,
    <span class="ruby-value">:line</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-ivar">@line</span> <span class="ruby-operator">+</span> <span class="ruby-value">1</span>) <span class="ruby-keyword">unless</span> <span class="ruby-identifier">line</span>.<span class="ruby-identifier">children</span>.<span class="ruby-identifier">empty?</span>
  <span class="ruby-identifier">optional</span> = <span class="ruby-operator">!</span><span class="ruby-operator">!</span><span class="ruby-identifier">value</span>.<span class="ruby-identifier">gsub!</span>(<span class="ruby-node">/\s+#{Sass::SCSS::RX::OPTIONAL}$/</span>, <span class="ruby-string">&#39;&#39;</span>)
  <span class="ruby-identifier">offset</span> = <span class="ruby-identifier">line</span>.<span class="ruby-identifier">offset</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">line</span>.<span class="ruby-identifier">text</span>.<span class="ruby-identifier">index</span>(<span class="ruby-identifier">value</span>).<span class="ruby-identifier">to_i</span>
  <span class="ruby-identifier">interp_parsed</span> = <span class="ruby-identifier">parse_interp</span>(<span class="ruby-identifier">value</span>, <span class="ruby-identifier">offset</span>)
  <span class="ruby-identifier">selector_range</span> = <span class="ruby-constant">Sass</span><span class="ruby-operator">::</span><span class="ruby-constant">Source</span><span class="ruby-operator">::</span><span class="ruby-constant">Range</span>.<span class="ruby-identifier">new</span>(
    <span class="ruby-constant">Sass</span><span class="ruby-operator">::</span><span class="ruby-constant">Source</span><span class="ruby-operator">::</span><span class="ruby-constant">Position</span>.<span class="ruby-identifier">new</span>(<span class="ruby-ivar">@line</span>, <span class="ruby-identifier">to_parser_offset</span>(<span class="ruby-identifier">offset</span>)),
    <span class="ruby-constant">Sass</span><span class="ruby-operator">::</span><span class="ruby-constant">Source</span><span class="ruby-operator">::</span><span class="ruby-constant">Position</span>.<span class="ruby-identifier">new</span>(<span class="ruby-ivar">@line</span>, <span class="ruby-identifier">to_parser_offset</span>(<span class="ruby-identifier">line</span>.<span class="ruby-identifier">offset</span>) <span class="ruby-operator">+</span> <span class="ruby-identifier">line</span>.<span class="ruby-identifier">text</span>.<span class="ruby-identifier">length</span>),
    <span class="ruby-ivar">@options</span>[<span class="ruby-value">:filename</span>], <span class="ruby-ivar">@options</span>[<span class="ruby-value">:importer</span>]
  )
  <span class="ruby-constant">Tree</span><span class="ruby-operator">::</span><span class="ruby-constant">ExtendNode</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">interp_parsed</span>, <span class="ruby-identifier">optional</span>, <span class="ruby-identifier">selector_range</span>)
<span class="ruby-keyword">end</span></pre>
          </div><!-- parse_extend_directive-source -->
          
        </div>

        

        
      </div><!-- parse_extend_directive-method -->

    
      <div id="method-i-parse_for_directive" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">parse_for_directive</span><span
            class="method-args">(parent, line, root, value, offset)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="parse_for_directive-source">
            <pre><span class="ruby-comment"># File lib/sass/engine.rb, line 923</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">parse_for_directive</span>(<span class="ruby-identifier">parent</span>, <span class="ruby-identifier">line</span>, <span class="ruby-identifier">root</span>, <span class="ruby-identifier">value</span>, <span class="ruby-identifier">offset</span>)
  <span class="ruby-identifier">var</span>, <span class="ruby-identifier">from_expr</span>, <span class="ruby-identifier">to_name</span>, <span class="ruby-identifier">to_expr</span> =
    <span class="ruby-identifier">value</span>.<span class="ruby-identifier">scan</span>(<span class="ruby-regexp">/^([^\s]+)\s+from\s+(.+)\s+(to|through)\s+(.+)$/</span>).<span class="ruby-identifier">first</span>

  <span class="ruby-keyword">if</span> <span class="ruby-identifier">var</span>.<span class="ruby-identifier">nil?</span> <span class="ruby-comment"># scan failed, try to figure out why for error message</span>
    <span class="ruby-keyword">if</span> <span class="ruby-identifier">value</span> <span class="ruby-operator">!~</span> <span class="ruby-regexp">/^[^\s]+/</span>
      <span class="ruby-identifier">expected</span> = <span class="ruby-string">&quot;variable name&quot;</span>
    <span class="ruby-keyword">elsif</span> <span class="ruby-identifier">value</span> <span class="ruby-operator">!~</span> <span class="ruby-regexp">/^[^\s]+\s+from\s+.+/</span>
      <span class="ruby-identifier">expected</span> = <span class="ruby-string">&quot;&#39;from &lt;expr&gt;&#39;&quot;</span>
    <span class="ruby-keyword">else</span>
      <span class="ruby-identifier">expected</span> = <span class="ruby-string">&quot;&#39;to &lt;expr&gt;&#39; or &#39;through &lt;expr&gt;&#39;&quot;</span>
    <span class="ruby-keyword">end</span>
    <span class="ruby-identifier">raise</span> <span class="ruby-constant">SyntaxError</span>.<span class="ruby-identifier">new</span>(<span class="ruby-node">&quot;Invalid for directive &#39;@for #{value}&#39;: expected #{expected}.&quot;</span>)
  <span class="ruby-keyword">end</span>
  <span class="ruby-identifier">raise</span> <span class="ruby-constant">SyntaxError</span>.<span class="ruby-identifier">new</span>(<span class="ruby-node">&quot;Invalid variable \&quot;#{var}\&quot;.&quot;</span>) <span class="ruby-keyword">unless</span> <span class="ruby-identifier">var</span> <span class="ruby-operator">=~</span> <span class="ruby-constant">Script</span><span class="ruby-operator">::</span><span class="ruby-constant">VALIDATE</span>

  <span class="ruby-identifier">var</span> = <span class="ruby-identifier">var</span>[<span class="ruby-value">1</span><span class="ruby-operator">..</span><span class="ruby-value">-1</span>]
  <span class="ruby-identifier">parsed_from</span> = <span class="ruby-identifier">parse_script</span>(<span class="ruby-identifier">from_expr</span>, <span class="ruby-value">:offset</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">line</span>.<span class="ruby-identifier">offset</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">line</span>.<span class="ruby-identifier">text</span>.<span class="ruby-identifier">index</span>(<span class="ruby-identifier">from_expr</span>))
  <span class="ruby-identifier">parsed_to</span> = <span class="ruby-identifier">parse_script</span>(<span class="ruby-identifier">to_expr</span>, <span class="ruby-value">:offset</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">line</span>.<span class="ruby-identifier">offset</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">line</span>.<span class="ruby-identifier">text</span>.<span class="ruby-identifier">index</span>(<span class="ruby-identifier">to_expr</span>))
  <span class="ruby-constant">Tree</span><span class="ruby-operator">::</span><span class="ruby-constant">ForNode</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">var</span>, <span class="ruby-identifier">parsed_from</span>, <span class="ruby-identifier">parsed_to</span>, <span class="ruby-identifier">to_name</span> <span class="ruby-operator">==</span> <span class="ruby-string">&#39;to&#39;</span>)
<span class="ruby-keyword">end</span></pre>
          </div><!-- parse_for_directive-source -->
          
        </div>

        

        
      </div><!-- parse_for_directive-method -->

    
      <div id="method-i-parse_function_directive" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">parse_function_directive</span><span
            class="method-args">(parent, line, root, value, offset)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="parse_function_directive-source">
            <pre><span class="ruby-comment"># File lib/sass/engine.rb, line 1132</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">parse_function_directive</span>(<span class="ruby-identifier">parent</span>, <span class="ruby-identifier">line</span>, <span class="ruby-identifier">root</span>, <span class="ruby-identifier">value</span>, <span class="ruby-identifier">offset</span>)
  <span class="ruby-identifier">name</span>, <span class="ruby-identifier">arg_string</span> = <span class="ruby-identifier">line</span>.<span class="ruby-identifier">text</span>.<span class="ruby-identifier">scan</span>(<span class="ruby-constant">FUNCTION_RE</span>).<span class="ruby-identifier">first</span>
  <span class="ruby-identifier">raise</span> <span class="ruby-constant">SyntaxError</span>.<span class="ruby-identifier">new</span>(<span class="ruby-node">&quot;Invalid function definition \&quot;#{line.text}\&quot;.&quot;</span>) <span class="ruby-keyword">if</span> <span class="ruby-identifier">name</span>.<span class="ruby-identifier">nil?</span>

  <span class="ruby-identifier">offset</span> = <span class="ruby-identifier">line</span>.<span class="ruby-identifier">offset</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">line</span>.<span class="ruby-identifier">text</span>.<span class="ruby-identifier">size</span> <span class="ruby-operator">-</span> <span class="ruby-identifier">arg_string</span>.<span class="ruby-identifier">size</span>
  <span class="ruby-identifier">args</span>, <span class="ruby-identifier">splat</span> = <span class="ruby-constant">Script</span><span class="ruby-operator">::</span><span class="ruby-constant">Parser</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">arg_string</span>.<span class="ruby-identifier">strip</span>, <span class="ruby-ivar">@line</span>, <span class="ruby-identifier">to_parser_offset</span>(<span class="ruby-identifier">offset</span>), <span class="ruby-ivar">@options</span>).
    <span class="ruby-identifier">parse_function_definition_arglist</span>
  <span class="ruby-constant">Tree</span><span class="ruby-operator">::</span><span class="ruby-constant">FunctionNode</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">name</span>, <span class="ruby-identifier">args</span>, <span class="ruby-identifier">splat</span>)
<span class="ruby-keyword">end</span></pre>
          </div><!-- parse_function_directive-source -->
          
        </div>

        

        
      </div><!-- parse_function_directive-method -->

    
      <div id="method-i-parse_if_directive" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">parse_if_directive</span><span
            class="method-args">(parent, line, root, value, offset)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="parse_if_directive-source">
            <pre><span class="ruby-comment"># File lib/sass/engine.rb, line 824</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">parse_if_directive</span>(<span class="ruby-identifier">parent</span>, <span class="ruby-identifier">line</span>, <span class="ruby-identifier">root</span>, <span class="ruby-identifier">value</span>, <span class="ruby-identifier">offset</span>)
  <span class="ruby-identifier">raise</span> <span class="ruby-constant">SyntaxError</span>.<span class="ruby-identifier">new</span>(<span class="ruby-string">&quot;Invalid if directive &#39;@if&#39;: expected expression.&quot;</span>) <span class="ruby-keyword">unless</span> <span class="ruby-identifier">value</span>
  <span class="ruby-constant">Tree</span><span class="ruby-operator">::</span><span class="ruby-constant">IfNode</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">parse_script</span>(<span class="ruby-identifier">value</span>, <span class="ruby-value">:offset</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">offset</span>))
<span class="ruby-keyword">end</span></pre>
          </div><!-- parse_if_directive-source -->
          
        </div>

        

        
      </div><!-- parse_if_directive-method -->

    
      <div id="method-i-parse_import_arg" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">parse_import_arg</span><span
            class="method-args">(scanner, offset)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>@comment</p>

<pre>rubocop:disable MethodLength</pre>
          
          

          
          <div class="method-source-code" id="parse_import_arg-source">
            <pre><span class="ruby-comment"># File lib/sass/engine.rb, line 1011</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">parse_import_arg</span>(<span class="ruby-identifier">scanner</span>, <span class="ruby-identifier">offset</span>)
  <span class="ruby-keyword">return</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">scanner</span>.<span class="ruby-identifier">eos?</span>

  <span class="ruby-keyword">if</span> <span class="ruby-identifier">scanner</span>.<span class="ruby-identifier">match?</span>(<span class="ruby-regexp">/url\(/</span>)
    <span class="ruby-identifier">script_parser</span> = <span class="ruby-constant">Sass</span><span class="ruby-operator">::</span><span class="ruby-constant">Script</span><span class="ruby-operator">::</span><span class="ruby-constant">Parser</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">scanner</span>, <span class="ruby-ivar">@line</span>, <span class="ruby-identifier">to_parser_offset</span>(<span class="ruby-identifier">offset</span>), <span class="ruby-ivar">@options</span>)
    <span class="ruby-identifier">str</span> = <span class="ruby-identifier">script_parser</span>.<span class="ruby-identifier">parse_string</span>

    <span class="ruby-keyword">if</span> <span class="ruby-identifier">scanner</span>.<span class="ruby-identifier">eos?</span>
      <span class="ruby-identifier">end_pos</span> = <span class="ruby-identifier">str</span>.<span class="ruby-identifier">source_range</span>.<span class="ruby-identifier">end_pos</span>
      <span class="ruby-identifier">node</span> = <span class="ruby-constant">Tree</span><span class="ruby-operator">::</span><span class="ruby-constant">CssImportNode</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">str</span>)
    <span class="ruby-keyword">else</span>
      <span class="ruby-identifier">supports_parser</span> = <span class="ruby-constant">Sass</span><span class="ruby-operator">::</span><span class="ruby-constant">SCSS</span><span class="ruby-operator">::</span><span class="ruby-constant">Parser</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">scanner</span>,
        <span class="ruby-ivar">@options</span>[<span class="ruby-value">:filename</span>], <span class="ruby-ivar">@options</span>[<span class="ruby-value">:importer</span>],
        <span class="ruby-ivar">@line</span>, <span class="ruby-identifier">str</span>.<span class="ruby-identifier">source_range</span>.<span class="ruby-identifier">end_pos</span>.<span class="ruby-identifier">offset</span>)
      <span class="ruby-identifier">supports_condition</span> = <span class="ruby-identifier">supports_parser</span>.<span class="ruby-identifier">parse_supports_clause</span>

      <span class="ruby-keyword">if</span> <span class="ruby-identifier">scanner</span>.<span class="ruby-identifier">eos?</span>
        <span class="ruby-identifier">node</span> = <span class="ruby-constant">Tree</span><span class="ruby-operator">::</span><span class="ruby-constant">CssImportNode</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">str</span>, [], <span class="ruby-identifier">supports_condition</span>)
      <span class="ruby-keyword">else</span>
        <span class="ruby-identifier">media_parser</span> = <span class="ruby-constant">Sass</span><span class="ruby-operator">::</span><span class="ruby-constant">SCSS</span><span class="ruby-operator">::</span><span class="ruby-constant">Parser</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">scanner</span>,
          <span class="ruby-ivar">@options</span>[<span class="ruby-value">:filename</span>], <span class="ruby-ivar">@options</span>[<span class="ruby-value">:importer</span>],
          <span class="ruby-ivar">@line</span>, <span class="ruby-identifier">str</span>.<span class="ruby-identifier">source_range</span>.<span class="ruby-identifier">end_pos</span>.<span class="ruby-identifier">offset</span>)
        <span class="ruby-identifier">media</span> = <span class="ruby-identifier">media_parser</span>.<span class="ruby-identifier">parse_media_query_list</span>
        <span class="ruby-identifier">end_pos</span> = <span class="ruby-constant">Sass</span><span class="ruby-operator">::</span><span class="ruby-constant">Source</span><span class="ruby-operator">::</span><span class="ruby-constant">Position</span>.<span class="ruby-identifier">new</span>(<span class="ruby-ivar">@line</span>, <span class="ruby-identifier">media_parser</span>.<span class="ruby-identifier">offset</span> <span class="ruby-operator">+</span> <span class="ruby-value">1</span>)
        <span class="ruby-identifier">node</span> = <span class="ruby-constant">Tree</span><span class="ruby-operator">::</span><span class="ruby-constant">CssImportNode</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">str</span>, <span class="ruby-identifier">media</span>.<span class="ruby-identifier">to_a</span>, <span class="ruby-identifier">supports_condition</span>)
      <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">end</span>

    <span class="ruby-identifier">node</span>.<span class="ruby-identifier">source_range</span> = <span class="ruby-constant">Sass</span><span class="ruby-operator">::</span><span class="ruby-constant">Source</span><span class="ruby-operator">::</span><span class="ruby-constant">Range</span>.<span class="ruby-identifier">new</span>(
      <span class="ruby-identifier">str</span>.<span class="ruby-identifier">source_range</span>.<span class="ruby-identifier">start_pos</span>, <span class="ruby-identifier">end_pos</span>,
      <span class="ruby-ivar">@options</span>[<span class="ruby-value">:filename</span>], <span class="ruby-ivar">@options</span>[<span class="ruby-value">:importer</span>])
    <span class="ruby-keyword">return</span> <span class="ruby-identifier">node</span>
  <span class="ruby-keyword">end</span>

  <span class="ruby-keyword">unless</span> (<span class="ruby-identifier">quoted_val</span> = <span class="ruby-identifier">scanner</span>.<span class="ruby-identifier">scan</span>(<span class="ruby-constant">Sass</span><span class="ruby-operator">::</span><span class="ruby-constant">SCSS</span><span class="ruby-operator">::</span><span class="ruby-constant">RX</span><span class="ruby-operator">::</span><span class="ruby-constant">STRING</span>))
    <span class="ruby-identifier">scanned</span> = <span class="ruby-identifier">scanner</span>.<span class="ruby-identifier">scan</span>(<span class="ruby-regexp">/[^,;]+/</span>)
    <span class="ruby-identifier">node</span> = <span class="ruby-constant">Tree</span><span class="ruby-operator">::</span><span class="ruby-constant">ImportNode</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">scanned</span>)
    <span class="ruby-identifier">start_parser_offset</span> = <span class="ruby-identifier">to_parser_offset</span>(<span class="ruby-identifier">offset</span>)
    <span class="ruby-identifier">node</span>.<span class="ruby-identifier">source_range</span> = <span class="ruby-constant">Sass</span><span class="ruby-operator">::</span><span class="ruby-constant">Source</span><span class="ruby-operator">::</span><span class="ruby-constant">Range</span>.<span class="ruby-identifier">new</span>(
      <span class="ruby-constant">Sass</span><span class="ruby-operator">::</span><span class="ruby-constant">Source</span><span class="ruby-operator">::</span><span class="ruby-constant">Position</span>.<span class="ruby-identifier">new</span>(<span class="ruby-ivar">@line</span>, <span class="ruby-identifier">start_parser_offset</span>),
      <span class="ruby-constant">Sass</span><span class="ruby-operator">::</span><span class="ruby-constant">Source</span><span class="ruby-operator">::</span><span class="ruby-constant">Position</span>.<span class="ruby-identifier">new</span>(<span class="ruby-ivar">@line</span>, <span class="ruby-identifier">start_parser_offset</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">scanned</span>.<span class="ruby-identifier">length</span>),
      <span class="ruby-ivar">@options</span>[<span class="ruby-value">:filename</span>], <span class="ruby-ivar">@options</span>[<span class="ruby-value">:importer</span>])
    <span class="ruby-keyword">return</span> <span class="ruby-identifier">node</span>
  <span class="ruby-keyword">end</span>

  <span class="ruby-identifier">start_offset</span> = <span class="ruby-identifier">offset</span>
  <span class="ruby-identifier">offset</span> <span class="ruby-operator">+=</span> <span class="ruby-identifier">scanner</span>.<span class="ruby-identifier">matched</span>.<span class="ruby-identifier">length</span>
  <span class="ruby-identifier">val</span> = <span class="ruby-constant">Sass</span><span class="ruby-operator">::</span><span class="ruby-constant">Script</span><span class="ruby-operator">::</span><span class="ruby-constant">Value</span><span class="ruby-operator">::</span><span class="ruby-constant">String</span>.<span class="ruby-identifier">value</span>(<span class="ruby-identifier">scanner</span>[<span class="ruby-value">1</span>] <span class="ruby-operator">||</span> <span class="ruby-identifier">scanner</span>[<span class="ruby-value">2</span>])
  <span class="ruby-identifier">scanned</span> = <span class="ruby-identifier">scanner</span>.<span class="ruby-identifier">scan</span>(<span class="ruby-regexp">/\s*/</span>)
  <span class="ruby-keyword">if</span> <span class="ruby-operator">!</span><span class="ruby-identifier">scanner</span>.<span class="ruby-identifier">match?</span>(<span class="ruby-regexp">/[,;]|$/</span>)
    <span class="ruby-identifier">offset</span> <span class="ruby-operator">+=</span> <span class="ruby-identifier">scanned</span>.<span class="ruby-identifier">length</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">scanned</span>
    <span class="ruby-identifier">media_parser</span> = <span class="ruby-constant">Sass</span><span class="ruby-operator">::</span><span class="ruby-constant">SCSS</span><span class="ruby-operator">::</span><span class="ruby-constant">Parser</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">scanner</span>,
      <span class="ruby-ivar">@options</span>[<span class="ruby-value">:filename</span>], <span class="ruby-ivar">@options</span>[<span class="ruby-value">:importer</span>], <span class="ruby-ivar">@line</span>, <span class="ruby-identifier">offset</span>)
    <span class="ruby-identifier">media</span> = <span class="ruby-identifier">media_parser</span>.<span class="ruby-identifier">parse_media_query_list</span>
    <span class="ruby-identifier">node</span> = <span class="ruby-constant">Tree</span><span class="ruby-operator">::</span><span class="ruby-constant">CssImportNode</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">quoted_val</span>, <span class="ruby-identifier">media</span>.<span class="ruby-identifier">to_a</span>)
    <span class="ruby-identifier">node</span>.<span class="ruby-identifier">source_range</span> = <span class="ruby-constant">Sass</span><span class="ruby-operator">::</span><span class="ruby-constant">Source</span><span class="ruby-operator">::</span><span class="ruby-constant">Range</span>.<span class="ruby-identifier">new</span>(
      <span class="ruby-constant">Sass</span><span class="ruby-operator">::</span><span class="ruby-constant">Source</span><span class="ruby-operator">::</span><span class="ruby-constant">Position</span>.<span class="ruby-identifier">new</span>(<span class="ruby-ivar">@line</span>, <span class="ruby-identifier">to_parser_offset</span>(<span class="ruby-identifier">start_offset</span>)),
      <span class="ruby-constant">Sass</span><span class="ruby-operator">::</span><span class="ruby-constant">Source</span><span class="ruby-operator">::</span><span class="ruby-constant">Position</span>.<span class="ruby-identifier">new</span>(<span class="ruby-ivar">@line</span>, <span class="ruby-identifier">media_parser</span>.<span class="ruby-identifier">offset</span>),
      <span class="ruby-ivar">@options</span>[<span class="ruby-value">:filename</span>], <span class="ruby-ivar">@options</span>[<span class="ruby-value">:importer</span>])
  <span class="ruby-keyword">elsif</span> <span class="ruby-identifier">val</span> <span class="ruby-operator">=~</span> <span class="ruby-regexp">%r{^(https?:)?//}</span>
    <span class="ruby-identifier">node</span> = <span class="ruby-constant">Tree</span><span class="ruby-operator">::</span><span class="ruby-constant">CssImportNode</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">quoted_val</span>)
    <span class="ruby-identifier">node</span>.<span class="ruby-identifier">source_range</span> = <span class="ruby-constant">Sass</span><span class="ruby-operator">::</span><span class="ruby-constant">Source</span><span class="ruby-operator">::</span><span class="ruby-constant">Range</span>.<span class="ruby-identifier">new</span>(
      <span class="ruby-constant">Sass</span><span class="ruby-operator">::</span><span class="ruby-constant">Source</span><span class="ruby-operator">::</span><span class="ruby-constant">Position</span>.<span class="ruby-identifier">new</span>(<span class="ruby-ivar">@line</span>, <span class="ruby-identifier">to_parser_offset</span>(<span class="ruby-identifier">start_offset</span>)),
      <span class="ruby-constant">Sass</span><span class="ruby-operator">::</span><span class="ruby-constant">Source</span><span class="ruby-operator">::</span><span class="ruby-constant">Position</span>.<span class="ruby-identifier">new</span>(<span class="ruby-ivar">@line</span>, <span class="ruby-identifier">to_parser_offset</span>(<span class="ruby-identifier">offset</span>)),
      <span class="ruby-ivar">@options</span>[<span class="ruby-value">:filename</span>], <span class="ruby-ivar">@options</span>[<span class="ruby-value">:importer</span>])
  <span class="ruby-keyword">else</span>
    <span class="ruby-identifier">node</span> = <span class="ruby-constant">Tree</span><span class="ruby-operator">::</span><span class="ruby-constant">ImportNode</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">val</span>)
    <span class="ruby-identifier">node</span>.<span class="ruby-identifier">source_range</span> = <span class="ruby-constant">Sass</span><span class="ruby-operator">::</span><span class="ruby-constant">Source</span><span class="ruby-operator">::</span><span class="ruby-constant">Range</span>.<span class="ruby-identifier">new</span>(
      <span class="ruby-constant">Sass</span><span class="ruby-operator">::</span><span class="ruby-constant">Source</span><span class="ruby-operator">::</span><span class="ruby-constant">Position</span>.<span class="ruby-identifier">new</span>(<span class="ruby-ivar">@line</span>, <span class="ruby-identifier">to_parser_offset</span>(<span class="ruby-identifier">start_offset</span>)),
      <span class="ruby-constant">Sass</span><span class="ruby-operator">::</span><span class="ruby-constant">Source</span><span class="ruby-operator">::</span><span class="ruby-constant">Position</span>.<span class="ruby-identifier">new</span>(<span class="ruby-ivar">@line</span>, <span class="ruby-identifier">to_parser_offset</span>(<span class="ruby-identifier">offset</span>)),
      <span class="ruby-ivar">@options</span>[<span class="ruby-value">:filename</span>], <span class="ruby-ivar">@options</span>[<span class="ruby-value">:importer</span>])
  <span class="ruby-keyword">end</span>
  <span class="ruby-identifier">node</span>
<span class="ruby-keyword">end</span></pre>
          </div><!-- parse_import_arg-source -->
          
        </div>

        

        
      </div><!-- parse_import_arg-method -->

    
      <div id="method-i-parse_import_directive" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">parse_import_directive</span><span
            class="method-args">(parent, line, root, value, offset)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="parse_import_directive-source">
            <pre><span class="ruby-comment"># File lib/sass/engine.rb, line 984</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">parse_import_directive</span>(<span class="ruby-identifier">parent</span>, <span class="ruby-identifier">line</span>, <span class="ruby-identifier">root</span>, <span class="ruby-identifier">value</span>, <span class="ruby-identifier">offset</span>)
  <span class="ruby-identifier">raise</span> <span class="ruby-constant">SyntaxError</span>.<span class="ruby-identifier">new</span>(<span class="ruby-string">&quot;Illegal nesting: Nothing may be nested beneath import directives.&quot;</span>,
    <span class="ruby-value">:line</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-ivar">@line</span> <span class="ruby-operator">+</span> <span class="ruby-value">1</span>) <span class="ruby-keyword">unless</span> <span class="ruby-identifier">line</span>.<span class="ruby-identifier">children</span>.<span class="ruby-identifier">empty?</span>

  <span class="ruby-identifier">scanner</span> = <span class="ruby-constant">Sass</span><span class="ruby-operator">::</span><span class="ruby-constant">Util</span><span class="ruby-operator">::</span><span class="ruby-constant">MultibyteStringScanner</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">value</span>)
  <span class="ruby-identifier">values</span> = []

  <span class="ruby-identifier">loop</span> <span class="ruby-keyword">do</span>
    <span class="ruby-keyword">unless</span> (<span class="ruby-identifier">node</span> = <span class="ruby-identifier">parse_import_arg</span>(<span class="ruby-identifier">scanner</span>, <span class="ruby-identifier">offset</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">scanner</span>.<span class="ruby-identifier">pos</span>))
      <span class="ruby-identifier">raise</span> <span class="ruby-constant">SyntaxError</span>.<span class="ruby-identifier">new</span>(
        <span class="ruby-node">&quot;Invalid @import: expected file to import, was #{scanner.rest.inspect}&quot;</span>,
        <span class="ruby-value">:line</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-ivar">@line</span>)
    <span class="ruby-keyword">end</span>
    <span class="ruby-identifier">values</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">node</span>
    <span class="ruby-keyword">break</span> <span class="ruby-keyword">unless</span> <span class="ruby-identifier">scanner</span>.<span class="ruby-identifier">scan</span>(<span class="ruby-regexp">/,\s*/</span>)
  <span class="ruby-keyword">end</span>

  <span class="ruby-keyword">if</span> <span class="ruby-identifier">scanner</span>.<span class="ruby-identifier">scan</span>(<span class="ruby-regexp">/;/</span>)
    <span class="ruby-identifier">raise</span> <span class="ruby-constant">SyntaxError</span>.<span class="ruby-identifier">new</span>(<span class="ruby-string">&quot;Invalid @import: expected end of line, was \&quot;;\&quot;.&quot;</span>,
      <span class="ruby-value">:line</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-ivar">@line</span>)
  <span class="ruby-keyword">end</span>

  <span class="ruby-identifier">values</span>
<span class="ruby-keyword">end</span></pre>
          </div><!-- parse_import_directive-source -->
          
        </div>

        

        
      </div><!-- parse_import_directive-method -->

    
      <div id="method-i-parse_include_directive" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">parse_include_directive</span><span
            class="method-args">(parent, line, root, value, offset)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="parse_include_directive-source">
            <pre><span class="ruby-comment"># File lib/sass/engine.rb, line 1115</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">parse_include_directive</span>(<span class="ruby-identifier">parent</span>, <span class="ruby-identifier">line</span>, <span class="ruby-identifier">root</span>, <span class="ruby-identifier">value</span>, <span class="ruby-identifier">offset</span>)
  <span class="ruby-identifier">parse_mixin_include</span>(<span class="ruby-identifier">line</span>, <span class="ruby-identifier">root</span>)
<span class="ruby-keyword">end</span></pre>
          </div><!-- parse_include_directive-source -->
          
        </div>

        

        
      </div><!-- parse_include_directive-method -->

    
      <div id="method-i-parse_interp" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">parse_interp</span><span
            class="method-args">(text, offset = 0)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="parse_interp-source">
            <pre><span class="ruby-comment"># File lib/sass/engine.rb, line 1169</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">parse_interp</span>(<span class="ruby-identifier">text</span>, <span class="ruby-identifier">offset</span> = <span class="ruby-value">0</span>)
  <span class="ruby-keyword">self</span>.<span class="ruby-identifier">class</span>.<span class="ruby-identifier">parse_interp</span>(<span class="ruby-identifier">text</span>, <span class="ruby-ivar">@line</span>, <span class="ruby-identifier">offset</span>, <span class="ruby-value">:filename</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-ivar">@filename</span>)
<span class="ruby-keyword">end</span></pre>
          </div><!-- parse_interp-source -->
          
        </div>

        

        
      </div><!-- parse_interp-method -->

    
      <div id="method-i-parse_line" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">parse_line</span><span
            class="method-args">(parent, line, root)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="parse_line-source">
            <pre><span class="ruby-comment"># File lib/sass/engine.rb, line 608</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">parse_line</span>(<span class="ruby-identifier">parent</span>, <span class="ruby-identifier">line</span>, <span class="ruby-identifier">root</span>)
  <span class="ruby-keyword">case</span> <span class="ruby-identifier">line</span>.<span class="ruby-identifier">text</span>[<span class="ruby-value">0</span>]
  <span class="ruby-keyword">when</span> <span class="ruby-constant">PROPERTY_CHAR</span>
    <span class="ruby-keyword">if</span> <span class="ruby-identifier">line</span>.<span class="ruby-identifier">text</span>[<span class="ruby-value">1</span>] <span class="ruby-operator">==</span> <span class="ruby-constant">PROPERTY_CHAR</span> <span class="ruby-operator">||</span>
        (<span class="ruby-ivar">@options</span>[<span class="ruby-value">:property_syntax</span>] <span class="ruby-operator">==</span> <span class="ruby-value">:new</span> <span class="ruby-operator">&amp;&amp;</span>
         <span class="ruby-identifier">line</span>.<span class="ruby-identifier">text</span> <span class="ruby-operator">=~</span> <span class="ruby-constant">PROPERTY_OLD</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-node">$2</span>.<span class="ruby-identifier">empty?</span>)
      <span class="ruby-comment"># Support CSS3-style pseudo-elements,</span>
      <span class="ruby-comment"># which begin with ::,</span>
      <span class="ruby-comment"># as well as pseudo-classes</span>
      <span class="ruby-comment"># if we&#39;re using the new property syntax</span>
      <span class="ruby-constant">Tree</span><span class="ruby-operator">::</span><span class="ruby-constant">RuleNode</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">parse_interp</span>(<span class="ruby-identifier">line</span>.<span class="ruby-identifier">text</span>), <span class="ruby-identifier">full_line_range</span>(<span class="ruby-identifier">line</span>))
    <span class="ruby-keyword">else</span>
      <span class="ruby-identifier">name_start_offset</span> = <span class="ruby-identifier">line</span>.<span class="ruby-identifier">offset</span> <span class="ruby-operator">+</span> <span class="ruby-value">1</span> <span class="ruby-comment"># +1 for the leading &#39;:&#39;</span>
      <span class="ruby-identifier">name</span>, <span class="ruby-identifier">value</span> = <span class="ruby-identifier">line</span>.<span class="ruby-identifier">text</span>.<span class="ruby-identifier">scan</span>(<span class="ruby-constant">PROPERTY_OLD</span>)[<span class="ruby-value">0</span>]
      <span class="ruby-identifier">raise</span> <span class="ruby-constant">SyntaxError</span>.<span class="ruby-identifier">new</span>(<span class="ruby-node">&quot;Invalid property: \&quot;#{line.text}\&quot;.&quot;</span>,
        <span class="ruby-value">:line</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-ivar">@line</span>) <span class="ruby-keyword">if</span> <span class="ruby-identifier">name</span>.<span class="ruby-identifier">nil?</span> <span class="ruby-operator">||</span> <span class="ruby-identifier">value</span>.<span class="ruby-identifier">nil?</span>

      <span class="ruby-identifier">value_start_offset</span> = <span class="ruby-identifier">name_end_offset</span> = <span class="ruby-identifier">name_start_offset</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">name</span>.<span class="ruby-identifier">length</span>
      <span class="ruby-keyword">unless</span> <span class="ruby-identifier">value</span>.<span class="ruby-identifier">empty?</span>
        <span class="ruby-comment"># +1 and -1 both compensate for the leading &#39;:&#39;, which is part of line.text</span>
        <span class="ruby-identifier">value_start_offset</span> = <span class="ruby-identifier">name_start_offset</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">line</span>.<span class="ruby-identifier">text</span>.<span class="ruby-identifier">index</span>(<span class="ruby-identifier">value</span>, <span class="ruby-identifier">name</span>.<span class="ruby-identifier">length</span> <span class="ruby-operator">+</span> <span class="ruby-value">1</span>) <span class="ruby-operator">-</span> <span class="ruby-value">1</span>
      <span class="ruby-keyword">end</span>

      <span class="ruby-identifier">property</span> = <span class="ruby-identifier">parse_property</span>(<span class="ruby-identifier">name</span>, <span class="ruby-identifier">parse_interp</span>(<span class="ruby-identifier">name</span>), <span class="ruby-identifier">value</span>, <span class="ruby-value">:old</span>, <span class="ruby-identifier">line</span>, <span class="ruby-identifier">value_start_offset</span>)
      <span class="ruby-identifier">property</span>.<span class="ruby-identifier">name_source_range</span> = <span class="ruby-constant">Sass</span><span class="ruby-operator">::</span><span class="ruby-constant">Source</span><span class="ruby-operator">::</span><span class="ruby-constant">Range</span>.<span class="ruby-identifier">new</span>(
        <span class="ruby-constant">Sass</span><span class="ruby-operator">::</span><span class="ruby-constant">Source</span><span class="ruby-operator">::</span><span class="ruby-constant">Position</span>.<span class="ruby-identifier">new</span>(<span class="ruby-ivar">@line</span>, <span class="ruby-identifier">to_parser_offset</span>(<span class="ruby-identifier">name_start_offset</span>)),
        <span class="ruby-constant">Sass</span><span class="ruby-operator">::</span><span class="ruby-constant">Source</span><span class="ruby-operator">::</span><span class="ruby-constant">Position</span>.<span class="ruby-identifier">new</span>(<span class="ruby-ivar">@line</span>, <span class="ruby-identifier">to_parser_offset</span>(<span class="ruby-identifier">name_end_offset</span>)),
        <span class="ruby-ivar">@options</span>[<span class="ruby-value">:filename</span>], <span class="ruby-ivar">@options</span>[<span class="ruby-value">:importer</span>])
      <span class="ruby-identifier">property</span>
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">when</span> <span class="ruby-string">$</span>
    <span class="ruby-identifier">parse_variable</span>(<span class="ruby-identifier">line</span>)
  <span class="ruby-keyword">when</span> <span class="ruby-constant">COMMENT_CHAR</span>
    <span class="ruby-identifier">parse_comment</span>(<span class="ruby-identifier">line</span>)
  <span class="ruby-keyword">when</span> <span class="ruby-constant">DIRECTIVE_CHAR</span>
    <span class="ruby-identifier">parse_directive</span>(<span class="ruby-identifier">parent</span>, <span class="ruby-identifier">line</span>, <span class="ruby-identifier">root</span>)
  <span class="ruby-keyword">when</span> <span class="ruby-constant">ESCAPE_CHAR</span>
    <span class="ruby-constant">Tree</span><span class="ruby-operator">::</span><span class="ruby-constant">RuleNode</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">parse_interp</span>(<span class="ruby-identifier">line</span>.<span class="ruby-identifier">text</span>[<span class="ruby-value">1</span><span class="ruby-operator">..</span><span class="ruby-value">-1</span>]), <span class="ruby-identifier">full_line_range</span>(<span class="ruby-identifier">line</span>))
  <span class="ruby-keyword">when</span> <span class="ruby-constant">MIXIN_DEFINITION_CHAR</span>
    <span class="ruby-identifier">parse_mixin_definition</span>(<span class="ruby-identifier">line</span>)
  <span class="ruby-keyword">when</span> <span class="ruby-constant">MIXIN_INCLUDE_CHAR</span>
    <span class="ruby-keyword">if</span> <span class="ruby-identifier">line</span>.<span class="ruby-identifier">text</span>[<span class="ruby-value">1</span>].<span class="ruby-identifier">nil?</span> <span class="ruby-operator">||</span> <span class="ruby-identifier">line</span>.<span class="ruby-identifier">text</span>[<span class="ruby-value">1</span>] <span class="ruby-operator">==</span> <span class="ruby-string">\</span><span class="ruby-identifier">s</span>
      <span class="ruby-constant">Tree</span><span class="ruby-operator">::</span><span class="ruby-constant">RuleNode</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">parse_interp</span>(<span class="ruby-identifier">line</span>.<span class="ruby-identifier">text</span>), <span class="ruby-identifier">full_line_range</span>(<span class="ruby-identifier">line</span>))
    <span class="ruby-keyword">else</span>
      <span class="ruby-identifier">parse_mixin_include</span>(<span class="ruby-identifier">line</span>, <span class="ruby-identifier">root</span>)
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">else</span>
    <span class="ruby-identifier">parse_property_or_rule</span>(<span class="ruby-identifier">line</span>)
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
          </div><!-- parse_line-source -->
          
        </div>

        

        
      </div><!-- parse_line-method -->

    
      <div id="method-i-parse_media_directive" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">parse_media_directive</span><span
            class="method-args">(parent, line, root, value, offset)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="parse_media_directive-source">
            <pre><span class="ruby-comment"># File lib/sass/engine.rb, line 884</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">parse_media_directive</span>(<span class="ruby-identifier">parent</span>, <span class="ruby-identifier">line</span>, <span class="ruby-identifier">root</span>, <span class="ruby-identifier">value</span>, <span class="ruby-identifier">offset</span>)
  <span class="ruby-identifier">parser</span> = <span class="ruby-constant">Sass</span><span class="ruby-operator">::</span><span class="ruby-constant">SCSS</span><span class="ruby-operator">::</span><span class="ruby-constant">Parser</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">value</span>,
    <span class="ruby-ivar">@options</span>[<span class="ruby-value">:filename</span>], <span class="ruby-ivar">@options</span>[<span class="ruby-value">:importer</span>],
    <span class="ruby-ivar">@line</span>, <span class="ruby-identifier">to_parser_offset</span>(<span class="ruby-ivar">@offset</span>))
  <span class="ruby-identifier">offset</span> = <span class="ruby-identifier">line</span>.<span class="ruby-identifier">offset</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">line</span>.<span class="ruby-identifier">text</span>.<span class="ruby-identifier">index</span>(<span class="ruby-string">&#39;media&#39;</span>).<span class="ruby-identifier">to_i</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>
  <span class="ruby-identifier">parsed_media_query_list</span> = <span class="ruby-identifier">parser</span>.<span class="ruby-identifier">parse_media_query_list</span>.<span class="ruby-identifier">to_a</span>
  <span class="ruby-identifier">node</span> = <span class="ruby-constant">Tree</span><span class="ruby-operator">::</span><span class="ruby-constant">MediaNode</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">parsed_media_query_list</span>)
  <span class="ruby-identifier">node</span>.<span class="ruby-identifier">source_range</span> = <span class="ruby-constant">Sass</span><span class="ruby-operator">::</span><span class="ruby-constant">Source</span><span class="ruby-operator">::</span><span class="ruby-constant">Range</span>.<span class="ruby-identifier">new</span>(
    <span class="ruby-constant">Sass</span><span class="ruby-operator">::</span><span class="ruby-constant">Source</span><span class="ruby-operator">::</span><span class="ruby-constant">Position</span>.<span class="ruby-identifier">new</span>(<span class="ruby-ivar">@line</span>, <span class="ruby-identifier">to_parser_offset</span>(<span class="ruby-identifier">offset</span>)),
    <span class="ruby-constant">Sass</span><span class="ruby-operator">::</span><span class="ruby-constant">Source</span><span class="ruby-operator">::</span><span class="ruby-constant">Position</span>.<span class="ruby-identifier">new</span>(<span class="ruby-ivar">@line</span>, <span class="ruby-identifier">to_parser_offset</span>(<span class="ruby-identifier">line</span>.<span class="ruby-identifier">offset</span>) <span class="ruby-operator">+</span> <span class="ruby-identifier">line</span>.<span class="ruby-identifier">text</span>.<span class="ruby-identifier">length</span>),
    <span class="ruby-ivar">@options</span>[<span class="ruby-value">:filename</span>], <span class="ruby-ivar">@options</span>[<span class="ruby-value">:importer</span>])
  <span class="ruby-identifier">node</span>
<span class="ruby-keyword">end</span></pre>
          </div><!-- parse_media_directive-source -->
          
        </div>

        

        
      </div><!-- parse_media_directive-method -->

    
      <div id="method-i-parse_mixin_definition" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">parse_mixin_definition</span><span
            class="method-args">(line)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="parse_mixin_definition-source">
            <pre><span class="ruby-comment"># File lib/sass/engine.rb, line 1093</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">parse_mixin_definition</span>(<span class="ruby-identifier">line</span>)
  <span class="ruby-identifier">name</span>, <span class="ruby-identifier">arg_string</span> = <span class="ruby-identifier">line</span>.<span class="ruby-identifier">text</span>.<span class="ruby-identifier">scan</span>(<span class="ruby-constant">MIXIN_DEF_RE</span>).<span class="ruby-identifier">first</span>
  <span class="ruby-identifier">raise</span> <span class="ruby-constant">SyntaxError</span>.<span class="ruby-identifier">new</span>(<span class="ruby-node">&quot;Invalid mixin \&quot;#{line.text[1..-1]}\&quot;.&quot;</span>) <span class="ruby-keyword">if</span> <span class="ruby-identifier">name</span>.<span class="ruby-identifier">nil?</span>

  <span class="ruby-identifier">offset</span> = <span class="ruby-identifier">line</span>.<span class="ruby-identifier">offset</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">line</span>.<span class="ruby-identifier">text</span>.<span class="ruby-identifier">size</span> <span class="ruby-operator">-</span> <span class="ruby-identifier">arg_string</span>.<span class="ruby-identifier">size</span>
  <span class="ruby-identifier">args</span>, <span class="ruby-identifier">splat</span> = <span class="ruby-constant">Script</span><span class="ruby-operator">::</span><span class="ruby-constant">Parser</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">arg_string</span>.<span class="ruby-identifier">strip</span>, <span class="ruby-ivar">@line</span>, <span class="ruby-identifier">to_parser_offset</span>(<span class="ruby-identifier">offset</span>), <span class="ruby-ivar">@options</span>).
    <span class="ruby-identifier">parse_mixin_definition_arglist</span>
  <span class="ruby-constant">Tree</span><span class="ruby-operator">::</span><span class="ruby-constant">MixinDefNode</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">name</span>, <span class="ruby-identifier">args</span>, <span class="ruby-identifier">splat</span>)
<span class="ruby-keyword">end</span></pre>
          </div><!-- parse_mixin_definition-source -->
          
        </div>

        

        
      </div><!-- parse_mixin_definition-method -->

    
      <div id="method-i-parse_mixin_directive" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">parse_mixin_directive</span><span
            class="method-args">(parent, line, root, value, offset)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>@comment</p>

<pre>rubocop:enable MethodLength</pre>
          
          

          
          <div class="method-source-code" id="parse_mixin_directive-source">
            <pre><span class="ruby-comment"># File lib/sass/engine.rb, line 1088</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">parse_mixin_directive</span>(<span class="ruby-identifier">parent</span>, <span class="ruby-identifier">line</span>, <span class="ruby-identifier">root</span>, <span class="ruby-identifier">value</span>, <span class="ruby-identifier">offset</span>)
  <span class="ruby-identifier">parse_mixin_definition</span>(<span class="ruby-identifier">line</span>)
<span class="ruby-keyword">end</span></pre>
          </div><!-- parse_mixin_directive-source -->
          
        </div>

        

        
      </div><!-- parse_mixin_directive-method -->

    
      <div id="method-i-parse_mixin_include" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">parse_mixin_include</span><span
            class="method-args">(line, root)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="parse_mixin_include-source">
            <pre><span class="ruby-comment"># File lib/sass/engine.rb, line 1120</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">parse_mixin_include</span>(<span class="ruby-identifier">line</span>, <span class="ruby-identifier">root</span>)
  <span class="ruby-identifier">name</span>, <span class="ruby-identifier">arg_string</span> = <span class="ruby-identifier">line</span>.<span class="ruby-identifier">text</span>.<span class="ruby-identifier">scan</span>(<span class="ruby-constant">MIXIN_INCLUDE_RE</span>).<span class="ruby-identifier">first</span>
  <span class="ruby-identifier">raise</span> <span class="ruby-constant">SyntaxError</span>.<span class="ruby-identifier">new</span>(<span class="ruby-node">&quot;Invalid mixin include \&quot;#{line.text}\&quot;.&quot;</span>) <span class="ruby-keyword">if</span> <span class="ruby-identifier">name</span>.<span class="ruby-identifier">nil?</span>

  <span class="ruby-identifier">offset</span> = <span class="ruby-identifier">line</span>.<span class="ruby-identifier">offset</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">line</span>.<span class="ruby-identifier">text</span>.<span class="ruby-identifier">size</span> <span class="ruby-operator">-</span> <span class="ruby-identifier">arg_string</span>.<span class="ruby-identifier">size</span>
  <span class="ruby-identifier">args</span>, <span class="ruby-identifier">keywords</span>, <span class="ruby-identifier">splat</span>, <span class="ruby-identifier">kwarg_splat</span> =
    <span class="ruby-constant">Script</span><span class="ruby-operator">::</span><span class="ruby-constant">Parser</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">arg_string</span>.<span class="ruby-identifier">strip</span>, <span class="ruby-ivar">@line</span>, <span class="ruby-identifier">to_parser_offset</span>(<span class="ruby-identifier">offset</span>), <span class="ruby-ivar">@options</span>).
      <span class="ruby-identifier">parse_mixin_include_arglist</span>
  <span class="ruby-constant">Tree</span><span class="ruby-operator">::</span><span class="ruby-constant">MixinNode</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">name</span>, <span class="ruby-identifier">args</span>, <span class="ruby-identifier">keywords</span>, <span class="ruby-identifier">splat</span>, <span class="ruby-identifier">kwarg_splat</span>)
<span class="ruby-keyword">end</span></pre>
          </div><!-- parse_mixin_include-source -->
          
        </div>

        

        
      </div><!-- parse_mixin_include-method -->

    
      <div id="method-i-parse_property" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">parse_property</span><span
            class="method-args">(name, parsed_name, value, prop, line, start_offset)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>@comment</p>

<pre>rubocop:disable ParameterLists</pre>
          
          

          
          <div class="method-source-code" id="parse_property-source">
            <pre><span class="ruby-comment"># File lib/sass/engine.rb, line 712</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">parse_property</span>(<span class="ruby-identifier">name</span>, <span class="ruby-identifier">parsed_name</span>, <span class="ruby-identifier">value</span>, <span class="ruby-identifier">prop</span>, <span class="ruby-identifier">line</span>, <span class="ruby-identifier">start_offset</span>)
  <span class="ruby-comment"># rubocop:enable ParameterLists</span>
  <span class="ruby-keyword">if</span> <span class="ruby-identifier">value</span>.<span class="ruby-identifier">strip</span>.<span class="ruby-identifier">empty?</span>
    <span class="ruby-identifier">expr</span> = <span class="ruby-constant">Sass</span><span class="ruby-operator">::</span><span class="ruby-constant">Script</span><span class="ruby-operator">::</span><span class="ruby-constant">Tree</span><span class="ruby-operator">::</span><span class="ruby-constant">Literal</span>.<span class="ruby-identifier">new</span>(<span class="ruby-constant">Sass</span><span class="ruby-operator">::</span><span class="ruby-constant">Script</span><span class="ruby-operator">::</span><span class="ruby-constant">Value</span><span class="ruby-operator">::</span><span class="ruby-constant">String</span>.<span class="ruby-identifier">new</span>(<span class="ruby-string">&quot;&quot;</span>))
    <span class="ruby-identifier">end_offset</span> = <span class="ruby-identifier">start_offset</span>
  <span class="ruby-keyword">else</span>
    <span class="ruby-identifier">expr</span> = <span class="ruby-identifier">parse_script</span>(<span class="ruby-identifier">value</span>, <span class="ruby-value">:offset</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">to_parser_offset</span>(<span class="ruby-identifier">start_offset</span>))
    <span class="ruby-identifier">end_offset</span> = <span class="ruby-identifier">expr</span>.<span class="ruby-identifier">source_range</span>.<span class="ruby-identifier">end_pos</span>.<span class="ruby-identifier">offset</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-identifier">node</span> = <span class="ruby-constant">Tree</span><span class="ruby-operator">::</span><span class="ruby-constant">PropNode</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">parse_interp</span>(<span class="ruby-identifier">name</span>), <span class="ruby-identifier">expr</span>, <span class="ruby-identifier">prop</span>)
  <span class="ruby-identifier">node</span>.<span class="ruby-identifier">value_source_range</span> = <span class="ruby-constant">Sass</span><span class="ruby-operator">::</span><span class="ruby-constant">Source</span><span class="ruby-operator">::</span><span class="ruby-constant">Range</span>.<span class="ruby-identifier">new</span>(
    <span class="ruby-constant">Sass</span><span class="ruby-operator">::</span><span class="ruby-constant">Source</span><span class="ruby-operator">::</span><span class="ruby-constant">Position</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">line</span>.<span class="ruby-identifier">index</span>, <span class="ruby-identifier">to_parser_offset</span>(<span class="ruby-identifier">start_offset</span>)),
    <span class="ruby-constant">Sass</span><span class="ruby-operator">::</span><span class="ruby-constant">Source</span><span class="ruby-operator">::</span><span class="ruby-constant">Position</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">line</span>.<span class="ruby-identifier">index</span>, <span class="ruby-identifier">to_parser_offset</span>(<span class="ruby-identifier">end_offset</span>)),
    <span class="ruby-ivar">@options</span>[<span class="ruby-value">:filename</span>], <span class="ruby-ivar">@options</span>[<span class="ruby-value">:importer</span>])
  <span class="ruby-keyword">if</span> <span class="ruby-identifier">value</span>.<span class="ruby-identifier">strip</span>.<span class="ruby-identifier">empty?</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">line</span>.<span class="ruby-identifier">children</span>.<span class="ruby-identifier">empty?</span>
    <span class="ruby-identifier">raise</span> <span class="ruby-constant">SyntaxError</span>.<span class="ruby-identifier">new</span>(
      <span class="ruby-node">&quot;Invalid property: \&quot;#{node.declaration}\&quot; (no value).&quot;</span> <span class="ruby-operator">+</span>
      <span class="ruby-identifier">node</span>.<span class="ruby-identifier">pseudo_class_selector_message</span>)
  <span class="ruby-keyword">end</span>

  <span class="ruby-identifier">node</span>
<span class="ruby-keyword">end</span></pre>
          </div><!-- parse_property-source -->
          
        </div>

        

        
      </div><!-- parse_property-method -->

    
      <div id="method-i-parse_property_or_rule" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">parse_property_or_rule</span><span
            class="method-args">(line)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="parse_property_or_rule-source">
            <pre><span class="ruby-comment"># File lib/sass/engine.rb, line 659</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">parse_property_or_rule</span>(<span class="ruby-identifier">line</span>)
  <span class="ruby-identifier">scanner</span> = <span class="ruby-constant">Sass</span><span class="ruby-operator">::</span><span class="ruby-constant">Util</span><span class="ruby-operator">::</span><span class="ruby-constant">MultibyteStringScanner</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">line</span>.<span class="ruby-identifier">text</span>)
  <span class="ruby-identifier">hack_char</span> = <span class="ruby-identifier">scanner</span>.<span class="ruby-identifier">scan</span>(<span class="ruby-node">/[:\*\.]|\#(?!\{)/</span>)
  <span class="ruby-identifier">offset</span> = <span class="ruby-identifier">line</span>.<span class="ruby-identifier">offset</span>
  <span class="ruby-identifier">offset</span> <span class="ruby-operator">+=</span> <span class="ruby-identifier">hack_char</span>.<span class="ruby-identifier">length</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">hack_char</span>
  <span class="ruby-identifier">parser</span> = <span class="ruby-constant">Sass</span><span class="ruby-operator">::</span><span class="ruby-constant">SCSS</span><span class="ruby-operator">::</span><span class="ruby-constant">Parser</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">scanner</span>,
    <span class="ruby-ivar">@options</span>[<span class="ruby-value">:filename</span>], <span class="ruby-ivar">@options</span>[<span class="ruby-value">:importer</span>],
    <span class="ruby-ivar">@line</span>, <span class="ruby-identifier">to_parser_offset</span>(<span class="ruby-identifier">offset</span>))

  <span class="ruby-keyword">unless</span> (<span class="ruby-identifier">res</span> = <span class="ruby-identifier">parser</span>.<span class="ruby-identifier">parse_interp_ident</span>)
    <span class="ruby-identifier">parsed</span> = <span class="ruby-identifier">parse_interp</span>(<span class="ruby-identifier">line</span>.<span class="ruby-identifier">text</span>, <span class="ruby-identifier">line</span>.<span class="ruby-identifier">offset</span>)
    <span class="ruby-keyword">return</span> <span class="ruby-constant">Tree</span><span class="ruby-operator">::</span><span class="ruby-constant">RuleNode</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">parsed</span>, <span class="ruby-identifier">full_line_range</span>(<span class="ruby-identifier">line</span>))
  <span class="ruby-keyword">end</span>

  <span class="ruby-identifier">ident_range</span> = <span class="ruby-constant">Sass</span><span class="ruby-operator">::</span><span class="ruby-constant">Source</span><span class="ruby-operator">::</span><span class="ruby-constant">Range</span>.<span class="ruby-identifier">new</span>(
    <span class="ruby-constant">Sass</span><span class="ruby-operator">::</span><span class="ruby-constant">Source</span><span class="ruby-operator">::</span><span class="ruby-constant">Position</span>.<span class="ruby-identifier">new</span>(<span class="ruby-ivar">@line</span>, <span class="ruby-identifier">to_parser_offset</span>(<span class="ruby-identifier">line</span>.<span class="ruby-identifier">offset</span>)),
    <span class="ruby-constant">Sass</span><span class="ruby-operator">::</span><span class="ruby-constant">Source</span><span class="ruby-operator">::</span><span class="ruby-constant">Position</span>.<span class="ruby-identifier">new</span>(<span class="ruby-ivar">@line</span>, <span class="ruby-identifier">parser</span>.<span class="ruby-identifier">offset</span>),
    <span class="ruby-ivar">@options</span>[<span class="ruby-value">:filename</span>], <span class="ruby-ivar">@options</span>[<span class="ruby-value">:importer</span>])
  <span class="ruby-identifier">offset</span> = <span class="ruby-identifier">parser</span>.<span class="ruby-identifier">offset</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>
  <span class="ruby-identifier">res</span>.<span class="ruby-identifier">unshift</span>(<span class="ruby-identifier">hack_char</span>) <span class="ruby-keyword">if</span> <span class="ruby-identifier">hack_char</span>

  <span class="ruby-comment"># Handle comments after a property name but before the colon.</span>
  <span class="ruby-keyword">if</span> (<span class="ruby-identifier">comment</span> = <span class="ruby-identifier">scanner</span>.<span class="ruby-identifier">scan</span>(<span class="ruby-constant">Sass</span><span class="ruby-operator">::</span><span class="ruby-constant">SCSS</span><span class="ruby-operator">::</span><span class="ruby-constant">RX</span><span class="ruby-operator">::</span><span class="ruby-constant">COMMENT</span>))
    <span class="ruby-identifier">res</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">comment</span>
    <span class="ruby-identifier">offset</span> <span class="ruby-operator">+=</span> <span class="ruby-identifier">comment</span>.<span class="ruby-identifier">length</span>
  <span class="ruby-keyword">end</span>

  <span class="ruby-identifier">name</span> = <span class="ruby-identifier">line</span>.<span class="ruby-identifier">text</span>[<span class="ruby-value">0</span><span class="ruby-operator">...</span><span class="ruby-identifier">scanner</span>.<span class="ruby-identifier">pos</span>]
  <span class="ruby-keyword">if</span> (<span class="ruby-identifier">scanned</span> = <span class="ruby-identifier">scanner</span>.<span class="ruby-identifier">scan</span>(<span class="ruby-regexp">/\s*:(?:\s+|$)/</span>)) <span class="ruby-comment"># test for a property</span>
    <span class="ruby-identifier">offset</span> <span class="ruby-operator">+=</span> <span class="ruby-identifier">scanned</span>.<span class="ruby-identifier">length</span>
    <span class="ruby-identifier">property</span> = <span class="ruby-identifier">parse_property</span>(<span class="ruby-identifier">name</span>, <span class="ruby-identifier">res</span>, <span class="ruby-identifier">scanner</span>.<span class="ruby-identifier">rest</span>, <span class="ruby-value">:new</span>, <span class="ruby-identifier">line</span>, <span class="ruby-identifier">offset</span>)
    <span class="ruby-identifier">property</span>.<span class="ruby-identifier">name_source_range</span> = <span class="ruby-identifier">ident_range</span>
    <span class="ruby-identifier">property</span>
  <span class="ruby-keyword">else</span>
    <span class="ruby-identifier">res</span>.<span class="ruby-identifier">pop</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">comment</span>

    <span class="ruby-keyword">if</span> (<span class="ruby-identifier">trailing</span> = (<span class="ruby-identifier">scanner</span>.<span class="ruby-identifier">scan</span>(<span class="ruby-node">/\s*#{Sass::SCSS::RX::COMMENT}/</span>) <span class="ruby-operator">||</span>
                    <span class="ruby-identifier">scanner</span>.<span class="ruby-identifier">scan</span>(<span class="ruby-node">/\s*#{Sass::SCSS::RX::SINGLE_LINE_COMMENT}/</span>)))
      <span class="ruby-identifier">trailing</span>.<span class="ruby-identifier">strip!</span>
    <span class="ruby-keyword">end</span>
    <span class="ruby-identifier">interp_parsed</span> = <span class="ruby-identifier">parse_interp</span>(<span class="ruby-identifier">scanner</span>.<span class="ruby-identifier">rest</span>)
    <span class="ruby-identifier">selector_range</span> = <span class="ruby-constant">Sass</span><span class="ruby-operator">::</span><span class="ruby-constant">Source</span><span class="ruby-operator">::</span><span class="ruby-constant">Range</span>.<span class="ruby-identifier">new</span>(
      <span class="ruby-identifier">ident_range</span>.<span class="ruby-identifier">start_pos</span>,
      <span class="ruby-constant">Sass</span><span class="ruby-operator">::</span><span class="ruby-constant">Source</span><span class="ruby-operator">::</span><span class="ruby-constant">Position</span>.<span class="ruby-identifier">new</span>(<span class="ruby-ivar">@line</span>, <span class="ruby-identifier">to_parser_offset</span>(<span class="ruby-identifier">line</span>.<span class="ruby-identifier">offset</span>) <span class="ruby-operator">+</span> <span class="ruby-identifier">line</span>.<span class="ruby-identifier">text</span>.<span class="ruby-identifier">length</span>),
      <span class="ruby-ivar">@options</span>[<span class="ruby-value">:filename</span>], <span class="ruby-ivar">@options</span>[<span class="ruby-value">:importer</span>])
    <span class="ruby-identifier">rule</span> = <span class="ruby-constant">Tree</span><span class="ruby-operator">::</span><span class="ruby-constant">RuleNode</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">res</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">interp_parsed</span>, <span class="ruby-identifier">selector_range</span>)
    <span class="ruby-identifier">rule</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-constant">Tree</span><span class="ruby-operator">::</span><span class="ruby-constant">CommentNode</span>.<span class="ruby-identifier">new</span>([<span class="ruby-identifier">trailing</span>], <span class="ruby-value">:silent</span>) <span class="ruby-keyword">if</span> <span class="ruby-identifier">trailing</span>
    <span class="ruby-identifier">rule</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
          </div><!-- parse_property_or_rule-source -->
          
        </div>

        

        
      </div><!-- parse_property_or_rule-method -->

    
      <div id="method-i-parse_return_directive" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">parse_return_directive</span><span
            class="method-args">(parent, line, root, value, offset)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="parse_return_directive-source">
            <pre><span class="ruby-comment"># File lib/sass/engine.rb, line 868</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">parse_return_directive</span>(<span class="ruby-identifier">parent</span>, <span class="ruby-identifier">line</span>, <span class="ruby-identifier">root</span>, <span class="ruby-identifier">value</span>, <span class="ruby-identifier">offset</span>)
  <span class="ruby-identifier">raise</span> <span class="ruby-constant">SyntaxError</span>.<span class="ruby-identifier">new</span>(<span class="ruby-string">&quot;Invalid @return: expected expression.&quot;</span>) <span class="ruby-keyword">unless</span> <span class="ruby-identifier">value</span>
  <span class="ruby-identifier">raise</span> <span class="ruby-constant">SyntaxError</span>.<span class="ruby-identifier">new</span>(<span class="ruby-string">&quot;Illegal nesting: Nothing may be nested beneath return directives.&quot;</span>,
    <span class="ruby-value">:line</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-ivar">@line</span> <span class="ruby-operator">+</span> <span class="ruby-value">1</span>) <span class="ruby-keyword">unless</span> <span class="ruby-identifier">line</span>.<span class="ruby-identifier">children</span>.<span class="ruby-identifier">empty?</span>
  <span class="ruby-identifier">offset</span> = <span class="ruby-identifier">line</span>.<span class="ruby-identifier">offset</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">line</span>.<span class="ruby-identifier">text</span>.<span class="ruby-identifier">index</span>(<span class="ruby-identifier">value</span>).<span class="ruby-identifier">to_i</span>
  <span class="ruby-constant">Tree</span><span class="ruby-operator">::</span><span class="ruby-constant">ReturnNode</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">parse_script</span>(<span class="ruby-identifier">value</span>, <span class="ruby-value">:offset</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">offset</span>))
<span class="ruby-keyword">end</span></pre>
          </div><!-- parse_return_directive-source -->
          
        </div>

        

        
      </div><!-- parse_return_directive-method -->

    
      <div id="method-i-parse_script" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">parse_script</span><span
            class="method-args">(script, options = {})</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="parse_script-source">
            <pre><span class="ruby-comment"># File lib/sass/engine.rb, line 1142</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">parse_script</span>(<span class="ruby-identifier">script</span>, <span class="ruby-identifier">options</span> = {})
  <span class="ruby-identifier">line</span> = <span class="ruby-identifier">options</span>[<span class="ruby-value">:line</span>] <span class="ruby-operator">||</span> <span class="ruby-ivar">@line</span>
  <span class="ruby-identifier">offset</span> = <span class="ruby-identifier">options</span>[<span class="ruby-value">:offset</span>] <span class="ruby-operator">||</span> <span class="ruby-ivar">@offset</span> <span class="ruby-operator">+</span> <span class="ruby-value">1</span>
  <span class="ruby-constant">Script</span>.<span class="ruby-identifier">parse</span>(<span class="ruby-identifier">script</span>, <span class="ruby-identifier">line</span>, <span class="ruby-identifier">offset</span>, <span class="ruby-ivar">@options</span>)
<span class="ruby-keyword">end</span></pre>
          </div><!-- parse_script-source -->
          
        </div>

        

        
      </div><!-- parse_script-method -->

    
      <div id="method-i-parse_variable" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">parse_variable</span><span
            class="method-args">(line)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="parse_variable-source">
            <pre><span class="ruby-comment"># File lib/sass/engine.rb, line 735</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">parse_variable</span>(<span class="ruby-identifier">line</span>)
  <span class="ruby-identifier">name</span>, <span class="ruby-identifier">value</span>, <span class="ruby-identifier">flags</span> = <span class="ruby-identifier">line</span>.<span class="ruby-identifier">text</span>.<span class="ruby-identifier">scan</span>(<span class="ruby-constant">Script</span><span class="ruby-operator">::</span><span class="ruby-constant">MATCH</span>)[<span class="ruby-value">0</span>]
  <span class="ruby-identifier">raise</span> <span class="ruby-constant">SyntaxError</span>.<span class="ruby-identifier">new</span>(<span class="ruby-string">&quot;Illegal nesting: Nothing may be nested beneath variable declarations.&quot;</span>,
    <span class="ruby-value">:line</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-ivar">@line</span> <span class="ruby-operator">+</span> <span class="ruby-value">1</span>) <span class="ruby-keyword">unless</span> <span class="ruby-identifier">line</span>.<span class="ruby-identifier">children</span>.<span class="ruby-identifier">empty?</span>
  <span class="ruby-identifier">raise</span> <span class="ruby-constant">SyntaxError</span>.<span class="ruby-identifier">new</span>(<span class="ruby-node">&quot;Invalid variable: \&quot;#{line.text}\&quot;.&quot;</span>,
    <span class="ruby-value">:line</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-ivar">@line</span>) <span class="ruby-keyword">unless</span> <span class="ruby-identifier">name</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">value</span>
  <span class="ruby-identifier">flags</span> = <span class="ruby-identifier">flags</span> <span class="ruby-operator">?</span> <span class="ruby-identifier">flags</span>.<span class="ruby-identifier">split</span>(<span class="ruby-regexp">/\s+/</span>) <span class="ruby-operator">:</span> []
  <span class="ruby-keyword">if</span> (<span class="ruby-identifier">invalid_flag</span> = <span class="ruby-identifier">flags</span>.<span class="ruby-identifier">find</span> {<span class="ruby-operator">|</span><span class="ruby-identifier">f</span><span class="ruby-operator">|</span> <span class="ruby-identifier">f</span> <span class="ruby-operator">!=</span> <span class="ruby-string">&#39;!default&#39;</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">f</span> <span class="ruby-operator">!=</span> <span class="ruby-string">&#39;!global&#39;</span>})
    <span class="ruby-identifier">raise</span> <span class="ruby-constant">SyntaxError</span>.<span class="ruby-identifier">new</span>(<span class="ruby-node">&quot;Invalid flag \&quot;#{invalid_flag}\&quot;.&quot;</span>, <span class="ruby-value">:line</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-ivar">@line</span>)
  <span class="ruby-keyword">end</span>

  <span class="ruby-comment"># This workaround is needed for the case when the variable value is part of the identifier,</span>
  <span class="ruby-comment"># otherwise we end up with the offset equal to the value index inside the name:</span>
  <span class="ruby-comment"># $red_color: red;</span>
  <span class="ruby-identifier">var_lhs_length</span> = <span class="ruby-value">1</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">name</span>.<span class="ruby-identifier">length</span> <span class="ruby-comment"># 1 stands for &#39;$&#39;</span>
  <span class="ruby-identifier">index</span> = <span class="ruby-identifier">line</span>.<span class="ruby-identifier">text</span>.<span class="ruby-identifier">index</span>(<span class="ruby-identifier">value</span>, <span class="ruby-identifier">line</span>.<span class="ruby-identifier">offset</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">var_lhs_length</span>) <span class="ruby-operator">||</span> <span class="ruby-value">0</span>
  <span class="ruby-identifier">expr</span> = <span class="ruby-identifier">parse_script</span>(<span class="ruby-identifier">value</span>, <span class="ruby-value">:offset</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">to_parser_offset</span>(<span class="ruby-identifier">line</span>.<span class="ruby-identifier">offset</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">index</span>))

  <span class="ruby-constant">Tree</span><span class="ruby-operator">::</span><span class="ruby-constant">VariableNode</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">name</span>, <span class="ruby-identifier">expr</span>, <span class="ruby-identifier">flags</span>.<span class="ruby-identifier">include?</span>(<span class="ruby-string">&#39;!default&#39;</span>), <span class="ruby-identifier">flags</span>.<span class="ruby-identifier">include?</span>(<span class="ruby-string">&#39;!global&#39;</span>))
<span class="ruby-keyword">end</span></pre>
          </div><!-- parse_variable-source -->
          
        </div>

        

        
      </div><!-- parse_variable-method -->

    
      <div id="method-i-parse_warn_directive" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">parse_warn_directive</span><span
            class="method-args">(parent, line, root, value, offset)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="parse_warn_directive-source">
            <pre><span class="ruby-comment"># File lib/sass/engine.rb, line 860</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">parse_warn_directive</span>(<span class="ruby-identifier">parent</span>, <span class="ruby-identifier">line</span>, <span class="ruby-identifier">root</span>, <span class="ruby-identifier">value</span>, <span class="ruby-identifier">offset</span>)
  <span class="ruby-identifier">raise</span> <span class="ruby-constant">SyntaxError</span>.<span class="ruby-identifier">new</span>(<span class="ruby-string">&quot;Invalid warn directive &#39;@warn&#39;: expected expression.&quot;</span>) <span class="ruby-keyword">unless</span> <span class="ruby-identifier">value</span>
  <span class="ruby-identifier">raise</span> <span class="ruby-constant">SyntaxError</span>.<span class="ruby-identifier">new</span>(<span class="ruby-string">&quot;Illegal nesting: Nothing may be nested beneath warn directives.&quot;</span>,
    <span class="ruby-value">:line</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-ivar">@line</span> <span class="ruby-operator">+</span> <span class="ruby-value">1</span>) <span class="ruby-keyword">unless</span> <span class="ruby-identifier">line</span>.<span class="ruby-identifier">children</span>.<span class="ruby-identifier">empty?</span>
  <span class="ruby-identifier">offset</span> = <span class="ruby-identifier">line</span>.<span class="ruby-identifier">offset</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">line</span>.<span class="ruby-identifier">text</span>.<span class="ruby-identifier">index</span>(<span class="ruby-identifier">value</span>).<span class="ruby-identifier">to_i</span>
  <span class="ruby-constant">Tree</span><span class="ruby-operator">::</span><span class="ruby-constant">WarnNode</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">parse_script</span>(<span class="ruby-identifier">value</span>, <span class="ruby-value">:offset</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">offset</span>))
<span class="ruby-keyword">end</span></pre>
          </div><!-- parse_warn_directive-source -->
          
        </div>

        

        
      </div><!-- parse_warn_directive-method -->

    
      <div id="method-i-parse_while_directive" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">parse_while_directive</span><span
            class="method-args">(parent, line, root, value, offset)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="parse_while_directive-source">
            <pre><span class="ruby-comment"># File lib/sass/engine.rb, line 819</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">parse_while_directive</span>(<span class="ruby-identifier">parent</span>, <span class="ruby-identifier">line</span>, <span class="ruby-identifier">root</span>, <span class="ruby-identifier">value</span>, <span class="ruby-identifier">offset</span>)
  <span class="ruby-identifier">raise</span> <span class="ruby-constant">SyntaxError</span>.<span class="ruby-identifier">new</span>(<span class="ruby-string">&quot;Invalid while directive &#39;@while&#39;: expected expression.&quot;</span>) <span class="ruby-keyword">unless</span> <span class="ruby-identifier">value</span>
  <span class="ruby-constant">Tree</span><span class="ruby-operator">::</span><span class="ruby-constant">WhileNode</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">parse_script</span>(<span class="ruby-identifier">value</span>, <span class="ruby-value">:offset</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">offset</span>))
<span class="ruby-keyword">end</span></pre>
          </div><!-- parse_while_directive-source -->
          
        </div>

        

        
      </div><!-- parse_while_directive-method -->

    
      <div id="method-i-sassc_key" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">sassc_key</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="sassc_key-source">
            <pre><span class="ruby-comment"># File lib/sass/engine.rb, line 426</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">sassc_key</span>
  <span class="ruby-ivar">@options</span>[<span class="ruby-value">:cache_store</span>].<span class="ruby-identifier">key</span>(<span class="ruby-operator">*</span><span class="ruby-ivar">@options</span>[<span class="ruby-value">:importer</span>].<span class="ruby-identifier">key</span>(<span class="ruby-ivar">@options</span>[<span class="ruby-value">:filename</span>], <span class="ruby-ivar">@options</span>))
<span class="ruby-keyword">end</span></pre>
          </div><!-- sassc_key-source -->
          
        </div>

        

        
      </div><!-- sassc_key-method -->

    
      <div id="method-i-tabulate" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">tabulate</span><span
            class="method-args">(string)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="tabulate-source">
            <pre><span class="ruby-comment"># File lib/sass/engine.rb, line 436</span>
    <span class="ruby-keyword">def</span> <span class="ruby-identifier">tabulate</span>(<span class="ruby-identifier">string</span>)
      <span class="ruby-identifier">tab_str</span> = <span class="ruby-keyword">nil</span>
      <span class="ruby-identifier">comment_tab_str</span> = <span class="ruby-keyword">nil</span>
      <span class="ruby-identifier">first</span> = <span class="ruby-keyword">true</span>
      <span class="ruby-identifier">lines</span> = []
      <span class="ruby-identifier">string</span>.<span class="ruby-identifier">scan</span>(<span class="ruby-regexp">/^[^\n]*?$/</span>).<span class="ruby-identifier">each_with_index</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">line</span>, <span class="ruby-identifier">index</span><span class="ruby-operator">|</span>
        <span class="ruby-identifier">index</span> <span class="ruby-operator">+=</span> (<span class="ruby-ivar">@options</span>[<span class="ruby-value">:line</span>] <span class="ruby-operator">||</span> <span class="ruby-value">1</span>)
        <span class="ruby-keyword">if</span> <span class="ruby-identifier">line</span>.<span class="ruby-identifier">strip</span>.<span class="ruby-identifier">empty?</span>
          <span class="ruby-identifier">lines</span>.<span class="ruby-identifier">last</span>.<span class="ruby-identifier">text</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-string">&quot;\n&quot;</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">lines</span>.<span class="ruby-identifier">last</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">lines</span>.<span class="ruby-identifier">last</span>.<span class="ruby-identifier">comment?</span>
          <span class="ruby-keyword">next</span>
        <span class="ruby-keyword">end</span>

        <span class="ruby-identifier">line_tab_str</span> = <span class="ruby-identifier">line</span>[<span class="ruby-regexp">/^\s*/</span>]
        <span class="ruby-keyword">unless</span> <span class="ruby-identifier">line_tab_str</span>.<span class="ruby-identifier">empty?</span>
          <span class="ruby-keyword">if</span> <span class="ruby-identifier">tab_str</span>.<span class="ruby-identifier">nil?</span>
            <span class="ruby-identifier">comment_tab_str</span> <span class="ruby-operator">||=</span> <span class="ruby-identifier">line_tab_str</span>
            <span class="ruby-keyword">next</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">try_comment</span>(<span class="ruby-identifier">line</span>, <span class="ruby-identifier">lines</span>.<span class="ruby-identifier">last</span>, <span class="ruby-string">&quot;&quot;</span>, <span class="ruby-identifier">comment_tab_str</span>, <span class="ruby-identifier">index</span>)
            <span class="ruby-identifier">comment_tab_str</span> = <span class="ruby-keyword">nil</span>
          <span class="ruby-keyword">end</span>

          <span class="ruby-identifier">tab_str</span> <span class="ruby-operator">||=</span> <span class="ruby-identifier">line_tab_str</span>

          <span class="ruby-identifier">raise</span> <span class="ruby-constant">SyntaxError</span>.<span class="ruby-identifier">new</span>(<span class="ruby-string">&quot;Indenting at the beginning of the document is illegal.&quot;</span>,
            <span class="ruby-value">:line</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">index</span>) <span class="ruby-keyword">if</span> <span class="ruby-identifier">first</span>

          <span class="ruby-identifier">raise</span> <span class="ruby-constant">SyntaxError</span>.<span class="ruby-identifier">new</span>(<span class="ruby-string">&quot;Indentation can&#39;t use both tabs and spaces.&quot;</span>,
            <span class="ruby-value">:line</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">index</span>) <span class="ruby-keyword">if</span> <span class="ruby-identifier">tab_str</span>.<span class="ruby-identifier">include?</span>(<span class="ruby-string">\</span><span class="ruby-identifier">s</span>) <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">tab_str</span>.<span class="ruby-identifier">include?</span>(<span class="ruby-string">\</span><span class="ruby-identifier">t</span>)
        <span class="ruby-keyword">end</span>
        <span class="ruby-identifier">first</span> <span class="ruby-operator">&amp;&amp;=</span> <span class="ruby-operator">!</span><span class="ruby-identifier">tab_str</span>.<span class="ruby-identifier">nil?</span>
        <span class="ruby-keyword">if</span> <span class="ruby-identifier">tab_str</span>.<span class="ruby-identifier">nil?</span>
          <span class="ruby-identifier">lines</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-constant">Line</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">line</span>.<span class="ruby-identifier">strip</span>, <span class="ruby-value">0</span>, <span class="ruby-identifier">index</span>, <span class="ruby-value">0</span>, <span class="ruby-ivar">@options</span>[<span class="ruby-value">:filename</span>], [])
          <span class="ruby-keyword">next</span>
        <span class="ruby-keyword">end</span>

        <span class="ruby-identifier">comment_tab_str</span> <span class="ruby-operator">||=</span> <span class="ruby-identifier">line_tab_str</span>
        <span class="ruby-keyword">if</span> <span class="ruby-identifier">try_comment</span>(<span class="ruby-identifier">line</span>, <span class="ruby-identifier">lines</span>.<span class="ruby-identifier">last</span>, <span class="ruby-identifier">tab_str</span> <span class="ruby-operator">*</span> <span class="ruby-identifier">lines</span>.<span class="ruby-identifier">last</span>.<span class="ruby-identifier">tabs</span>, <span class="ruby-identifier">comment_tab_str</span>, <span class="ruby-identifier">index</span>)
          <span class="ruby-keyword">next</span>
        <span class="ruby-keyword">else</span>
          <span class="ruby-identifier">comment_tab_str</span> = <span class="ruby-keyword">nil</span>
        <span class="ruby-keyword">end</span>

        <span class="ruby-identifier">line_tabs</span> = <span class="ruby-identifier">line_tab_str</span>.<span class="ruby-identifier">scan</span>(<span class="ruby-identifier">tab_str</span>).<span class="ruby-identifier">size</span>
        <span class="ruby-keyword">if</span> <span class="ruby-identifier">tab_str</span> <span class="ruby-operator">*</span> <span class="ruby-identifier">line_tabs</span> <span class="ruby-operator">!=</span> <span class="ruby-identifier">line_tab_str</span>
          <span class="ruby-identifier">message</span> = <span class="ruby-string">&quot;Inconsistent indentation: #{Sass::Shared.human_indentation line_tab_str, true} used for indentation,
but the rest of the document was indented using #{Sass::Shared.human_indentation tab_str}.
&quot;</span>.<span class="ruby-identifier">strip</span>.<span class="ruby-identifier">tr</span>(<span class="ruby-string">&quot;\n&quot;</span>, <span class="ruby-string">&#39; &#39;</span>)
          <span class="ruby-identifier">raise</span> <span class="ruby-constant">SyntaxError</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">message</span>, <span class="ruby-value">:line</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">index</span>)
        <span class="ruby-keyword">end</span>

        <span class="ruby-identifier">lines</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-constant">Line</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">line</span>.<span class="ruby-identifier">strip</span>, <span class="ruby-identifier">line_tabs</span>, <span class="ruby-identifier">index</span>, <span class="ruby-identifier">line_tab_str</span>.<span class="ruby-identifier">size</span>, <span class="ruby-ivar">@options</span>[<span class="ruby-value">:filename</span>], [])
      <span class="ruby-keyword">end</span>
      <span class="ruby-identifier">lines</span>
    <span class="ruby-keyword">end</span></pre>
          </div><!-- tabulate-source -->
          
        </div>

        

        
      </div><!-- tabulate-method -->

    
      <div id="method-i-to_parser_offset" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">to_parser_offset</span><span
            class="method-args">(offset)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Parser tracks 1-based line and offset, so our offset should be converted.</p>
          
          

          
          <div class="method-source-code" id="to_parser_offset-source">
            <pre><span class="ruby-comment"># File lib/sass/engine.rb, line 1174</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">to_parser_offset</span>(<span class="ruby-identifier">offset</span>)
  <span class="ruby-identifier">offset</span> <span class="ruby-operator">+</span> <span class="ruby-value">1</span>
<span class="ruby-keyword">end</span></pre>
          </div><!-- to_parser_offset-source -->
          
        </div>

        

        
      </div><!-- to_parser_offset-method -->

    
      <div id="method-i-tree" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">tree</span><span
            class="method-args">(arr, i = 0)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="tree-source">
            <pre><span class="ruby-comment"># File lib/sass/engine.rb, line 510</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">tree</span>(<span class="ruby-identifier">arr</span>, <span class="ruby-identifier">i</span> = <span class="ruby-value">0</span>)
  <span class="ruby-keyword">return</span> [], <span class="ruby-identifier">i</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">arr</span>[<span class="ruby-identifier">i</span>].<span class="ruby-identifier">nil?</span>

  <span class="ruby-identifier">base</span> = <span class="ruby-identifier">arr</span>[<span class="ruby-identifier">i</span>].<span class="ruby-identifier">tabs</span>
  <span class="ruby-identifier">nodes</span> = []
  <span class="ruby-keyword">while</span> (<span class="ruby-identifier">line</span> = <span class="ruby-identifier">arr</span>[<span class="ruby-identifier">i</span>]) <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">line</span>.<span class="ruby-identifier">tabs</span> <span class="ruby-operator">&gt;=</span> <span class="ruby-identifier">base</span>
    <span class="ruby-keyword">if</span> <span class="ruby-identifier">line</span>.<span class="ruby-identifier">tabs</span> <span class="ruby-operator">&gt;</span> <span class="ruby-identifier">base</span>
      <span class="ruby-identifier">raise</span> <span class="ruby-constant">SyntaxError</span>.<span class="ruby-identifier">new</span>(
        <span class="ruby-node">&quot;The line was indented #{line.tabs - base} levels deeper than the previous line.&quot;</span>,
        <span class="ruby-value">:line</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">line</span>.<span class="ruby-identifier">index</span>) <span class="ruby-keyword">if</span> <span class="ruby-identifier">line</span>.<span class="ruby-identifier">tabs</span> <span class="ruby-operator">&gt;</span> <span class="ruby-identifier">base</span> <span class="ruby-operator">+</span> <span class="ruby-value">1</span>

      <span class="ruby-identifier">nodes</span>.<span class="ruby-identifier">last</span>.<span class="ruby-identifier">children</span>, <span class="ruby-identifier">i</span> = <span class="ruby-identifier">tree</span>(<span class="ruby-identifier">arr</span>, <span class="ruby-identifier">i</span>)
    <span class="ruby-keyword">else</span>
      <span class="ruby-identifier">nodes</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">line</span>
      <span class="ruby-identifier">i</span> <span class="ruby-operator">+=</span> <span class="ruby-value">1</span>
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">return</span> <span class="ruby-identifier">nodes</span>, <span class="ruby-identifier">i</span>
<span class="ruby-keyword">end</span></pre>
          </div><!-- tree-source -->
          
        </div>

        

        
      </div><!-- tree-method -->

    
      <div id="method-i-try_comment" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">try_comment</span><span
            class="method-args">(line, last, tab_str, comment_tab_str, index)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>@comment</p>
          
          

          
          <div class="method-source-code" id="try_comment-source">
            <pre><span class="ruby-comment"># File lib/sass/engine.rb, line 492</span>
    <span class="ruby-keyword">def</span> <span class="ruby-identifier">try_comment</span>(<span class="ruby-identifier">line</span>, <span class="ruby-identifier">last</span>, <span class="ruby-identifier">tab_str</span>, <span class="ruby-identifier">comment_tab_str</span>, <span class="ruby-identifier">index</span>)
      <span class="ruby-keyword">return</span> <span class="ruby-keyword">unless</span> <span class="ruby-identifier">last</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">last</span>.<span class="ruby-identifier">comment?</span>
      <span class="ruby-comment"># Nested comment stuff must be at least one whitespace char deeper</span>
      <span class="ruby-comment"># than the normal indentation</span>
      <span class="ruby-keyword">return</span> <span class="ruby-keyword">unless</span> <span class="ruby-identifier">line</span> <span class="ruby-operator">=~</span> <span class="ruby-node">/^#{tab_str}\s/</span>
      <span class="ruby-keyword">unless</span> <span class="ruby-identifier">line</span> <span class="ruby-operator">=~</span> <span class="ruby-node">/^(?:#{comment_tab_str})(.*)$/</span>
        <span class="ruby-identifier">raise</span> <span class="ruby-constant">SyntaxError</span>.<span class="ruby-identifier">new</span>(<span class="ruby-string">&quot;Inconsistent indentation:
previous line was indented by #{Sass::Shared.human_indentation comment_tab_str},
but this line was indented by #{Sass::Shared.human_indentation line[/^\s*/]}.
&quot;</span>.<span class="ruby-identifier">strip</span>.<span class="ruby-identifier">tr</span>(<span class="ruby-string">&quot;\n&quot;</span>, <span class="ruby-string">&quot; &quot;</span>), <span class="ruby-value">:line</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">index</span>)
      <span class="ruby-keyword">end</span>

      <span class="ruby-identifier">last</span>.<span class="ruby-identifier">comment_tab_str</span> <span class="ruby-operator">||=</span> <span class="ruby-identifier">comment_tab_str</span>
      <span class="ruby-identifier">last</span>.<span class="ruby-identifier">text</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-string">&quot;\n&quot;</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">line</span>
      <span class="ruby-keyword">true</span>
    <span class="ruby-keyword">end</span></pre>
          </div><!-- try_comment-source -->
          
        </div>

        

        
      </div><!-- try_comment-method -->

    
      <div id="method-i-validate_and_append_child" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">validate_and_append_child</span><span
            class="method-args">(parent, child, line, root)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="validate_and_append_child-source">
            <pre><span class="ruby-comment"># File lib/sass/engine.rb, line 591</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">validate_and_append_child</span>(<span class="ruby-identifier">parent</span>, <span class="ruby-identifier">child</span>, <span class="ruby-identifier">line</span>, <span class="ruby-identifier">root</span>)
  <span class="ruby-keyword">case</span> <span class="ruby-identifier">child</span>
  <span class="ruby-keyword">when</span> <span class="ruby-constant">Array</span>
    <span class="ruby-identifier">child</span>.<span class="ruby-identifier">each</span> {<span class="ruby-operator">|</span><span class="ruby-identifier">c</span><span class="ruby-operator">|</span> <span class="ruby-identifier">validate_and_append_child</span>(<span class="ruby-identifier">parent</span>, <span class="ruby-identifier">c</span>, <span class="ruby-identifier">line</span>, <span class="ruby-identifier">root</span>)}
  <span class="ruby-keyword">when</span> <span class="ruby-constant">Tree</span><span class="ruby-operator">::</span><span class="ruby-constant">Node</span>
    <span class="ruby-identifier">parent</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">child</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
          </div><!-- validate_and_append_child-source -->
          
        </div>

        

        
      </div><!-- validate_and_append_child-method -->

    
    </section><!-- private-instance-method-details -->
  
  </section><!-- 5Buntitled-5D -->

</div><!-- documentation -->


<footer id="validator-badges">
  <p><a href="http://validator.w3.org/check/referer">[Validate]</a>
  <p>Generated by <a href="https://github.com/rdoc/rdoc">RDoc</a> 4.0.0.
  <p>Generated with the <a href="http://deveiate.org/projects/Darkfish-Rdoc/">Darkfish Rdoc Generator</a> 3.
</footer>

